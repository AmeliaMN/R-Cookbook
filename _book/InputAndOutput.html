<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>4 Input and Output | R Cookbook, 2nd Edition</title>
  <meta name="description" content="Second edition of R Cookbook" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="4 Input and Output | R Cookbook, 2nd Edition" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Second edition of R Cookbook" />
  <meta name="github-repo" content="CerebralMastication/R-Cookbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="4 Input and Output | R Cookbook, 2nd Edition" />
  
  <meta name="twitter:description" content="Second edition of R Cookbook" />
  

<meta name="author" content="James (JD) Long" />
<meta name="author" content="Paul Teetor" />


<meta name="date" content="2024-11-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="NavigatingTheSoftware.html"/>
<link rel="next" href="DataStructures.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129487349-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-129487349-3');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R Cookbook 2nd Edition</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to the R Cookbook 2nd Edition</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-recipes"><i class="fa fa-check"></i>The Recipes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-note-on-terminology"><i class="fa fa-check"></i>A Note on Terminology</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-and-platform-notes"><i class="fa fa-check"></i>Software and Platform Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions-used-in-this-book"><i class="fa fa-check"></i>Conventions Used in This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#using-code-examples"><i class="fa fa-check"></i>Using Code Examples</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#safari-books-online"><i class="fa fa-check"></i>Safari® Books Online</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contact-us"><i class="fa fa-check"></i>How to Contact Us</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i><b>1</b> Getting Started and Getting Help</a>
<ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#intro-GettingStarted"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1.1" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id001"><i class="fa fa-check"></i><b>1.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id002b"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-startingrstudio"><i class="fa fa-check"></i><b>1.3</b> Starting RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id007"><i class="fa fa-check"></i><b>1.4</b> Entering Commands</a></li>
<li class="chapter" data-level="1.5" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id097"><i class="fa fa-check"></i><b>1.5</b> Exiting from RStudio</a></li>
<li class="chapter" data-level="1.6" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id100"><i class="fa fa-check"></i><b>1.6</b> Interrupting R</a></li>
<li class="chapter" data-level="1.7" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id265"><i class="fa fa-check"></i><b>1.7</b> Viewing the Supplied Documentation</a></li>
<li class="chapter" data-level="1.8" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id003"><i class="fa fa-check"></i><b>1.8</b> Getting Help on a Function</a></li>
<li class="chapter" data-level="1.9" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id267"><i class="fa fa-check"></i><b>1.9</b> Searching the Supplied Documentation</a></li>
<li class="chapter" data-level="1.10" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id266"><i class="fa fa-check"></i><b>1.10</b> Getting Help on a Package</a></li>
<li class="chapter" data-level="1.11" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id005"><i class="fa fa-check"></i><b>1.11</b> Searching the Web for Help</a></li>
<li class="chapter" data-level="1.12" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id270"><i class="fa fa-check"></i><b>1.12</b> Finding Relevant Functions and Packages</a></li>
<li class="chapter" data-level="1.13" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id268"><i class="fa fa-check"></i><b>1.13</b> Searching the Mailing Lists</a></li>
<li class="chapter" data-level="1.14" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id269"><i class="fa fa-check"></i><b>1.14</b> Submitting Questions to Stack Overflow or Elsewhere in the Community</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="SomeBasics.html"><a href="SomeBasics.html"><i class="fa fa-check"></i><b>2</b> Some Basics</a>
<ul>
<li class="chapter" data-level="" data-path="SomeBasics.html"><a href="SomeBasics.html#intro-SomeBasics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="2.1" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id017"><i class="fa fa-check"></i><b>2.1</b> Printing Something to the Screen</a></li>
<li class="chapter" data-level="2.2" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id016"><i class="fa fa-check"></i><b>2.2</b> Setting Variables</a></li>
<li class="chapter" data-level="2.3" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id091"><i class="fa fa-check"></i><b>2.3</b> Listing Variables</a></li>
<li class="chapter" data-level="2.4" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id075"><i class="fa fa-check"></i><b>2.4</b> Deleting Variables</a></li>
<li class="chapter" data-level="2.5" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id038"><i class="fa fa-check"></i><b>2.5</b> Creating a Vector</a></li>
<li class="chapter" data-level="2.6" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id101"><i class="fa fa-check"></i><b>2.6</b> Computing Basic Statistics</a></li>
<li class="chapter" data-level="2.7" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id021"><i class="fa fa-check"></i><b>2.7</b> Creating Sequences</a></li>
<li class="chapter" data-level="2.8" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id020"><i class="fa fa-check"></i><b>2.8</b> Comparing Vectors</a></li>
<li class="chapter" data-level="2.9" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id039"><i class="fa fa-check"></i><b>2.9</b> Selecting Vector Elements</a></li>
<li class="chapter" data-level="2.10" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id019"><i class="fa fa-check"></i><b>2.10</b> Performing Vector Arithmetic</a></li>
<li class="chapter" data-level="2.11" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id018"><i class="fa fa-check"></i><b>2.11</b> Getting Operator Precedence Right</a></li>
<li class="chapter" data-level="2.12" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id022"><i class="fa fa-check"></i><b>2.12</b> Typing Less and Accomplishing More</a></li>
<li class="chapter" data-level="2.13" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-pipe-2"><i class="fa fa-check"></i><b>2.13</b> Creating a Pipeline of Function Calls</a></li>
<li class="chapter" data-level="2.14" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id025"><i class="fa fa-check"></i><b>2.14</b> Avoiding Some Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html"><i class="fa fa-check"></i><b>3</b> Navigating the Software</a>
<ul>
<li class="chapter" data-level="" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#intro-NavigatingTheSoftware"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="3.1" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id008"><i class="fa fa-check"></i><b>3.1</b> Getting and Setting the Working Directory</a></li>
<li class="chapter" data-level="3.2" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-CreateProject"><i class="fa fa-check"></i><b>3.2</b> Creating a New RStudio Project</a></li>
<li class="chapter" data-level="3.3" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id009"><i class="fa fa-check"></i><b>3.3</b> Saving Your Workspace</a></li>
<li class="chapter" data-level="3.4" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id023"><i class="fa fa-check"></i><b>3.4</b> Viewing Your Command History</a></li>
<li class="chapter" data-level="3.5" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id024"><i class="fa fa-check"></i><b>3.5</b> Saving the Result of the Previous Command</a></li>
<li class="chapter" data-level="3.6" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id010"><i class="fa fa-check"></i><b>3.6</b> Displaying Loaded Packages via the Search Path</a></li>
<li class="chapter" data-level="3.7" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id094"><i class="fa fa-check"></i><b>3.7</b> Viewing the List of Installed Packages</a></li>
<li class="chapter" data-level="3.8" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id013"><i class="fa fa-check"></i><b>3.8</b> Accessing the Functions in a Package</a></li>
<li class="chapter" data-level="3.9" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id257"><i class="fa fa-check"></i><b>3.9</b> Accessing Built-in Datasets</a></li>
<li class="chapter" data-level="3.10" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id012"><i class="fa fa-check"></i><b>3.10</b> Installing Packages from CRAN</a></li>
<li class="chapter" data-level="3.11" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-installGH"><i class="fa fa-check"></i><b>3.11</b> Installing a Package from GitHub</a></li>
<li class="chapter" data-level="3.12" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id272"><i class="fa fa-check"></i><b>3.12</b> Setting or Changing a Default CRAN Mirror</a></li>
<li class="chapter" data-level="3.13" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id014"><i class="fa fa-check"></i><b>3.13</b> Running a Script</a></li>
<li class="chapter" data-level="3.14" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id015"><i class="fa fa-check"></i><b>3.14</b> Running a Batch Script</a></li>
<li class="chapter" data-level="3.15" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id102"><i class="fa fa-check"></i><b>3.15</b> Locating the R Home Directory</a></li>
<li class="chapter" data-level="3.16" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id099"><i class="fa fa-check"></i><b>3.16</b> Customizing R Startup</a></li>
<li class="chapter" data-level="3.17" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-Rcloud"><i class="fa fa-check"></i><b>3.17</b> Using R and RStudio in the Cloud</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="InputAndOutput.html"><a href="InputAndOutput.html"><i class="fa fa-check"></i><b>4</b> Input and Output</a>
<ul>
<li class="chapter" data-level="" data-path="InputAndOutput.html"><a href="InputAndOutput.html#intro-InputAndOutput"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="4.1" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id035"><i class="fa fa-check"></i><b>4.1</b> Entering Data from the Keyboard</a></li>
<li class="chapter" data-level="4.2" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id036"><i class="fa fa-check"></i><b>4.2</b> Printing Fewer Digits (or More Digits)</a></li>
<li class="chapter" data-level="4.3" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id034"><i class="fa fa-check"></i><b>4.3</b> Redirecting Output to a File</a></li>
<li class="chapter" data-level="4.4" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id030"><i class="fa fa-check"></i><b>4.4</b> Listing Files</a></li>
<li class="chapter" data-level="4.5" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id033"><i class="fa fa-check"></i><b>4.5</b> Dealing with “Cannot Open File” in Windows</a></li>
<li class="chapter" data-level="4.6" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id136"><i class="fa fa-check"></i><b>4.6</b> Reading Fixed-Width Records</a></li>
<li class="chapter" data-level="4.7" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id245"><i class="fa fa-check"></i><b>4.7</b> Reading Tabular Data Files</a></li>
<li class="chapter" data-level="4.8" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id027"><i class="fa fa-check"></i><b>4.8</b> Reading from CSV Files</a></li>
<li class="chapter" data-level="4.9" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id028"><i class="fa fa-check"></i><b>4.9</b> Writing to CSV Files</a></li>
<li class="chapter" data-level="4.10" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id031"><i class="fa fa-check"></i><b>4.10</b> Reading Tabular or CSV Data from the Web</a></li>
<li class="chapter" data-level="4.11" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-readexcel"><i class="fa fa-check"></i><b>4.11</b> Reading Data from Excel</a></li>
<li class="chapter" data-level="4.12" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-writeexcel"><i class="fa fa-check"></i><b>4.12</b> Writing a Data Frame to Excel</a></li>
<li class="chapter" data-level="4.13" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-readsas"><i class="fa fa-check"></i><b>4.13</b> Reading Data from a SAS file</a></li>
<li class="chapter" data-level="4.14" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id246"><i class="fa fa-check"></i><b>4.14</b> Reading Data from HTML Tables</a></li>
<li class="chapter" data-level="4.15" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id098"><i class="fa fa-check"></i><b>4.15</b> Reading Files with a Complex Structure</a></li>
<li class="chapter" data-level="4.16" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id037"><i class="fa fa-check"></i><b>4.16</b> Reading from MySQL Databases</a></li>
<li class="chapter" data-level="4.17" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-dbplyr"><i class="fa fa-check"></i><b>4.17</b> Accessing a Database with dbplyr</a></li>
<li class="chapter" data-level="4.18" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id029"><i class="fa fa-check"></i><b>4.18</b> Saving and Transporting Objects</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="DataStructures.html"><a href="DataStructures.html"><i class="fa fa-check"></i><b>5</b> Data Structures</a>
<ul>
<li class="chapter" data-level="" data-path="DataStructures.html"><a href="DataStructures.html#intro-DataStructures"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="5.1" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id048"><i class="fa fa-check"></i><b>5.1</b> Appending Data to a Vector</a></li>
<li class="chapter" data-level="5.2" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id049"><i class="fa fa-check"></i><b>5.2</b> Inserting Data into a Vector</a></li>
<li class="chapter" data-level="5.3" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id050"><i class="fa fa-check"></i><b>5.3</b> Understanding the Recycling Rule</a></li>
<li class="chapter" data-level="5.4" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id051"><i class="fa fa-check"></i><b>5.4</b> Creating a Factor (Categorical Variable)</a></li>
<li class="chapter" data-level="5.5" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id227"><i class="fa fa-check"></i><b>5.5</b> Combining Multiple Vectors into One Vector and a Factor</a></li>
<li class="chapter" data-level="5.6" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id053"><i class="fa fa-check"></i><b>5.6</b> Creating a List</a></li>
<li class="chapter" data-level="5.7" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id054"><i class="fa fa-check"></i><b>5.7</b> Selecting List Elements by Position</a></li>
<li class="chapter" data-level="5.8" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id253"><i class="fa fa-check"></i><b>5.8</b> Selecting List Elements by Name</a></li>
<li class="chapter" data-level="5.9" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id158"><i class="fa fa-check"></i><b>5.9</b> Building a Name/Value Association List</a></li>
<li class="chapter" data-level="5.10" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id056"><i class="fa fa-check"></i><b>5.10</b> Removing an Element from a List</a></li>
<li class="chapter" data-level="5.11" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id152"><i class="fa fa-check"></i><b>5.11</b> Flatten a List into a Vector</a></li>
<li class="chapter" data-level="5.12" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id058"><i class="fa fa-check"></i><b>5.12</b> Removing NULL Elements from a List</a></li>
<li class="chapter" data-level="5.13" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id060"><i class="fa fa-check"></i><b>5.13</b> Removing List Elements Using a Condition</a></li>
<li class="chapter" data-level="5.14" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id062"><i class="fa fa-check"></i><b>5.14</b> Initializing a Matrix</a></li>
<li class="chapter" data-level="5.15" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id139"><i class="fa fa-check"></i><b>5.15</b> Performing Matrix Operations</a></li>
<li class="chapter" data-level="5.16" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id063"><i class="fa fa-check"></i><b>5.16</b> Giving Descriptive Names to the Rows and Columns of a Matrix</a></li>
<li class="chapter" data-level="5.17" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id250"><i class="fa fa-check"></i><b>5.17</b> Selecting One Row or Column from a Matrix</a></li>
<li class="chapter" data-level="5.18" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id251"><i class="fa fa-check"></i><b>5.18</b> Initializing a Data Frame from Column Data</a></li>
<li class="chapter" data-level="5.19" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id252"><i class="fa fa-check"></i><b>5.19</b> Initializing a Data Frame from Row Data</a></li>
<li class="chapter" data-level="5.20" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id071"><i class="fa fa-check"></i><b>5.20</b> Appending Rows to a Data Frame</a></li>
<li class="chapter" data-level="5.21" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id068"><i class="fa fa-check"></i><b>5.21</b> Selecting Data Frame Columns by Position</a></li>
<li class="chapter" data-level="5.22" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id254"><i class="fa fa-check"></i><b>5.22</b> Selecting Data Frame Columns by Name</a></li>
<li class="chapter" data-level="5.23" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id069"><i class="fa fa-check"></i><b>5.23</b> Changing the Names of Data Frame Columns</a></li>
<li class="chapter" data-level="5.24" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id249"><i class="fa fa-check"></i><b>5.24</b> Removing NAs from a Data Frame</a></li>
<li class="chapter" data-level="5.25" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id072"><i class="fa fa-check"></i><b>5.25</b> Excluding Columns by Name</a></li>
<li class="chapter" data-level="5.26" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id155"><i class="fa fa-check"></i><b>5.26</b> Combining Two Data Frames</a></li>
<li class="chapter" data-level="5.27" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id057"><i class="fa fa-check"></i><b>5.27</b> Merging Data Frames by Common Column</a></li>
<li class="chapter" data-level="5.28" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id248"><i class="fa fa-check"></i><b>5.28</b> Converting One Atomic Value into Another</a></li>
<li class="chapter" data-level="5.29" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id074"><i class="fa fa-check"></i><b>5.29</b> Converting One Structured Data Type into Another</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="DataTransformations.html"><a href="DataTransformations.html"><i class="fa fa-check"></i><b>6</b> Data Transformations</a>
<ul>
<li class="chapter" data-level="" data-path="DataTransformations.html"><a href="DataTransformations.html#intro-DataTransformations"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="6.1" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id149"><i class="fa fa-check"></i><b>6.1</b> Applying a Function to Each List Element</a></li>
<li class="chapter" data-level="6.2" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-row_df"><i class="fa fa-check"></i><b>6.2</b> Applying a Function to Every Row of a Data Frame</a></li>
<li class="chapter" data-level="6.3" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id146"><i class="fa fa-check"></i><b>6.3</b> Applying a Function to Every Row of a Matrix</a></li>
<li class="chapter" data-level="6.4" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id157"><i class="fa fa-check"></i><b>6.4</b> Applying a Function to Every Column</a></li>
<li class="chapter" data-level="6.5" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id275"><i class="fa fa-check"></i><b>6.5</b> Applying a Function to Parallel Vectors or Lists</a></li>
<li class="chapter" data-level="6.6" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id148"><i class="fa fa-check"></i><b>6.6</b> Applying a Function to Groups of Data</a></li>
<li class="chapter" data-level="6.7" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-casewhen"><i class="fa fa-check"></i><b>6.7</b> Creating a New Column Based on Some Condition</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="StringsAndDates.html"><a href="StringsAndDates.html"><i class="fa fa-check"></i><b>7</b> Strings and Dates</a>
<ul>
<li class="chapter" data-level="" data-path="StringsAndDates.html"><a href="StringsAndDates.html#I_sect17_d1e17434"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="7.1" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id093"><i class="fa fa-check"></i><b>7.1</b> Getting the Length of a String</a></li>
<li class="chapter" data-level="7.2" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id040"><i class="fa fa-check"></i><b>7.2</b> Concatenating Strings</a></li>
<li class="chapter" data-level="7.3" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id041"><i class="fa fa-check"></i><b>7.3</b> Extracting Substrings</a></li>
<li class="chapter" data-level="7.4" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id276"><i class="fa fa-check"></i><b>7.4</b> Splitting a String According to a Delimiter</a></li>
<li class="chapter" data-level="7.5" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id277"><i class="fa fa-check"></i><b>7.5</b> Replacing Substrings</a></li>
<li class="chapter" data-level="7.6" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id109"><i class="fa fa-check"></i><b>7.6</b> Generating All Pairwise Combinations of Strings</a></li>
<li class="chapter" data-level="7.7" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id045"><i class="fa fa-check"></i><b>7.7</b> Getting the Current Date</a></li>
<li class="chapter" data-level="7.8" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id043"><i class="fa fa-check"></i><b>7.8</b> Converting a String into a Date</a></li>
<li class="chapter" data-level="7.9" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id044"><i class="fa fa-check"></i><b>7.9</b> Converting a Date into a String</a></li>
<li class="chapter" data-level="7.10" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id241"><i class="fa fa-check"></i><b>7.10</b> Converting Year, Month, and Day into a Date</a></li>
<li class="chapter" data-level="7.11" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id042"><i class="fa fa-check"></i><b>7.11</b> Getting the Julian Date</a></li>
<li class="chapter" data-level="7.12" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id046"><i class="fa fa-check"></i><b>7.12</b> Extracting the Parts of a Date</a></li>
<li class="chapter" data-level="7.13" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id047"><i class="fa fa-check"></i><b>7.13</b> Creating a Sequence of Dates</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Probability.html"><a href="Probability.html"><i class="fa fa-check"></i><b>8</b> Probability</a>
<ul>
<li class="chapter" data-level="" data-path="Probability.html"><a href="Probability.html#intro-Probability"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="8.1" data-path="Probability.html"><a href="Probability.html#recipe-id163"><i class="fa fa-check"></i><b>8.1</b> Counting the Number of Combinations</a></li>
<li class="chapter" data-level="8.2" data-path="Probability.html"><a href="Probability.html#recipe-id198"><i class="fa fa-check"></i><b>8.2</b> Generating Combinations</a></li>
<li class="chapter" data-level="8.3" data-path="Probability.html"><a href="Probability.html#recipe-id165"><i class="fa fa-check"></i><b>8.3</b> Generating Random Numbers</a></li>
<li class="chapter" data-level="8.4" data-path="Probability.html"><a href="Probability.html#recipe-id201"><i class="fa fa-check"></i><b>8.4</b> Generating Reproducible Random Numbers</a></li>
<li class="chapter" data-level="8.5" data-path="Probability.html"><a href="Probability.html#recipe-id199"><i class="fa fa-check"></i><b>8.5</b> Generating a Random Sample</a></li>
<li class="chapter" data-level="8.6" data-path="Probability.html"><a href="Probability.html#recipe-id200"><i class="fa fa-check"></i><b>8.6</b> Generating Random Sequences</a></li>
<li class="chapter" data-level="8.7" data-path="Probability.html"><a href="Probability.html#recipe-id151"><i class="fa fa-check"></i><b>8.7</b> Randomly Permuting a Vector</a></li>
<li class="chapter" data-level="8.8" data-path="Probability.html"><a href="Probability.html#recipe-id196"><i class="fa fa-check"></i><b>8.8</b> Calculating Probabilities for Discrete Distributions</a></li>
<li class="chapter" data-level="8.9" data-path="Probability.html"><a href="Probability.html#recipe-id197"><i class="fa fa-check"></i><b>8.9</b> Calculating Probabilities for Continuous Distributions</a></li>
<li class="chapter" data-level="8.10" data-path="Probability.html"><a href="Probability.html#recipe-id168"><i class="fa fa-check"></i><b>8.10</b> Converting Probabilities to Quantiles</a></li>
<li class="chapter" data-level="8.11" data-path="Probability.html"><a href="Probability.html#recipe-id166"><i class="fa fa-check"></i><b>8.11</b> Plotting a Density Function</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html"><i class="fa fa-check"></i><b>9</b> General Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#intro-GeneralStatistics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="9.1" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id119"><i class="fa fa-check"></i><b>9.1</b> Summarizing Your Data</a></li>
<li class="chapter" data-level="9.2" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id229"><i class="fa fa-check"></i><b>9.2</b> Calculating Relative Frequencies</a></li>
<li class="chapter" data-level="9.3" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id124"><i class="fa fa-check"></i><b>9.3</b> Tabulating Factors and Creating Contingency Tables</a></li>
<li class="chapter" data-level="9.4" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id125"><i class="fa fa-check"></i><b>9.4</b> Testing Categorical Variables for Independence</a></li>
<li class="chapter" data-level="9.5" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id143"><i class="fa fa-check"></i><b>9.5</b> Calculating Quantiles (and Quartiles) of a Dataset</a></li>
<li class="chapter" data-level="9.6" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id142"><i class="fa fa-check"></i><b>9.6</b> Inverting a Quantile</a></li>
<li class="chapter" data-level="9.7" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id133"><i class="fa fa-check"></i><b>9.7</b> Converting Data to z-Scores</a></li>
<li class="chapter" data-level="9.8" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id121"><i class="fa fa-check"></i><b>9.8</b> Testing the Mean of a Sample (t Test)</a></li>
<li class="chapter" data-level="9.9" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id123"><i class="fa fa-check"></i><b>9.9</b> Forming a Confidence Interval for a Mean</a></li>
<li class="chapter" data-level="9.10" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id135"><i class="fa fa-check"></i><b>9.10</b> Forming a Confidence Interval for a Median</a></li>
<li class="chapter" data-level="9.11" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id225"><i class="fa fa-check"></i><b>9.11</b> Testing a Sample Proportion</a></li>
<li class="chapter" data-level="9.12" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id226"><i class="fa fa-check"></i><b>9.12</b> Forming a Confidence Interval for a Proportion</a></li>
<li class="chapter" data-level="9.13" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id126"><i class="fa fa-check"></i><b>9.13</b> Testing for Normality</a></li>
<li class="chapter" data-level="9.14" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id131"><i class="fa fa-check"></i><b>9.14</b> Testing for Runs</a></li>
<li class="chapter" data-level="9.15" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id122"><i class="fa fa-check"></i><b>9.15</b> Comparing the Means of Two Samples</a></li>
<li class="chapter" data-level="9.16" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id130"><i class="fa fa-check"></i><b>9.16</b> Comparing the Locations of Two Samples Nonparametrically</a></li>
<li class="chapter" data-level="9.17" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id132"><i class="fa fa-check"></i><b>9.17</b> Testing a Correlation for Significance</a></li>
<li class="chapter" data-level="9.18" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id134"><i class="fa fa-check"></i><b>9.18</b> Testing Groups for Equal Proportions</a></li>
<li class="chapter" data-level="9.19" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id127"><i class="fa fa-check"></i><b>9.19</b> Performing Pairwise Comparisons Between Group Means</a></li>
<li class="chapter" data-level="9.20" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id129"><i class="fa fa-check"></i><b>9.20</b> Testing Two Samples for the Same Distribution</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Graphics.html"><a href="Graphics.html"><i class="fa fa-check"></i><b>10</b> Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="Graphics.html"><a href="Graphics.html#intro-Graphics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10.1" data-path="Graphics.html"><a href="Graphics.html#recipe-id171"><i class="fa fa-check"></i><b>10.1</b> Creating a Scatter Plot</a></li>
<li class="chapter" data-level="10.2" data-path="Graphics.html"><a href="Graphics.html#recipe-id259"><i class="fa fa-check"></i><b>10.2</b> Adding a Title and Labels</a></li>
<li class="chapter" data-level="10.3" data-path="Graphics.html"><a href="Graphics.html#recipe-id261"><i class="fa fa-check"></i><b>10.3</b> Adding (or Removing) a Grid</a></li>
<li class="chapter" data-level="10.4" data-path="Graphics.html"><a href="Graphics.html#recipe-theme"><i class="fa fa-check"></i><b>10.4</b> Applying a Theme to a ggplot Figure</a></li>
<li class="chapter" data-level="10.5" data-path="Graphics.html"><a href="Graphics.html#recipe-id262"><i class="fa fa-check"></i><b>10.5</b> Creating a Scatter Plot of Multiple Groups</a></li>
<li class="chapter" data-level="10.6" data-path="Graphics.html"><a href="Graphics.html#recipe-id260"><i class="fa fa-check"></i><b>10.6</b> Adding (or Removing) a Legend</a></li>
<li class="chapter" data-level="10.7" data-path="Graphics.html"><a href="Graphics.html#recipe-id217"><i class="fa fa-check"></i><b>10.7</b> Plotting the Regression Line of a Scatter Plot</a></li>
<li class="chapter" data-level="10.8" data-path="Graphics.html"><a href="Graphics.html#recipe-id184"><i class="fa fa-check"></i><b>10.8</b> Plotting All Variables Against All Other Variables</a></li>
<li class="chapter" data-level="10.9" data-path="Graphics.html"><a href="Graphics.html#recipe-id185"><i class="fa fa-check"></i><b>10.9</b> Creating One Scatter Plot for Each Group</a></li>
<li class="chapter" data-level="10.10" data-path="Graphics.html"><a href="Graphics.html#recipe-id175"><i class="fa fa-check"></i><b>10.10</b> Creating a Bar Chart</a></li>
<li class="chapter" data-level="10.11" data-path="Graphics.html"><a href="Graphics.html#recipe-id177"><i class="fa fa-check"></i><b>10.11</b> Adding Confidence Intervals to a Bar Chart</a></li>
<li class="chapter" data-level="10.12" data-path="Graphics.html"><a href="Graphics.html#recipe-id176"><i class="fa fa-check"></i><b>10.12</b> Coloring a Bar Chart</a></li>
<li class="chapter" data-level="10.13" data-path="Graphics.html"><a href="Graphics.html#recipe-id174"><i class="fa fa-check"></i><b>10.13</b> Plotting a Line from x and y Points</a></li>
<li class="chapter" data-level="10.14" data-path="Graphics.html"><a href="Graphics.html#recipe-id256"><i class="fa fa-check"></i><b>10.14</b> Changing the Type, Width, or Color of a Line</a></li>
<li class="chapter" data-level="10.15" data-path="Graphics.html"><a href="Graphics.html#recipe-id263"><i class="fa fa-check"></i><b>10.15</b> Plotting Multiple Datasets</a></li>
<li class="chapter" data-level="10.16" data-path="Graphics.html"><a href="Graphics.html#recipe-id186"><i class="fa fa-check"></i><b>10.16</b> Adding Vertical or Horizontal Lines</a></li>
<li class="chapter" data-level="10.17" data-path="Graphics.html"><a href="Graphics.html#recipe-id178"><i class="fa fa-check"></i><b>10.17</b> Creating a Boxplot</a></li>
<li class="chapter" data-level="10.18" data-path="Graphics.html"><a href="Graphics.html#recipe-id179"><i class="fa fa-check"></i><b>10.18</b> Creating One Boxplot for Each Factor Level</a></li>
<li class="chapter" data-level="10.19" data-path="Graphics.html"><a href="Graphics.html#recipe-id182"><i class="fa fa-check"></i><b>10.19</b> Creating a Histogram</a></li>
<li class="chapter" data-level="10.20" data-path="Graphics.html"><a href="Graphics.html#recipe-id183"><i class="fa fa-check"></i><b>10.20</b> Adding a Density Estimate to a Histogram</a></li>
<li class="chapter" data-level="10.21" data-path="Graphics.html"><a href="Graphics.html#recipe-id180"><i class="fa fa-check"></i><b>10.21</b> Creating a Normal Quantile–Quantile Plot</a></li>
<li class="chapter" data-level="10.22" data-path="Graphics.html"><a href="Graphics.html#recipe-id181"><i class="fa fa-check"></i><b>10.22</b> Creating Other Quantile–Quantile Plots</a></li>
<li class="chapter" data-level="10.23" data-path="Graphics.html"><a href="Graphics.html#recipe-id191"><i class="fa fa-check"></i><b>10.23</b> Plotting a Variable in Multiple Colors</a></li>
<li class="chapter" data-level="10.24" data-path="Graphics.html"><a href="Graphics.html#recipe-id192"><i class="fa fa-check"></i><b>10.24</b> Graphing a Function</a></li>
<li class="chapter" data-level="10.25" data-path="Graphics.html"><a href="Graphics.html#recipe-id190"><i class="fa fa-check"></i><b>10.25</b> Displaying Several Figures on One Page</a></li>
<li class="chapter" data-level="10.26" data-path="Graphics.html"><a href="Graphics.html#recipe-id188"><i class="fa fa-check"></i><b>10.26</b> Writing Your Plot to a File</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html"><i class="fa fa-check"></i><b>11</b> Linear Regression and ANOVA</a>
<ul>
<li class="chapter" data-level="" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#intro-LinearRegressionAndANOVA"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="11.1" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id203"><i class="fa fa-check"></i><b>11.1</b> Performing Simple Linear Regression</a></li>
<li class="chapter" data-level="11.2" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id204"><i class="fa fa-check"></i><b>11.2</b> Performing Multiple Linear Regression</a></li>
<li class="chapter" data-level="11.3" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id231"><i class="fa fa-check"></i><b>11.3</b> Getting Regression Statistics</a></li>
<li class="chapter" data-level="11.4" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id240"><i class="fa fa-check"></i><b>11.4</b> Understanding the Regression Summary</a></li>
<li class="chapter" data-level="11.5" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id205"><i class="fa fa-check"></i><b>11.5</b> Performing Linear Regression Without an Intercept</a></li>
<li class="chapter" data-level="11.6" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#title-highcor"><i class="fa fa-check"></i><b>11.6</b> Regressing Only Variables That Highly Correlate with Your Dependent Variable</a></li>
<li class="chapter" data-level="11.7" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id206"><i class="fa fa-check"></i><b>11.7</b> Performing Linear Regression with Interaction Terms</a></li>
<li class="chapter" data-level="11.8" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id236"><i class="fa fa-check"></i><b>11.8</b> Selecting the Best Regression Variables</a></li>
<li class="chapter" data-level="11.9" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id209"><i class="fa fa-check"></i><b>11.9</b> Regressing on a Subset of Your Data</a></li>
<li class="chapter" data-level="11.10" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id244"><i class="fa fa-check"></i><b>11.10</b> Using an Expression Inside a Regression Formula</a></li>
<li class="chapter" data-level="11.11" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id243"><i class="fa fa-check"></i><b>11.11</b> Regressing on a Polynomial</a></li>
<li class="chapter" data-level="11.12" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id208"><i class="fa fa-check"></i><b>11.12</b> Regressing on Transformed Data</a></li>
<li class="chapter" data-level="11.13" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id210"><i class="fa fa-check"></i><b>11.13</b> Finding the Best Power Transformation (Box–Cox Procedure)</a></li>
<li class="chapter" data-level="11.14" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id211"><i class="fa fa-check"></i><b>11.14</b> Forming Confidence Intervals for Regression Coefficients</a></li>
<li class="chapter" data-level="11.15" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id216"><i class="fa fa-check"></i><b>11.15</b> Plotting Regression Residuals</a></li>
<li class="chapter" data-level="11.16" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id212"><i class="fa fa-check"></i><b>11.16</b> Diagnosing a Linear Regression</a></li>
<li class="chapter" data-level="11.17" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id233"><i class="fa fa-check"></i><b>11.17</b> Identifying Influential Observations</a></li>
<li class="chapter" data-level="11.18" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id213"><i class="fa fa-check"></i><b>11.18</b> Testing Residuals for Autocorrelation (Durbin–Watson Test)</a></li>
<li class="chapter" data-level="11.19" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id214"><i class="fa fa-check"></i><b>11.19</b> Predicting New Values</a></li>
<li class="chapter" data-level="11.20" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id215"><i class="fa fa-check"></i><b>11.20</b> Forming Prediction Intervals</a></li>
<li class="chapter" data-level="11.21" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id218"><i class="fa fa-check"></i><b>11.21</b> Performing One-Way ANOVA</a></li>
<li class="chapter" data-level="11.22" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id221"><i class="fa fa-check"></i><b>11.22</b> Creating an Interaction Plot</a></li>
<li class="chapter" data-level="11.23" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id220"><i class="fa fa-check"></i><b>11.23</b> Finding Differences Between Means of Groups</a></li>
<li class="chapter" data-level="11.24" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id228"><i class="fa fa-check"></i><b>11.24</b> Performing Robust ANOVA (Kruskal–Wallis Test)</a></li>
<li class="chapter" data-level="11.25" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id232"><i class="fa fa-check"></i><b>11.25</b> Comparing Models by Using ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="UsefulTricks.html"><a href="UsefulTricks.html"><i class="fa fa-check"></i><b>12</b> Useful Tricks</a>
<ul>
<li class="chapter" data-level="" data-path="UsefulTricks.html"><a href="UsefulTricks.html#intro-UsefulTricks"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="12.1" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id278"><i class="fa fa-check"></i><b>12.1</b> Peeking at Your Data</a></li>
<li class="chapter" data-level="12.2" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id271"><i class="fa fa-check"></i><b>12.2</b> Printing the Result of an Assignment</a></li>
<li class="chapter" data-level="12.3" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id138"><i class="fa fa-check"></i><b>12.3</b> Summing Rows and Columns</a></li>
<li class="chapter" data-level="12.4" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id112"><i class="fa fa-check"></i><b>12.4</b> Printing Data in Columns</a></li>
<li class="chapter" data-level="12.5" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id137"><i class="fa fa-check"></i><b>12.5</b> Binning Your Data</a></li>
<li class="chapter" data-level="12.6" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id116"><i class="fa fa-check"></i><b>12.6</b> Finding the Position of a Particular Value</a></li>
<li class="chapter" data-level="12.7" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id103"><i class="fa fa-check"></i><b>12.7</b> Selecting Every nth Element of a Vector</a></li>
<li class="chapter" data-level="12.8" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id107"><i class="fa fa-check"></i><b>12.8</b> Finding Minimums or Maximums</a></li>
<li class="chapter" data-level="12.9" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id110"><i class="fa fa-check"></i><b>12.9</b> Generating All Combinations of Several Variables</a></li>
<li class="chapter" data-level="12.10" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id153"><i class="fa fa-check"></i><b>12.10</b> Flattening a Data Frame</a></li>
<li class="chapter" data-level="12.11" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id247"><i class="fa fa-check"></i><b>12.11</b> Sorting a Data Frame</a></li>
<li class="chapter" data-level="12.12" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id223"><i class="fa fa-check"></i><b>12.12</b> Stripping Attributes from a Variable</a></li>
<li class="chapter" data-level="12.13" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id202"><i class="fa fa-check"></i><b>12.13</b> Revealing the Structure of an Object</a></li>
<li class="chapter" data-level="12.14" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id224"><i class="fa fa-check"></i><b>12.14</b> Timing Your Code</a></li>
<li class="chapter" data-level="12.15" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id113"><i class="fa fa-check"></i><b>12.15</b> Suppressing Warnings and Error Messages</a></li>
<li class="chapter" data-level="12.16" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id118"><i class="fa fa-check"></i><b>12.16</b> Taking Function Arguments from a List</a></li>
<li class="chapter" data-level="12.17" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id114"><i class="fa fa-check"></i><b>12.17</b> Defining Your Own Binary Operators</a></li>
<li class="chapter" data-level="12.18" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id111"><i class="fa fa-check"></i><b>12.18</b> Suppressing the Startup Message</a></li>
<li class="chapter" data-level="12.19" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id106"><i class="fa fa-check"></i><b>12.19</b> Getting and Setting Environment Variables</a></li>
<li class="chapter" data-level="12.20" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-codesections"><i class="fa fa-check"></i><b>12.20</b> Use Code Sections</a></li>
<li class="chapter" data-level="12.21" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-parallel_local"><i class="fa fa-check"></i><b>12.21</b> Executing R in Parallel Locally</a></li>
<li class="chapter" data-level="12.22" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-parallel_remote"><i class="fa fa-check"></i><b>12.22</b> Executing R in Parallel Remotely</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="BeyondBasics.html"><a href="BeyondBasics.html"><i class="fa fa-check"></i><b>13</b> Beyond Basic Numerics and Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="BeyondBasics.html"><a href="BeyondBasics.html#intro-BeyondBasics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="13.1" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id234"><i class="fa fa-check"></i><b>13.1</b> Minimizing or Maximizing a Single-Parameter Function</a></li>
<li class="chapter" data-level="13.2" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id235"><i class="fa fa-check"></i><b>13.2</b> Minimizing or Maximizing a Multiparameter Function</a></li>
<li class="chapter" data-level="13.3" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id140"><i class="fa fa-check"></i><b>13.3</b> Calculating Eigenvalues and Eigenvectors</a></li>
<li class="chapter" data-level="13.4" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id162"><i class="fa fa-check"></i><b>13.4</b> Performing Principal Component Analysis</a></li>
<li class="chapter" data-level="13.5" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id264"><i class="fa fa-check"></i><b>13.5</b> Performing Simple Orthogonal Regression</a></li>
<li class="chapter" data-level="13.6" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id160"><i class="fa fa-check"></i><b>13.6</b> Finding Clusters in Your Data</a></li>
<li class="chapter" data-level="13.7" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id161"><i class="fa fa-check"></i><b>13.7</b> Predicting a Binary-Valued Variable (Logistic Regression)</a></li>
<li class="chapter" data-level="13.8" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id159"><i class="fa fa-check"></i><b>13.8</b> Bootstrapping a Statistic</a></li>
<li class="chapter" data-level="13.9" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id193"><i class="fa fa-check"></i><b>13.9</b> Factor Analysis</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html"><i class="fa fa-check"></i><b>14</b> Time Series Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="14.1" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id076"><i class="fa fa-check"></i><b>14.1</b> Representing Time Series Data</a></li>
<li class="chapter" data-level="14.2" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id089"><i class="fa fa-check"></i><b>14.2</b> Plotting Time Series Data</a></li>
<li class="chapter" data-level="14.3" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id077"><i class="fa fa-check"></i><b>14.3</b> Extracting the Oldest or Newest Observations</a></li>
<li class="chapter" data-level="14.4" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id281"><i class="fa fa-check"></i><b>14.4</b> Subsetting a Time Series</a></li>
<li class="chapter" data-level="14.5" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id079"><i class="fa fa-check"></i><b>14.5</b> Merging Several Time Series</a></li>
<li class="chapter" data-level="14.6" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id239"><i class="fa fa-check"></i><b>14.6</b> Filling or Padding a Time Series</a></li>
<li class="chapter" data-level="14.7" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id280"><i class="fa fa-check"></i><b>14.7</b> Lagging a Time Series</a></li>
<li class="chapter" data-level="14.8" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id141"><i class="fa fa-check"></i><b>14.8</b> Computing Successive Differences</a></li>
<li class="chapter" data-level="14.9" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id080"><i class="fa fa-check"></i><b>14.9</b> Performing Calculations on Time Series</a></li>
<li class="chapter" data-level="14.10" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id279"><i class="fa fa-check"></i><b>14.10</b> Computing a Moving Average</a></li>
<li class="chapter" data-level="14.11" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id282"><i class="fa fa-check"></i><b>14.11</b> Applying a Function by Calendar Period</a></li>
<li class="chapter" data-level="14.12" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id081"><i class="fa fa-check"></i><b>14.12</b> Applying a Rolling Function</a></li>
<li class="chapter" data-level="14.13" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id082"><i class="fa fa-check"></i><b>14.13</b> Plotting the Autocorrelation Function</a></li>
<li class="chapter" data-level="14.14" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id104"><i class="fa fa-check"></i><b>14.14</b> Testing a Time Series for Autocorrelation</a></li>
<li class="chapter" data-level="14.15" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id083"><i class="fa fa-check"></i><b>14.15</b> Plotting the Partial Autocorrelation Function</a></li>
<li class="chapter" data-level="14.16" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id084"><i class="fa fa-check"></i><b>14.16</b> Finding Lagged Correlations Between Two Time Series</a></li>
<li class="chapter" data-level="14.17" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id088"><i class="fa fa-check"></i><b>14.17</b> Detrending a Time Series</a></li>
<li class="chapter" data-level="14.18" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id085"><i class="fa fa-check"></i><b>14.18</b> Fitting an ARIMA Model</a></li>
<li class="chapter" data-level="14.19" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id237"><i class="fa fa-check"></i><b>14.19</b> Removing Insignificant ARIMA Coefficients</a></li>
<li class="chapter" data-level="14.20" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id238"><i class="fa fa-check"></i><b>14.20</b> Running Diagnostics on an ARIMA Model</a></li>
<li class="chapter" data-level="14.21" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id086"><i class="fa fa-check"></i><b>14.21</b> Making Forecasts from an ARIMA Model</a></li>
<li class="chapter" data-level="14.22" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-plotting_forecast"><i class="fa fa-check"></i><b>14.22</b> Plotting a Forecast</a></li>
<li class="chapter" data-level="14.23" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id087"><i class="fa fa-check"></i><b>14.23</b> Testing for Mean Reversion</a></li>
<li class="chapter" data-level="14.24" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id195"><i class="fa fa-check"></i><b>14.24</b> Smoothing a Time Series</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html"><i class="fa fa-check"></i><b>15</b> Simple Programming</a>
<ul>
<li class="chapter" data-level="" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#intro-SimpleProgramming"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="15.1" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-creating_if_logic"><i class="fa fa-check"></i><b>15.1</b> Choosing Between Two Alternatives: if-else</a></li>
<li class="chapter" data-level="15.2" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-for_loop"><i class="fa fa-check"></i><b>15.2</b> Iterating with a Loop</a></li>
<li class="chapter" data-level="15.3" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-id117"><i class="fa fa-check"></i><b>15.3</b> Defining a Function</a></li>
<li class="chapter" data-level="15.4" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-variable"><i class="fa fa-check"></i><b>15.4</b> Creating a Local Variable</a></li>
<li class="chapter" data-level="15.5" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#choosing-between-multiple-alternatives-switch"><i class="fa fa-check"></i><b>15.5</b> Choosing Between Multiple Alternatives: switch</a></li>
<li class="chapter" data-level="15.6" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-title"><i class="fa fa-check"></i><b>15.6</b> Defining Defaults for Function Parameters</a></li>
<li class="chapter" data-level="15.7" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#signaling-errors"><i class="fa fa-check"></i><b>15.7</b> Signaling Errors</a></li>
<li class="chapter" data-level="15.8" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#protecting-against-errors"><i class="fa fa-check"></i><b>15.8</b> Protecting Against Errors</a></li>
<li class="chapter" data-level="15.9" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-anon-function"><i class="fa fa-check"></i><b>15.9</b> Creating an Anonymous Function</a></li>
<li class="chapter" data-level="15.10" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#creating-a-collection-of-reusable-functions"><i class="fa fa-check"></i><b>15.10</b> Creating a Collection of Reusable Functions</a></li>
<li class="chapter" data-level="15.11" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-indent"><i class="fa fa-check"></i><b>15.11</b> Automatically Reindent Code</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="RMarkdown.html"><a href="RMarkdown.html"><i class="fa fa-check"></i><b>16</b> R Markdown and Publishing</a>
<ul>
<li class="chapter" data-level="" data-path="RMarkdown.html"><a href="RMarkdown.html#intro-Rmd_pub"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="16.1" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-new_doc"><i class="fa fa-check"></i><b>16.1</b> Creating a New Document</a></li>
<li class="chapter" data-level="16.2" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-metadata"><i class="fa fa-check"></i><b>16.2</b> Adding a Title, Author, or Date</a></li>
<li class="chapter" data-level="16.3" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-doc-text"><i class="fa fa-check"></i><b>16.3</b> Formatting Document Text</a></li>
<li class="chapter" data-level="16.4" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-headings"><i class="fa fa-check"></i><b>16.4</b> Inserting Document Headings</a></li>
<li class="chapter" data-level="16.5" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-list"><i class="fa fa-check"></i><b>16.5</b> Inserting a List</a></li>
<li class="chapter" data-level="16.6" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-exec_r"><i class="fa fa-check"></i><b>16.6</b> Showing Output from R Code</a></li>
<li class="chapter" data-level="16.7" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-code-results"><i class="fa fa-check"></i><b>16.7</b> Controlling Which Code and Results Are Shown</a></li>
<li class="chapter" data-level="16.8" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-doc_plot"><i class="fa fa-check"></i><b>16.8</b> Inserting a Plot</a></li>
<li class="chapter" data-level="16.9" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-static-table"><i class="fa fa-check"></i><b>16.9</b> Inserting a Table</a></li>
<li class="chapter" data-level="16.10" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-tables"><i class="fa fa-check"></i><b>16.10</b> Inserting a Table of Data</a></li>
<li class="chapter" data-level="16.11" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-equations"><i class="fa fa-check"></i><b>16.11</b> Inserting Math Equations</a></li>
<li class="chapter" data-level="16.12" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-html"><i class="fa fa-check"></i><b>16.12</b> Generating HTML Output</a></li>
<li class="chapter" data-level="16.13" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-pdf"><i class="fa fa-check"></i><b>16.13</b> Generating PDF Output</a></li>
<li class="chapter" data-level="16.14" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-word"><i class="fa fa-check"></i><b>16.14</b> Generating Microsoft Word Output</a></li>
<li class="chapter" data-level="16.15" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-prez"><i class="fa fa-check"></i><b>16.15</b> Generating Presentation Output</a></li>
<li class="chapter" data-level="16.16" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-param_report"><i class="fa fa-check"></i><b>16.16</b> Creating a Parameterized Report</a></li>
<li class="chapter" data-level="16.17" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-rmd_org"><i class="fa fa-check"></i><b>16.17</b> Organizing Your R Markdown Workflow</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Cookbook, 2nd Edition</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="InputAndOutput" class="section level1 hasAnchor" number="4">
<h1><span class="header-section-number">4</span> Input and Output<a href="InputAndOutput.html#InputAndOutput" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="intro-InputAndOutput" class="section level2 unnumbered hasAnchor">
<h2>Introduction<a href="InputAndOutput.html#intro-InputAndOutput" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All statistical work begins with data, and most data is stuck inside
files and databases. Dealing with input is probably the first step of
implementing any significant statistical project.</p>
<p>All statistical work ends with reporting numbers back to a client, even
if you are the client. Formatting and producing output is probably the
climax of your project.</p>
<p>Casual R users can solve their input problems by using basic <code>readr</code> package functions
such as <code>read_csv</code> to read CSV files and <code>read_delim</code> to read more
complicated, tabular data. They can use <code>print</code>, <code>cat</code>, and <code>format</code> to
produce simple reports.</p>
<p>Users with heavy-duty input/output (I/O) needs are strongly encouraged
to read the R Data Import/Export guide, <a href="http://cran.r-project.org/doc/manuals/R-data.pdf">available on CRAN</a>. This manual
includes important information on reading data from sources such as
spreadsheets, binary files, other statistical systems, and relational
databases.</p>
</div>
<div id="recipe-id035" class="section level2 hasAnchor" number="4.1">
<h2><span class="header-section-number">4.1</span> Entering Data from the Keyboard<a href="InputAndOutput.html#recipe-id035" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id035" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id035" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have a small amount of data, too small to justify the overhead of
creating an input file. You just want to enter the data directly into
your workspace.</p>
</div>
<div id="solution-id035" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id035" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For very small datasets, enter the data as literals using the <code>c</code>
constructor for vectors:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="InputAndOutput.html#cb171-1" tabindex="-1"></a>scores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">61</span>, <span class="dv">66</span>, <span class="dv">90</span>, <span class="dv">88</span>, <span class="dv">100</span>)</span></code></pre></div>
</div>
<div id="discussion-id035" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id035" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working on a simple problem, you may not want the hassle of creating
and then reading a data file outside of R. You may just want to enter the data into R.
The easiest way to do so is by using the <code>c</code> constructor for vectors, as shown
in the Solution.</p>
<p>You can use this approach for data frames, too, by entering each variable
(column) as a vector:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="InputAndOutput.html#cb172-1" tabindex="-1"></a>points <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb172-2"><a href="InputAndOutput.html#cb172-2" tabindex="-1"></a>  <span class="at">label =</span> <span class="fu">c</span>(<span class="st">&quot;Low&quot;</span>, <span class="st">&quot;Mid&quot;</span>, <span class="st">&quot;High&quot;</span>),</span>
<span id="cb172-3"><a href="InputAndOutput.html#cb172-3" tabindex="-1"></a>  <span class="at">lbound =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.67</span>,   <span class="fl">1.64</span>),</span>
<span id="cb172-4"><a href="InputAndOutput.html#cb172-4" tabindex="-1"></a>  <span class="at">ubound =</span> <span class="fu">c</span>(<span class="fl">0.67</span>, <span class="fl">1.64</span>,   <span class="fl">2.33</span>)</span>
<span id="cb172-5"><a href="InputAndOutput.html#cb172-5" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="see_also-id035" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id035" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For cutting and pasting data from another application into R, be sure to look at <a href="https://github.com/MilesMcBain/datapasta"><code>datapasta</code></a>, a package that provides RStudio add-ins that make pasting data into your scripts easier.</p>
</div>
</div>
<div id="recipe-id036" class="section level2 hasAnchor" number="4.2">
<h2><span class="header-section-number">4.2</span> Printing Fewer Digits (or More Digits)<a href="InputAndOutput.html#recipe-id036" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id036" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id036" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your output contains too many digits or too few digits. You want to
print fewer or more.</p>
</div>
<div id="solution-id036" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id036" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For <code>print</code>, the <code>digits</code> parameter can control the number of printed
digits.</p>
<p>For <code>cat</code>, use the <code>format</code> function (which also has a <code>digits</code>
parameter) to alter the formatting of numbers.</p>
</div>
<div id="discussion-id036" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id036" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R normally formats floating-point output to have seven digits. This works well most of the time but can become annoying when you have
lots of numbers to print in a small space. It gets downright misleading
when there are only a few significant digits in your numbers and R still
prints seven.</p>
<p>The <code>print</code> function lets you vary the number of printed digits using
the <code>digits</code> parameter:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb173-1"><a href="InputAndOutput.html#cb173-1" tabindex="-1"></a><span class="fu">print</span>(pi, <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb173-2"><a href="InputAndOutput.html#cb173-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.142</span></span>
<span id="cb173-3"><a href="InputAndOutput.html#cb173-3" tabindex="-1"></a><span class="fu">print</span>(<span class="dv">100</span> <span class="sc">*</span> pi, <span class="at">digits =</span> <span class="dv">4</span>)</span>
<span id="cb173-4"><a href="InputAndOutput.html#cb173-4" tabindex="-1"></a><span class="co">#&gt; [1] 314.2</span></span></code></pre></div>
<p>The <code>cat</code> function does not give you direct control over formatting.
Instead, use the <code>format</code> function to format your numbers before calling
<code>cat</code>:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="InputAndOutput.html#cb174-1" tabindex="-1"></a><span class="fu">cat</span>(pi, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb174-2"><a href="InputAndOutput.html#cb174-2" tabindex="-1"></a><span class="co">#&gt; 3.14</span></span>
<span id="cb174-3"><a href="InputAndOutput.html#cb174-3" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">format</span>(pi, <span class="at">digits =</span> <span class="dv">4</span>), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb174-4"><a href="InputAndOutput.html#cb174-4" tabindex="-1"></a><span class="co">#&gt; 3.142</span></span></code></pre></div>
<p>This is R, so both <code>print</code> and <code>format</code> will format entire vectors at
once:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="InputAndOutput.html#cb175-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">pnorm</span>(<span class="sc">-</span><span class="dv">3</span><span class="sc">:</span><span class="dv">3</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb175-2"><a href="InputAndOutput.html#cb175-2" tabindex="-1"></a><span class="co">#&gt; [1] 0.0013 0.0228 0.1587 0.5000 0.8413 0.9772 0.9987</span></span>
<span id="cb175-3"><a href="InputAndOutput.html#cb175-3" tabindex="-1"></a><span class="fu">format</span>(<span class="fu">pnorm</span>(<span class="sc">-</span><span class="dv">3</span><span class="sc">:</span><span class="dv">3</span>), <span class="at">digits =</span> <span class="dv">2</span>)</span>
<span id="cb175-4"><a href="InputAndOutput.html#cb175-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;0.0013&quot; &quot;0.0228&quot; &quot;0.1587&quot; &quot;0.5000&quot; &quot;0.8413&quot; &quot;0.9772&quot; &quot;0.9987&quot;</span></span></code></pre></div>
<p>Notice that both <code>print</code> and <code>format</code> format the vector elements consistently, finding
the number of significant digits necessary to format the smallest number and then
formatting all numbers to have the same width (though not necessarily
the same number of digits). This is extremely useful for formating an
entire table:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="InputAndOutput.html#cb176-1" tabindex="-1"></a>q <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">0</span>, <span class="at">to =</span> <span class="dv">3</span>, <span class="at">by =</span> <span class="fl">0.5</span>)</span>
<span id="cb176-2"><a href="InputAndOutput.html#cb176-2" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Quant =</span> q,</span>
<span id="cb176-3"><a href="InputAndOutput.html#cb176-3" tabindex="-1"></a>                  <span class="at">Lower =</span> <span class="fu">pnorm</span>(<span class="sc">-</span>q),</span>
<span id="cb176-4"><a href="InputAndOutput.html#cb176-4" tabindex="-1"></a>                  <span class="at">Upper =</span> <span class="fu">pnorm</span>(q))</span>
<span id="cb176-5"><a href="InputAndOutput.html#cb176-5" tabindex="-1"></a>tbl                                <span class="co"># Unformatted print</span></span>
<span id="cb176-6"><a href="InputAndOutput.html#cb176-6" tabindex="-1"></a><span class="co">#&gt;   Quant   Lower Upper</span></span>
<span id="cb176-7"><a href="InputAndOutput.html#cb176-7" tabindex="-1"></a><span class="co">#&gt; 1   0.0 0.50000 0.500</span></span>
<span id="cb176-8"><a href="InputAndOutput.html#cb176-8" tabindex="-1"></a><span class="co">#&gt; 2   0.5 0.30854 0.691</span></span>
<span id="cb176-9"><a href="InputAndOutput.html#cb176-9" tabindex="-1"></a><span class="co">#&gt; 3   1.0 0.15866 0.841</span></span>
<span id="cb176-10"><a href="InputAndOutput.html#cb176-10" tabindex="-1"></a><span class="co">#&gt; 4   1.5 0.06681 0.933</span></span>
<span id="cb176-11"><a href="InputAndOutput.html#cb176-11" tabindex="-1"></a><span class="co">#&gt; 5   2.0 0.02275 0.977</span></span>
<span id="cb176-12"><a href="InputAndOutput.html#cb176-12" tabindex="-1"></a><span class="co">#&gt; 6   2.5 0.00621 0.994</span></span>
<span id="cb176-13"><a href="InputAndOutput.html#cb176-13" tabindex="-1"></a><span class="co">#&gt; 7   3.0 0.00135 0.999</span></span>
<span id="cb176-14"><a href="InputAndOutput.html#cb176-14" tabindex="-1"></a><span class="fu">print</span>(tbl, <span class="at">digits =</span> <span class="dv">2</span>)             <span class="co"># Formatted print: fewer digits</span></span>
<span id="cb176-15"><a href="InputAndOutput.html#cb176-15" tabindex="-1"></a><span class="co">#&gt;   Quant  Lower Upper</span></span>
<span id="cb176-16"><a href="InputAndOutput.html#cb176-16" tabindex="-1"></a><span class="co">#&gt; 1   0.0 0.5000  0.50</span></span>
<span id="cb176-17"><a href="InputAndOutput.html#cb176-17" tabindex="-1"></a><span class="co">#&gt; 2   0.5 0.3085  0.69</span></span>
<span id="cb176-18"><a href="InputAndOutput.html#cb176-18" tabindex="-1"></a><span class="co">#&gt; 3   1.0 0.1587  0.84</span></span>
<span id="cb176-19"><a href="InputAndOutput.html#cb176-19" tabindex="-1"></a><span class="co">#&gt; 4   1.5 0.0668  0.93</span></span>
<span id="cb176-20"><a href="InputAndOutput.html#cb176-20" tabindex="-1"></a><span class="co">#&gt; 5   2.0 0.0228  0.98</span></span>
<span id="cb176-21"><a href="InputAndOutput.html#cb176-21" tabindex="-1"></a><span class="co">#&gt; 6   2.5 0.0062  0.99</span></span>
<span id="cb176-22"><a href="InputAndOutput.html#cb176-22" tabindex="-1"></a><span class="co">#&gt; 7   3.0 0.0013  1.00</span></span></code></pre></div>
<p>As you can see, when an entire vector or column is formatted, each element in the vector or column is formatted the same way.</p>
<p>You can also alter the format of <em>all</em> output by using the <code>options</code>
function to change the default for <code>digits</code>:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="InputAndOutput.html#cb177-1" tabindex="-1"></a>pi</span>
<span id="cb177-2"><a href="InputAndOutput.html#cb177-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span>
<span id="cb177-3"><a href="InputAndOutput.html#cb177-3" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits =</span> <span class="dv">15</span>)</span>
<span id="cb177-4"><a href="InputAndOutput.html#cb177-4" tabindex="-1"></a>pi</span>
<span id="cb177-5"><a href="InputAndOutput.html#cb177-5" tabindex="-1"></a><span class="co">#&gt; [1] 3.14159265358979</span></span></code></pre></div>
<p>But this is a poor choice in our experience, since it also alters the
output from R’s built-in functions, and that alteration will likely be
unpleasant.</p>
</div>
<div id="see_also-id036" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id036" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Other functions for formatting numbers include <code>sprintf</code> and <code>formatC</code>;
see their help pages for details.</p>
</div>
</div>
<div id="recipe-id034" class="section level2 hasAnchor" number="4.3">
<h2><span class="header-section-number">4.3</span> Redirecting Output to a File<a href="InputAndOutput.html#recipe-id034" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id034" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id034" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to redirect the output from R into a file instead of your
console.</p>
</div>
<div id="solution-id034" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id034" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can redirect the output of the <code>cat</code> function by using its <code>file</code>
argument:</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="InputAndOutput.html#cb178-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;The answer is&quot;</span>, answer, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>, <span class="at">file =</span> <span class="st">&quot;filename.txt&quot;</span>)</span></code></pre></div>
<p>Use the <code>sink</code> function to redirect <em>all</em> output from both <code>print</code> and
<code>cat</code>. Call <code>sink</code> with a <code>*filename*</code> argument to begin redirecting console
output to that file. When you are done, use <code>sink</code> with no argument to
close the file and resume output to the console:</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="InputAndOutput.html#cb179-1" tabindex="-1"></a><span class="fu">sink</span>(<span class="st">&quot;filename&quot;</span>)          <span class="co"># Begin writing output to file</span></span>
<span id="cb179-2"><a href="InputAndOutput.html#cb179-2" tabindex="-1"></a></span>
<span id="cb179-3"><a href="InputAndOutput.html#cb179-3" tabindex="-1"></a><span class="co"># ... other session work ...</span></span>
<span id="cb179-4"><a href="InputAndOutput.html#cb179-4" tabindex="-1"></a></span>
<span id="cb179-5"><a href="InputAndOutput.html#cb179-5" tabindex="-1"></a><span class="fu">sink</span>()                    <span class="co"># Resume writing output to console</span></span></code></pre></div>
</div>
<div id="discussion-id034" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id034" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>print</code> and <code>cat</code> functions normally write their output to your
console. The <code>cat</code> function writes to a file if you supply a <code>file</code>
argument, which can be either a filename or a connection. The <code>print</code>
function cannot redirect its output, but the <code>sink</code> function can force all
output to a file. A common use for <code>sink</code> is to capture the output of an R
script:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="InputAndOutput.html#cb180-1" tabindex="-1"></a><span class="fu">sink</span>(<span class="st">&quot;script_output.txt&quot;</span>)   <span class="co"># Redirect output to file</span></span>
<span id="cb180-2"><a href="InputAndOutput.html#cb180-2" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;script.R&quot;</span>)          <span class="co"># Run the script, capturing its output</span></span>
<span id="cb180-3"><a href="InputAndOutput.html#cb180-3" tabindex="-1"></a><span class="fu">sink</span>()                      <span class="co"># Resume writing output to console</span></span></code></pre></div>
<p>If you are repeatedly <code>cat</code>ing items to one file, be sure to set
<code>append=TRUE</code>. Otherwise, each call to <code>cat</code> will simply overwrite the
file’s contents:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="InputAndOutput.html#cb181-1" tabindex="-1"></a><span class="fu">cat</span>(data, <span class="at">file =</span> <span class="st">&quot;analysisReport.out&quot;</span>)</span>
<span id="cb181-2"><a href="InputAndOutput.html#cb181-2" tabindex="-1"></a><span class="fu">cat</span>(results, <span class="at">file =</span> <span class="st">&quot;analysisRepart.out&quot;</span>, <span class="at">append =</span> <span class="cn">TRUE</span>)</span>
<span id="cb181-3"><a href="InputAndOutput.html#cb181-3" tabindex="-1"></a><span class="fu">cat</span>(conclusion, <span class="at">file =</span> <span class="st">&quot;analysisReport.out&quot;</span>, <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Hardcoding filenames like this is a tedious and error-prone process.
Did you notice that the filename is misspelled in the second line?
Instead of hardcoding the filename repeatedly, we suggest opening a
connection to the file and writing your output to the connection:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="InputAndOutput.html#cb182-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">file</span>(<span class="st">&quot;analysisReport.out&quot;</span>, <span class="st">&quot;w&quot;</span>)</span>
<span id="cb182-2"><a href="InputAndOutput.html#cb182-2" tabindex="-1"></a><span class="fu">cat</span>(data, <span class="at">file =</span> con)</span>
<span id="cb182-3"><a href="InputAndOutput.html#cb182-3" tabindex="-1"></a><span class="fu">cat</span>(results, <span class="at">file =</span> con)</span>
<span id="cb182-4"><a href="InputAndOutput.html#cb182-4" tabindex="-1"></a><span class="fu">cat</span>(conclusion, <span class="at">file =</span> con)</span>
<span id="cb182-5"><a href="InputAndOutput.html#cb182-5" tabindex="-1"></a><span class="fu">close</span>(con)</span></code></pre></div>
<p>(You don’t need <code>append=TRUE</code> when writing to a connection because <code>append</code> is the default with connections.) This technique is especially valuable inside R scripts because
it makes your code more reliable and more maintainable.</p>
</div>
</div>
<div id="recipe-id030" class="section level2 hasAnchor" number="4.4">
<h2><span class="header-section-number">4.4</span> Listing Files<a href="InputAndOutput.html#recipe-id030" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id030" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id030" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want an R vector that is a listing of the files in your working directory.</p>
</div>
<div id="solution-id030" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id030" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>list.files</code> function shows the contents of your working directory:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="InputAndOutput.html#cb183-1" tabindex="-1"></a><span class="fu">list.files</span>()</span>
<span id="cb183-2"><a href="InputAndOutput.html#cb183-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;_book&quot;                           &quot;_bookdown_files&quot;                </span></span>
<span id="cb183-3"><a href="InputAndOutput.html#cb183-3" tabindex="-1"></a><span class="co">#&gt;  [3] &quot;_bookdown.yml&quot;                   &quot;_common.R&quot;                      </span></span>
<span id="cb183-4"><a href="InputAndOutput.html#cb183-4" tabindex="-1"></a><span class="co">#&gt;  [5] &quot;_main.log&quot;                       &quot;_main.rds&quot;                      </span></span>
<span id="cb183-5"><a href="InputAndOutput.html#cb183-5" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;_output.yml&quot;                     &quot;01_GettingStarted.md&quot;           </span></span>
<span id="cb183-6"><a href="InputAndOutput.html#cb183-6" tabindex="-1"></a><span class="co">#&gt;  [9] &quot;01_GettingStarted.Rmd&quot;           &quot;02_SomeBasics_files&quot;            </span></span>
<span id="cb183-7"><a href="InputAndOutput.html#cb183-7" tabindex="-1"></a>etc ...</span></code></pre></div>
</div>
<div id="discussion-id030" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id030" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This function is terribly handy to grab the names of all files in a subdirectory. You can use it to refresh your memory of your filenames or, more likely, as input into another process, like importing data files.</p>
<p>You can pass <code>list.files</code> a path and a pattern to shows files in a specific path and matching a specific regular expression pattern.</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="InputAndOutput.html#cb184-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&#39;data/&#39;</span>) <span class="co"># show files in a directory</span></span>
<span id="cb184-2"><a href="InputAndOutput.html#cb184-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;ac.rdata&quot;               &quot;adf.rdata&quot;              &quot;anova.rdata&quot;           </span></span>
<span id="cb184-3"><a href="InputAndOutput.html#cb184-3" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;anova2.rdata&quot;           &quot;bad.rdata&quot;              &quot;batches.rdata&quot;         </span></span>
<span id="cb184-4"><a href="InputAndOutput.html#cb184-4" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;bnd_cmty.Rdata&quot;         &quot;compositePerf-2010.csv&quot; &quot;conf.rdata&quot;            </span></span>
<span id="cb184-5"><a href="InputAndOutput.html#cb184-5" tabindex="-1"></a><span class="co">#&gt; [10] &quot;daily.prod.rdata&quot;       &quot;data1.csv&quot;              &quot;data2.csv&quot;             </span></span>
<span id="cb184-6"><a href="InputAndOutput.html#cb184-6" tabindex="-1"></a><span class="co">#&gt; [13] &quot;datafile_missing.tsv&quot;   &quot;datafile.csv&quot;           &quot;datafile.fwf&quot;          </span></span>
<span id="cb184-7"><a href="InputAndOutput.html#cb184-7" tabindex="-1"></a><span class="co">#&gt; [16] &quot;datafile.qsv&quot;           &quot;datafile.ssv&quot;           &quot;datafile.tsv&quot;          </span></span>
<span id="cb184-8"><a href="InputAndOutput.html#cb184-8" tabindex="-1"></a><span class="co">#&gt; [19] &quot;datafile1.ssv&quot;          &quot;df_decay.rdata&quot;         &quot;df_squared.rdata&quot;      </span></span>
<span id="cb184-9"><a href="InputAndOutput.html#cb184-9" tabindex="-1"></a><span class="co">#&gt; [22] &quot;diffs.rdata&quot;            &quot;example1_headless.csv&quot;  &quot;example1.csv&quot;          </span></span>
<span id="cb184-10"><a href="InputAndOutput.html#cb184-10" tabindex="-1"></a><span class="co">#&gt; [25] &quot;excel_table_data.xlsx&quot;  &quot;get_USDA_NASS_data.R&quot;   &quot;ibm.rdata&quot;             </span></span>
<span id="cb184-11"><a href="InputAndOutput.html#cb184-11" tabindex="-1"></a><span class="co">#&gt; [28] &quot;iris_excel.xlsx&quot;        &quot;lab_df.rdata&quot;           &quot;movies.sas7bdat&quot;       </span></span>
<span id="cb184-12"><a href="InputAndOutput.html#cb184-12" tabindex="-1"></a><span class="co">#&gt; [31] &quot;nacho_data.csv&quot;         &quot;NearestPoint.R&quot;         &quot;not_a_csv.txt&quot;         </span></span>
<span id="cb184-13"><a href="InputAndOutput.html#cb184-13" tabindex="-1"></a><span class="co">#&gt; [34] &quot;opt.rdata&quot;              &quot;outcome.rdata&quot;          &quot;pca.rdata&quot;             </span></span>
<span id="cb184-14"><a href="InputAndOutput.html#cb184-14" tabindex="-1"></a><span class="co">#&gt; [37] &quot;pred.rdata&quot;             &quot;pred2.rdata&quot;            &quot;sat.rdata&quot;             </span></span>
<span id="cb184-15"><a href="InputAndOutput.html#cb184-15" tabindex="-1"></a><span class="co">#&gt; [40] &quot;singles.txt&quot;            &quot;state_corn_yield.rds&quot;   &quot;student_data.rdata&quot;    </span></span>
<span id="cb184-16"><a href="InputAndOutput.html#cb184-16" tabindex="-1"></a><span class="co">#&gt; [43] &quot;suburbs.txt&quot;            &quot;tab1.csv&quot;               &quot;tls.rdata&quot;             </span></span>
<span id="cb184-17"><a href="InputAndOutput.html#cb184-17" tabindex="-1"></a><span class="co">#&gt; [46] &quot;triples.txt&quot;            &quot;ts_acf.rdata&quot;           &quot;workers.rdata&quot;         </span></span>
<span id="cb184-18"><a href="InputAndOutput.html#cb184-18" tabindex="-1"></a><span class="co">#&gt; [49] &quot;world_series.csv&quot;       &quot;xy.rdata&quot;               &quot;yield.Rdata&quot;           </span></span>
<span id="cb184-19"><a href="InputAndOutput.html#cb184-19" tabindex="-1"></a><span class="co">#&gt; [52] &quot;z.RData&quot;</span></span>
<span id="cb184-20"><a href="InputAndOutput.html#cb184-20" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&#39;data/&#39;</span>, <span class="at">pattern =</span> <span class="st">&#39;</span><span class="sc">\\</span><span class="st">.csv&#39;</span>)</span>
<span id="cb184-21"><a href="InputAndOutput.html#cb184-21" tabindex="-1"></a><span class="co">#&gt; [1] &quot;compositePerf-2010.csv&quot; &quot;data1.csv&quot;              &quot;data2.csv&quot;             </span></span>
<span id="cb184-22"><a href="InputAndOutput.html#cb184-22" tabindex="-1"></a><span class="co">#&gt; [4] &quot;datafile.csv&quot;           &quot;example1_headless.csv&quot;  &quot;example1.csv&quot;          </span></span>
<span id="cb184-23"><a href="InputAndOutput.html#cb184-23" tabindex="-1"></a><span class="co">#&gt; [7] &quot;nacho_data.csv&quot;         &quot;tab1.csv&quot;               &quot;world_series.csv&quot;</span></span></code></pre></div>
<p>To see all the files in your subdirectories, too, use:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="InputAndOutput.html#cb185-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">recursive =</span> T)</span></code></pre></div>
<p>A possible “gotcha” of <code>list.files</code> is that it ignores hidden
files—typically, any file whose name begins with a period. If you don’t
see the file you expected to see, try setting <code>all.files=TRUE</code>:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="InputAndOutput.html#cb186-1" tabindex="-1"></a><span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&#39;data/&#39;</span>, <span class="at">all.files =</span> <span class="cn">TRUE</span>)</span>
<span id="cb186-2"><a href="InputAndOutput.html#cb186-2" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;.&quot;                      &quot;..&quot;                     &quot;.hidden_file.txt&quot;      </span></span>
<span id="cb186-3"><a href="InputAndOutput.html#cb186-3" tabindex="-1"></a><span class="co">#&gt;  [4] &quot;ac.rdata&quot;               &quot;adf.rdata&quot;              &quot;anova.rdata&quot;           </span></span>
<span id="cb186-4"><a href="InputAndOutput.html#cb186-4" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;anova2.rdata&quot;           &quot;bad.rdata&quot;              &quot;batches.rdata&quot;         </span></span>
<span id="cb186-5"><a href="InputAndOutput.html#cb186-5" tabindex="-1"></a><span class="co">#&gt; [10] &quot;bnd_cmty.Rdata&quot;         &quot;compositePerf-2010.csv&quot; &quot;conf.rdata&quot;            </span></span>
<span id="cb186-6"><a href="InputAndOutput.html#cb186-6" tabindex="-1"></a><span class="co">#&gt; [13] &quot;daily.prod.rdata&quot;       &quot;data1.csv&quot;              &quot;data2.csv&quot;             </span></span>
<span id="cb186-7"><a href="InputAndOutput.html#cb186-7" tabindex="-1"></a><span class="co">#&gt; [16] &quot;datafile_missing.tsv&quot;   &quot;datafile.csv&quot;           &quot;datafile.fwf&quot;          </span></span>
<span id="cb186-8"><a href="InputAndOutput.html#cb186-8" tabindex="-1"></a><span class="co">#&gt; [19] &quot;datafile.qsv&quot;           &quot;datafile.ssv&quot;           &quot;datafile.tsv&quot;          </span></span>
<span id="cb186-9"><a href="InputAndOutput.html#cb186-9" tabindex="-1"></a><span class="co">#&gt; [22] &quot;datafile1.ssv&quot;          &quot;df_decay.rdata&quot;         &quot;df_squared.rdata&quot;      </span></span>
<span id="cb186-10"><a href="InputAndOutput.html#cb186-10" tabindex="-1"></a><span class="co">#&gt; [25] &quot;diffs.rdata&quot;            &quot;example1_headless.csv&quot;  &quot;example1.csv&quot;          </span></span>
<span id="cb186-11"><a href="InputAndOutput.html#cb186-11" tabindex="-1"></a><span class="co">#&gt; [28] &quot;excel_table_data.xlsx&quot;  &quot;get_USDA_NASS_data.R&quot;   &quot;ibm.rdata&quot;             </span></span>
<span id="cb186-12"><a href="InputAndOutput.html#cb186-12" tabindex="-1"></a><span class="co">#&gt; [31] &quot;iris_excel.xlsx&quot;        &quot;lab_df.rdata&quot;           &quot;movies.sas7bdat&quot;       </span></span>
<span id="cb186-13"><a href="InputAndOutput.html#cb186-13" tabindex="-1"></a><span class="co">#&gt; [34] &quot;nacho_data.csv&quot;         &quot;NearestPoint.R&quot;         &quot;not_a_csv.txt&quot;         </span></span>
<span id="cb186-14"><a href="InputAndOutput.html#cb186-14" tabindex="-1"></a><span class="co">#&gt; [37] &quot;opt.rdata&quot;              &quot;outcome.rdata&quot;          &quot;pca.rdata&quot;             </span></span>
<span id="cb186-15"><a href="InputAndOutput.html#cb186-15" tabindex="-1"></a><span class="co">#&gt; [40] &quot;pred.rdata&quot;             &quot;pred2.rdata&quot;            &quot;sat.rdata&quot;             </span></span>
<span id="cb186-16"><a href="InputAndOutput.html#cb186-16" tabindex="-1"></a><span class="co">#&gt; [43] &quot;singles.txt&quot;            &quot;state_corn_yield.rds&quot;   &quot;student_data.rdata&quot;    </span></span>
<span id="cb186-17"><a href="InputAndOutput.html#cb186-17" tabindex="-1"></a><span class="co">#&gt; [46] &quot;suburbs.txt&quot;            &quot;tab1.csv&quot;               &quot;tls.rdata&quot;             </span></span>
<span id="cb186-18"><a href="InputAndOutput.html#cb186-18" tabindex="-1"></a><span class="co">#&gt; [49] &quot;triples.txt&quot;            &quot;ts_acf.rdata&quot;           &quot;workers.rdata&quot;         </span></span>
<span id="cb186-19"><a href="InputAndOutput.html#cb186-19" tabindex="-1"></a><span class="co">#&gt; [52] &quot;world_series.csv&quot;       &quot;xy.rdata&quot;               &quot;yield.Rdata&quot;           </span></span>
<span id="cb186-20"><a href="InputAndOutput.html#cb186-20" tabindex="-1"></a><span class="co">#&gt; [55] &quot;z.RData&quot;</span></span></code></pre></div>
<p>If you just want to see which files are in a directory and not use the filenames in a procedure, the easiest way is to open the Files pane in the lower-right corner of RStudio. But keep in mind that the RStudio Files pane hides files that start with a period, as you can see in Figure <a href="InputAndOutput.html#fig:rstudio-files">4.1</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:rstudio-files"></span>
<img src="images_v2/rstudio.files2.png" alt="RStudio Files pane" width="85%" />
<p class="caption">
Figure 4.1: RStudio Files pane
</p>
</div>
</div>
<div id="see-also" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see-also" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R has other handy functions for working with files; see <code>help(files)</code>.</p>
</div>
</div>
<div id="recipe-id033" class="section level2 hasAnchor" number="4.5">
<h2><span class="header-section-number">4.5</span> Dealing with “Cannot Open File” in Windows<a href="InputAndOutput.html#recipe-id033" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id033" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id033" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You are running R on Windows, and you are using filenames such as
<code>C:\data\sample.txt</code>. R says it cannot open the file, but you know the
file does exist.</p>
</div>
<div id="solution-id033" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id033" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The backslashes in the filepath are causing trouble. You can solve this
problem in one of two ways:</p>
<ul>
<li><p>Change the backslashes to forward slashes: <code>"C:/data/sample.txt"</code>.</p></li>
<li><p>Double the backslashes: <code>"C:\\data\\sample.txt"</code>.</p></li>
</ul>
</div>
<div id="discussion-id033" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id033" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you open a file in R, you give the filename as a character string.
Problems arise when the name contains backslashes (<code>\</code>) because
backslashes have a special meaning inside strings. You’ll probably get
something like this:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="InputAndOutput.html#cb187-1" tabindex="-1"></a>samp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;C:\Data\sample-data.csv&quot;</span>)</span>
<span id="cb187-2"><a href="InputAndOutput.html#cb187-2" tabindex="-1"></a><span class="co">#&gt; Error: &#39;\D&#39; is an unrecognized escape in character string (&lt;text&gt;:1:22)</span></span></code></pre></div>
<p>R escapes every character that follows a backslash and then removes the
backslashes. That leaves a meaningless filepath, such as
<code>C:Datasample-data.csv</code> in this example.</p>
<p>The simple solution is to use forward slashes instead of backslashes. R
leaves the forward slashes alone, and Windows treats them just like
backslashes. Problem solved:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="InputAndOutput.html#cb188-1" tabindex="-1"></a>samp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;C:/Data/sample-data.csv&quot;</span>)</span></code></pre></div>
<p>An alternative solution is to double the backslashes, since R replaces
two consecutive backslashes with a single backslash:</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="InputAndOutput.html#cb189-1" tabindex="-1"></a>samp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;C:</span><span class="sc">\\</span><span class="st">Data</span><span class="sc">\\</span><span class="st">sample-data.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
<div id="recipe-id136" class="section level2 hasAnchor" number="4.6">
<h2><span class="header-section-number">4.6</span> Reading Fixed-Width Records<a href="InputAndOutput.html#recipe-id136" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id136" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id136" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You are reading data from a file of fixed-width records: records whose
data items occur at fixed boundaries.</p>
</div>
<div id="solution-id136" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id136" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>read_fwf</code> from the <code>readr</code> package (which is part of the tidyverse). The main arguments are the filename and the description of the fields:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="InputAndOutput.html#cb190-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb190-2"><a href="InputAndOutput.html#cb190-2" tabindex="-1"></a>records <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(<span class="st">&quot;myfile.txt&quot;</span>,</span>
<span id="cb190-3"><a href="InputAndOutput.html#cb190-3" tabindex="-1"></a>                    <span class="fu">fwf_cols</span>(<span class="at">col1 =</span> <span class="dv">10</span>,</span>
<span id="cb190-4"><a href="InputAndOutput.html#cb190-4" tabindex="-1"></a>                             <span class="at">col2 =</span> <span class="dv">7</span>))</span>
<span id="cb190-5"><a href="InputAndOutput.html#cb190-5" tabindex="-1"></a>records</span></code></pre></div>
<p>This form uses the <code>fwf_cols</code> parameter to pass column names and widths to the function. You can also pass column parameters in other ways as discussed next.</p>
</div>
<div id="discussion-id136" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id136" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For reading data into R, we highly recommend the <code>readr</code> package. There are Base R functions for reading in text files, but <code>readr</code> improves on these base functions
with faster performance, better defaults, and more flexibility.</p>
<p>Suppose we want to read an entire file of fixed-width records, such as <em>fixed-width.txt</em>, shown here:</p>
<pre><code>Fisher    R.A.      1890 1962
Pearson   Karl      1857 1936
Cox       Gertrude  1900 1978
Yates     Frank     1902 1994
Smith     Kirstine  1878 1939</code></pre>
<p>We need to know the column widths. In this case the columns are:</p>
<ul>
<li>Last name, 10 characters</li>
<li>First name, 10 characters</li>
<li>Year of birth, 5 characters</li>
<li>Year of death, 5 characters</li>
</ul>
<p>There are five different ways to define the columns using <code>read_fwf</code>. Pick the one that’s easiest to use (or remember) in your situation:</p>
<ul>
<li><code>read_fwf</code> can try to guess your column widths if there is empty space between the columns, with the <code>fwf_empty</code> option:</li>
</ul>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="InputAndOutput.html#cb192-1" tabindex="-1"></a>file <span class="ot">&lt;-</span> <span class="st">&quot;./data/datafile.fwf&quot;</span></span>
<span id="cb192-2"><a href="InputAndOutput.html#cb192-2" tabindex="-1"></a>t1 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(file, <span class="fu">fwf_empty</span>(file, <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&quot;last&quot;</span>, <span class="st">&quot;first&quot;</span>, <span class="st">&quot;birth&quot;</span>, <span class="st">&quot;death&quot;</span>)))</span>
<span id="cb192-3"><a href="InputAndOutput.html#cb192-3" tabindex="-1"></a><span class="co">#&gt; Rows: 5 Columns: 4</span></span>
<span id="cb192-4"><a href="InputAndOutput.html#cb192-4" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb192-5"><a href="InputAndOutput.html#cb192-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb192-6"><a href="InputAndOutput.html#cb192-6" tabindex="-1"></a><span class="co">#&gt; chr (2): last, first</span></span>
<span id="cb192-7"><a href="InputAndOutput.html#cb192-7" tabindex="-1"></a><span class="co">#&gt; dbl (2): birth, death</span></span>
<span id="cb192-8"><a href="InputAndOutput.html#cb192-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb192-9"><a href="InputAndOutput.html#cb192-9" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb192-10"><a href="InputAndOutput.html#cb192-10" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<ul>
<li>You can define each column by a vector of widths followed by a vector of names with <code>fwf_widths</code>:</li>
</ul>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="InputAndOutput.html#cb193-1" tabindex="-1"></a>t2 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(file, <span class="fu">fwf_widths</span>(<span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">10</span>, <span class="dv">5</span>, <span class="dv">4</span>),</span>
<span id="cb193-2"><a href="InputAndOutput.html#cb193-2" tabindex="-1"></a>                                <span class="fu">c</span>(<span class="st">&quot;last&quot;</span>, <span class="st">&quot;first&quot;</span>, <span class="st">&quot;birth&quot;</span>, <span class="st">&quot;death&quot;</span>)))</span>
<span id="cb193-3"><a href="InputAndOutput.html#cb193-3" tabindex="-1"></a><span class="co">#&gt; Rows: 5 Columns: 4</span></span>
<span id="cb193-4"><a href="InputAndOutput.html#cb193-4" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb193-5"><a href="InputAndOutput.html#cb193-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb193-6"><a href="InputAndOutput.html#cb193-6" tabindex="-1"></a><span class="co">#&gt; chr (2): last, first</span></span>
<span id="cb193-7"><a href="InputAndOutput.html#cb193-7" tabindex="-1"></a><span class="co">#&gt; dbl (2): birth, death</span></span>
<span id="cb193-8"><a href="InputAndOutput.html#cb193-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb193-9"><a href="InputAndOutput.html#cb193-9" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb193-10"><a href="InputAndOutput.html#cb193-10" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<ul>
<li>The columns can be defined with <code>fwf_cols</code>, which takes a series of column names followed by the column widths:</li>
</ul>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="InputAndOutput.html#cb194-1" tabindex="-1"></a>t3 <span class="ot">&lt;-</span></span>
<span id="cb194-2"><a href="InputAndOutput.html#cb194-2" tabindex="-1"></a>  <span class="fu">read_fwf</span>(<span class="st">&quot;./data/datafile.fwf&quot;</span>,</span>
<span id="cb194-3"><a href="InputAndOutput.html#cb194-3" tabindex="-1"></a>           <span class="fu">fwf_cols</span>(</span>
<span id="cb194-4"><a href="InputAndOutput.html#cb194-4" tabindex="-1"></a>             <span class="at">last =</span> <span class="dv">10</span>,</span>
<span id="cb194-5"><a href="InputAndOutput.html#cb194-5" tabindex="-1"></a>             <span class="at">first =</span> <span class="dv">10</span>,</span>
<span id="cb194-6"><a href="InputAndOutput.html#cb194-6" tabindex="-1"></a>             <span class="at">birth =</span> <span class="dv">5</span>,</span>
<span id="cb194-7"><a href="InputAndOutput.html#cb194-7" tabindex="-1"></a>             <span class="at">death =</span> <span class="dv">5</span></span>
<span id="cb194-8"><a href="InputAndOutput.html#cb194-8" tabindex="-1"></a>           ))</span>
<span id="cb194-9"><a href="InputAndOutput.html#cb194-9" tabindex="-1"></a><span class="co">#&gt; Rows: 5 Columns: 4</span></span>
<span id="cb194-10"><a href="InputAndOutput.html#cb194-10" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb194-11"><a href="InputAndOutput.html#cb194-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb194-12"><a href="InputAndOutput.html#cb194-12" tabindex="-1"></a><span class="co">#&gt; chr (2): last, first</span></span>
<span id="cb194-13"><a href="InputAndOutput.html#cb194-13" tabindex="-1"></a><span class="co">#&gt; dbl (2): birth, death</span></span>
<span id="cb194-14"><a href="InputAndOutput.html#cb194-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb194-15"><a href="InputAndOutput.html#cb194-15" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb194-16"><a href="InputAndOutput.html#cb194-16" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<ul>
<li>Each column can be defined by a beginning position and ending position with <code>fwf_cols</code>:</li>
</ul>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="InputAndOutput.html#cb195-1" tabindex="-1"></a>t4 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(file, <span class="fu">fwf_cols</span>(</span>
<span id="cb195-2"><a href="InputAndOutput.html#cb195-2" tabindex="-1"></a>  <span class="at">last =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">10</span>),</span>
<span id="cb195-3"><a href="InputAndOutput.html#cb195-3" tabindex="-1"></a>  <span class="at">first =</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">20</span>),</span>
<span id="cb195-4"><a href="InputAndOutput.html#cb195-4" tabindex="-1"></a>  <span class="at">birth =</span> <span class="fu">c</span>(<span class="dv">21</span>, <span class="dv">25</span>),</span>
<span id="cb195-5"><a href="InputAndOutput.html#cb195-5" tabindex="-1"></a>  <span class="at">death =</span> <span class="fu">c</span>(<span class="dv">26</span>, <span class="dv">30</span>)</span>
<span id="cb195-6"><a href="InputAndOutput.html#cb195-6" tabindex="-1"></a>))</span>
<span id="cb195-7"><a href="InputAndOutput.html#cb195-7" tabindex="-1"></a><span class="co">#&gt; Rows: 5 Columns: 4</span></span>
<span id="cb195-8"><a href="InputAndOutput.html#cb195-8" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb195-9"><a href="InputAndOutput.html#cb195-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb195-10"><a href="InputAndOutput.html#cb195-10" tabindex="-1"></a><span class="co">#&gt; chr (2): last, first</span></span>
<span id="cb195-11"><a href="InputAndOutput.html#cb195-11" tabindex="-1"></a><span class="co">#&gt; dbl (2): birth, death</span></span>
<span id="cb195-12"><a href="InputAndOutput.html#cb195-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb195-13"><a href="InputAndOutput.html#cb195-13" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb195-14"><a href="InputAndOutput.html#cb195-14" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<ul>
<li>You can also define the columns with a vector of starting positions, a vector of ending positions, and a vector of column names, with <code>fwf_positions</code>:</li>
</ul>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="InputAndOutput.html#cb196-1" tabindex="-1"></a>t5 <span class="ot">&lt;-</span> <span class="fu">read_fwf</span>(file, <span class="fu">fwf_positions</span>(</span>
<span id="cb196-2"><a href="InputAndOutput.html#cb196-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">11</span>, <span class="dv">21</span>, <span class="dv">26</span>),</span>
<span id="cb196-3"><a href="InputAndOutput.html#cb196-3" tabindex="-1"></a>  <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>, <span class="dv">30</span>),</span>
<span id="cb196-4"><a href="InputAndOutput.html#cb196-4" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;first&quot;</span>, <span class="st">&quot;last&quot;</span>, <span class="st">&quot;birth&quot;</span>, <span class="st">&quot;death&quot;</span>)</span>
<span id="cb196-5"><a href="InputAndOutput.html#cb196-5" tabindex="-1"></a>))</span>
<span id="cb196-6"><a href="InputAndOutput.html#cb196-6" tabindex="-1"></a><span class="co">#&gt; Rows: 5 Columns: 4</span></span>
<span id="cb196-7"><a href="InputAndOutput.html#cb196-7" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb196-8"><a href="InputAndOutput.html#cb196-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb196-9"><a href="InputAndOutput.html#cb196-9" tabindex="-1"></a><span class="co">#&gt; chr (2): first, last</span></span>
<span id="cb196-10"><a href="InputAndOutput.html#cb196-10" tabindex="-1"></a><span class="co">#&gt; dbl (2): birth, death</span></span>
<span id="cb196-11"><a href="InputAndOutput.html#cb196-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb196-12"><a href="InputAndOutput.html#cb196-12" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb196-13"><a href="InputAndOutput.html#cb196-13" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>The <code>read_fwf</code> returns a <em>tibble</em>, which is a tidyverse flavor of data frame. As is common with tidyverse packages, <code>read_fwf</code> has a good selection of default assumptions that make it less tricky to use than some Base R functions for importing data. For example, <code>read_fwf</code> will, by default, import character fields as characters, not factors, which prevents much pain and consternation for users.</p>
</div>
<div id="see_also-id136" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id136" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="InputAndOutput.html#recipe-id245">4.7</a>, <a href="InputAndOutput.html#recipe-id245">“Reading Tabular Data Files”</a>, for more discussion of
reading text files.</p>
</div>
</div>
<div id="recipe-id245" class="section level2 hasAnchor" number="4.7">
<h2><span class="header-section-number">4.7</span> Reading Tabular Data Files<a href="InputAndOutput.html#recipe-id245" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id245" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id245" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read a text file that contains a table of whitespace-delimited data.</p>
</div>
<div id="solution-id245" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id245" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>read_table2</code> function from the <code>readr</code> package, which returns a tibble:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="InputAndOutput.html#cb197-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb197-2"><a href="InputAndOutput.html#cb197-2" tabindex="-1"></a></span>
<span id="cb197-3"><a href="InputAndOutput.html#cb197-3" tabindex="-1"></a>tab1 <span class="ot">&lt;-</span> <span class="fu">read_table2</span>(<span class="st">&quot;./data/datafile.tsv&quot;</span>)</span>
<span id="cb197-4"><a href="InputAndOutput.html#cb197-4" tabindex="-1"></a><span class="co">#&gt; Warning: `read_table2()` was deprecated in readr 2.0.0.</span></span>
<span id="cb197-5"><a href="InputAndOutput.html#cb197-5" tabindex="-1"></a><span class="co">#&gt; ℹ Please use `read_table()` instead.</span></span>
<span id="cb197-6"><a href="InputAndOutput.html#cb197-6" tabindex="-1"></a><span class="co">#&gt; This warning is displayed once every 8 hours.</span></span>
<span id="cb197-7"><a href="InputAndOutput.html#cb197-7" tabindex="-1"></a><span class="co">#&gt; Call `lifecycle::last_lifecycle_warnings()` to see where this warning was</span></span>
<span id="cb197-8"><a href="InputAndOutput.html#cb197-8" tabindex="-1"></a><span class="co">#&gt; generated.</span></span>
<span id="cb197-9"><a href="InputAndOutput.html#cb197-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb197-10"><a href="InputAndOutput.html#cb197-10" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb197-11"><a href="InputAndOutput.html#cb197-11" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb197-12"><a href="InputAndOutput.html#cb197-12" tabindex="-1"></a><span class="co">#&gt;   last = col_character(),</span></span>
<span id="cb197-13"><a href="InputAndOutput.html#cb197-13" tabindex="-1"></a><span class="co">#&gt;   first = col_character(),</span></span>
<span id="cb197-14"><a href="InputAndOutput.html#cb197-14" tabindex="-1"></a><span class="co">#&gt;   birth = col_double(),</span></span>
<span id="cb197-15"><a href="InputAndOutput.html#cb197-15" tabindex="-1"></a><span class="co">#&gt;   death = col_double()</span></span>
<span id="cb197-16"><a href="InputAndOutput.html#cb197-16" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb197-17"><a href="InputAndOutput.html#cb197-17" tabindex="-1"></a>tab1</span>
<span id="cb197-18"><a href="InputAndOutput.html#cb197-18" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb197-19"><a href="InputAndOutput.html#cb197-19" tabindex="-1"></a><span class="co">#&gt;   last    first    birth death</span></span>
<span id="cb197-20"><a href="InputAndOutput.html#cb197-20" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb197-21"><a href="InputAndOutput.html#cb197-21" tabindex="-1"></a><span class="co">#&gt; 1 Fisher  R.A.      1890  1962</span></span>
<span id="cb197-22"><a href="InputAndOutput.html#cb197-22" tabindex="-1"></a><span class="co">#&gt; 2 Pearson Karl      1857  1936</span></span>
<span id="cb197-23"><a href="InputAndOutput.html#cb197-23" tabindex="-1"></a><span class="co">#&gt; 3 Cox     Gertrude  1900  1978</span></span>
<span id="cb197-24"><a href="InputAndOutput.html#cb197-24" tabindex="-1"></a><span class="co">#&gt; 4 Yates   Frank     1902  1994</span></span>
<span id="cb197-25"><a href="InputAndOutput.html#cb197-25" tabindex="-1"></a><span class="co">#&gt; 5 Smith   Kirstine  1878  1939</span></span></code></pre></div>
</div>
<div id="discussion-id245" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id245" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Tabular data files are quite common. They are text files with a simple
format:</p>
<ul>
<li><p>Each line contains one record.</p></li>
<li><p>Within each record, fields (items) are separated by a whitespace
delimiter, such as a space or tab.</p></li>
<li><p>Each record contains the same number of fields.</p></li>
</ul>
<p>This format is more free-form than the fixed-width format because fields
needn’t be aligned by position. Here is the data file from Recipe <a href="InputAndOutput.html#recipe-id136">4.6</a>, <a href="InputAndOutput.html#recipe-id136">“Reading Fixed-Width Records”</a> in tabular format, using a
tab character between fields:</p>
<pre><code>last    first   birth   death
Fisher  R.A.    1890    1962
Pearson Karl    1857    1936
Cox Gertrude    1900    1978
Yates   Frank   1902    1994
Smith   Kirstine    1878    1939
</code></pre>
<p>The <code>read_table2</code> function is designed to make some good guesses about your data. It assumes your data has column names in the first row, it guesses your delimiter, and it imputes your column types based on the first 1,000 records in your dataset. Next is an example with space-delimited data.</p>
<p>The source file looks like this:</p>
<pre><code>last first birth death
Fisher R.A. 1890 1962
Pearson Karl 1857 1936
Cox Gertrude 1900 1978
Yates Frank 1902 1994
Smith Kirstine 1878 1939</code></pre>
<p>And <code>read_table2</code> makes some rational guesses:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="InputAndOutput.html#cb200-1" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_table2</span>(<span class="st">&quot;./data/datafile1.ssv&quot;</span>)</span>
<span id="cb200-2"><a href="InputAndOutput.html#cb200-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb200-3"><a href="InputAndOutput.html#cb200-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb200-4"><a href="InputAndOutput.html#cb200-4" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb200-5"><a href="InputAndOutput.html#cb200-5" tabindex="-1"></a><span class="co">#&gt;   last = col_character(),</span></span>
<span id="cb200-6"><a href="InputAndOutput.html#cb200-6" tabindex="-1"></a><span class="co">#&gt;   first = col_character(),</span></span>
<span id="cb200-7"><a href="InputAndOutput.html#cb200-7" tabindex="-1"></a><span class="co">#&gt;   birth = col_double(),</span></span>
<span id="cb200-8"><a href="InputAndOutput.html#cb200-8" tabindex="-1"></a><span class="co">#&gt;   death = col_double()</span></span>
<span id="cb200-9"><a href="InputAndOutput.html#cb200-9" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb200-10"><a href="InputAndOutput.html#cb200-10" tabindex="-1"></a><span class="fu">print</span>(t)</span>
<span id="cb200-11"><a href="InputAndOutput.html#cb200-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb200-12"><a href="InputAndOutput.html#cb200-12" tabindex="-1"></a><span class="co">#&gt;   last    first    birth death</span></span>
<span id="cb200-13"><a href="InputAndOutput.html#cb200-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb200-14"><a href="InputAndOutput.html#cb200-14" tabindex="-1"></a><span class="co">#&gt; 1 Fisher  R.A.      1890  1962</span></span>
<span id="cb200-15"><a href="InputAndOutput.html#cb200-15" tabindex="-1"></a><span class="co">#&gt; 2 Pearson Karl      1857  1936</span></span>
<span id="cb200-16"><a href="InputAndOutput.html#cb200-16" tabindex="-1"></a><span class="co">#&gt; 3 Cox     Gertrude  1900  1978</span></span>
<span id="cb200-17"><a href="InputAndOutput.html#cb200-17" tabindex="-1"></a><span class="co">#&gt; 4 Yates   Frank     1902  1994</span></span>
<span id="cb200-18"><a href="InputAndOutput.html#cb200-18" tabindex="-1"></a><span class="co">#&gt; 5 Smith   Kirstine  1878  1939</span></span></code></pre></div>
<p><code>read_table2</code> often guesses correctly. But as with other <code>readr</code> import functions, you can overwrite the defaults with explicit parameters.</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="InputAndOutput.html#cb201-1" tabindex="-1"></a>t <span class="ot">&lt;-</span></span>
<span id="cb201-2"><a href="InputAndOutput.html#cb201-2" tabindex="-1"></a>  <span class="fu">read_table2</span>(</span>
<span id="cb201-3"><a href="InputAndOutput.html#cb201-3" tabindex="-1"></a>    <span class="st">&quot;./data/datafile1.ssv&quot;</span>,</span>
<span id="cb201-4"><a href="InputAndOutput.html#cb201-4" tabindex="-1"></a>    <span class="at">col_types =</span> <span class="fu">c</span>(</span>
<span id="cb201-5"><a href="InputAndOutput.html#cb201-5" tabindex="-1"></a>      <span class="fu">col_character</span>(),</span>
<span id="cb201-6"><a href="InputAndOutput.html#cb201-6" tabindex="-1"></a>      <span class="fu">col_character</span>(),</span>
<span id="cb201-7"><a href="InputAndOutput.html#cb201-7" tabindex="-1"></a>      <span class="fu">col_integer</span>(),</span>
<span id="cb201-8"><a href="InputAndOutput.html#cb201-8" tabindex="-1"></a>      <span class="fu">col_integer</span>()</span>
<span id="cb201-9"><a href="InputAndOutput.html#cb201-9" tabindex="-1"></a>    )</span>
<span id="cb201-10"><a href="InputAndOutput.html#cb201-10" tabindex="-1"></a>  )</span></code></pre></div>
<p>If any field contains the string <code>"NA"</code>, then <code>read_table2</code> assumes that
the value is missing and converts it to NA. Your data file might employ
a different string to signal missing values, in which case use the
<code>na</code> parameter. The SAS convention, for example, is that missing
values are signaled by a single period (<code>.</code>).
We can read such text files using the <code>na="."</code> option.
If we have a file named <em>datafile_missing.tsv</em> that has a missing value indicated with a <code>.</code> in the last row:</p>
<pre><code>last    first   birth   death
Fisher  R.A.    1890    1962
Pearson Karl    1857    1936
Cox Gertrude    1900    1978
Yates   Frank   1902    1994
Smith   Kirstine    1878    1939
Cox David 1924 .</code></pre>
<p>we can import it like so:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="InputAndOutput.html#cb203-1" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_table2</span>(<span class="st">&quot;./data/datafile_missing.tsv&quot;</span>, <span class="at">na =</span> <span class="st">&quot;.&quot;</span>)</span>
<span id="cb203-2"><a href="InputAndOutput.html#cb203-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb203-3"><a href="InputAndOutput.html#cb203-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb203-4"><a href="InputAndOutput.html#cb203-4" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb203-5"><a href="InputAndOutput.html#cb203-5" tabindex="-1"></a><span class="co">#&gt;   last = col_character(),</span></span>
<span id="cb203-6"><a href="InputAndOutput.html#cb203-6" tabindex="-1"></a><span class="co">#&gt;   first = col_character(),</span></span>
<span id="cb203-7"><a href="InputAndOutput.html#cb203-7" tabindex="-1"></a><span class="co">#&gt;   birth = col_double(),</span></span>
<span id="cb203-8"><a href="InputAndOutput.html#cb203-8" tabindex="-1"></a><span class="co">#&gt;   death = col_double()</span></span>
<span id="cb203-9"><a href="InputAndOutput.html#cb203-9" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb203-10"><a href="InputAndOutput.html#cb203-10" tabindex="-1"></a>t</span>
<span id="cb203-11"><a href="InputAndOutput.html#cb203-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span id="cb203-12"><a href="InputAndOutput.html#cb203-12" tabindex="-1"></a><span class="co">#&gt;   last    first    birth death</span></span>
<span id="cb203-13"><a href="InputAndOutput.html#cb203-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb203-14"><a href="InputAndOutput.html#cb203-14" tabindex="-1"></a><span class="co">#&gt; 1 Fisher  R.A.      1890  1962</span></span>
<span id="cb203-15"><a href="InputAndOutput.html#cb203-15" tabindex="-1"></a><span class="co">#&gt; 2 Pearson Karl      1857  1936</span></span>
<span id="cb203-16"><a href="InputAndOutput.html#cb203-16" tabindex="-1"></a><span class="co">#&gt; 3 Cox     Gertrude  1900  1978</span></span>
<span id="cb203-17"><a href="InputAndOutput.html#cb203-17" tabindex="-1"></a><span class="co">#&gt; 4 Yates   Frank     1902  1994</span></span>
<span id="cb203-18"><a href="InputAndOutput.html#cb203-18" tabindex="-1"></a><span class="co">#&gt; 5 Smith   Kirstine  1878  1939</span></span>
<span id="cb203-19"><a href="InputAndOutput.html#cb203-19" tabindex="-1"></a><span class="co">#&gt; 6 Cox     David     1924    NA</span></span></code></pre></div>
<p>We’re huge fans of <em>self-describing</em> data: data files that describe their
own contents.
(A computer scientist would say the file contains its own metadata.)
The <code>read_table2</code> function makes the default assumption that the first line of your file contains a header line with column names.
If your file does not have column names, you can turn this off with the parameter <code>col_names = FALSE</code>.</p>
<p>An additional type of metadata supported by <code>read_table2</code> is comment lines. Using the <code>comment</code> parameter you can tell <code>read_table2</code> which character distinguishes comment lines. The following file has a comment line at the top that starts with <code>#</code>.</p>
<pre><code># The following is a list of statisticians
last first birth death
Fisher R.A. 1890 1962
Pearson Karl 1857 1936
Cox Gertrude 1900 1978
Yates Frank 1902 1994
Smith Kirstine 1878 1939</code></pre>
<p>so we can import this file as follows:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="InputAndOutput.html#cb205-1" tabindex="-1"></a>t <span class="ot">&lt;-</span> <span class="fu">read_table2</span>(<span class="st">&quot;./data/datafile.ssv&quot;</span>, <span class="at">comment =</span> <span class="st">&#39;#&#39;</span>)</span>
<span id="cb205-2"><a href="InputAndOutput.html#cb205-2" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb205-3"><a href="InputAndOutput.html#cb205-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb205-4"><a href="InputAndOutput.html#cb205-4" tabindex="-1"></a><span class="co">#&gt; cols(</span></span>
<span id="cb205-5"><a href="InputAndOutput.html#cb205-5" tabindex="-1"></a><span class="co">#&gt;   last = col_character(),</span></span>
<span id="cb205-6"><a href="InputAndOutput.html#cb205-6" tabindex="-1"></a><span class="co">#&gt;   first = col_character(),</span></span>
<span id="cb205-7"><a href="InputAndOutput.html#cb205-7" tabindex="-1"></a><span class="co">#&gt;   birth = col_double(),</span></span>
<span id="cb205-8"><a href="InputAndOutput.html#cb205-8" tabindex="-1"></a><span class="co">#&gt;   death = col_double()</span></span>
<span id="cb205-9"><a href="InputAndOutput.html#cb205-9" tabindex="-1"></a><span class="co">#&gt; )</span></span>
<span id="cb205-10"><a href="InputAndOutput.html#cb205-10" tabindex="-1"></a>t</span>
<span id="cb205-11"><a href="InputAndOutput.html#cb205-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb205-12"><a href="InputAndOutput.html#cb205-12" tabindex="-1"></a><span class="co">#&gt;   last    first    birth death</span></span>
<span id="cb205-13"><a href="InputAndOutput.html#cb205-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb205-14"><a href="InputAndOutput.html#cb205-14" tabindex="-1"></a><span class="co">#&gt; 1 Fisher  R.A.      1890  1962</span></span>
<span id="cb205-15"><a href="InputAndOutput.html#cb205-15" tabindex="-1"></a><span class="co">#&gt; 2 Pearson Karl      1857  1936</span></span>
<span id="cb205-16"><a href="InputAndOutput.html#cb205-16" tabindex="-1"></a><span class="co">#&gt; 3 Cox     Gertrude  1900  1978</span></span>
<span id="cb205-17"><a href="InputAndOutput.html#cb205-17" tabindex="-1"></a><span class="co">#&gt; 4 Yates   Frank     1902  1994</span></span>
<span id="cb205-18"><a href="InputAndOutput.html#cb205-18" tabindex="-1"></a><span class="co">#&gt; 5 Smith   Kirstine  1878  1939</span></span></code></pre></div>
<p><code>read_table2</code> has many parameters for controlling how it reads and
interprets the input file. See the help page (<code>?read_table2</code>) or the <code>readr</code> vignette (<code>vignette("readr")</code>) for more details. If you’re curious about the difference between <code>read_table</code> and <code>read_table2</code>, it’s in the help file… but the short answer is that <code>read_table</code> is slightly less forgiving in file structure and line length.</p>
</div>
<div id="see_also-id245" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id245" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your data items are separated by commas, see
Recipe <a href="InputAndOutput.html#recipe-id027">4.8</a>, <a href="InputAndOutput.html#recipe-id027">“Reading from CSV Files”</a>, for reading a CSV file.</p>
</div>
</div>
<div id="recipe-id027" class="section level2 hasAnchor" number="4.8">
<h2><span class="header-section-number">4.8</span> Reading from CSV Files<a href="InputAndOutput.html#recipe-id027" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id027" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id027" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read data from a comma-separated values (CSV) file.</p>
</div>
<div id="solution-id027" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id027" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>read_csv</code> function from the <code>readr</code> package is a fast (and, according to the documentation, fun) way to read CSV files. If your CSV file has a
header line, use this:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="InputAndOutput.html#cb206-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb206-2"><a href="InputAndOutput.html#cb206-2" tabindex="-1"></a></span>
<span id="cb206-3"><a href="InputAndOutput.html#cb206-3" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datafile.csv&quot;</span>)</span></code></pre></div>
<p>If your CSV file does not contain a header line, set the <code>col_names</code> option
to <code>FALSE</code>:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="InputAndOutput.html#cb207-1" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;datafile.csv&quot;</span>,  <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
</div>
<div id="discussion-id027" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id027" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The CSV file format is popular because many programs can import and
export data in that format. This includes R, Excel, other
spreadsheet programs, many database managers, and most statistical
packages. It is a flat file of tabular data, where each line in the file
is a row of data, and each row contains data items separated by commas.
Here is a very simple CSV file with three rows and three columns. The
first line is a header line that contains the column names, also
separated by commas:</p>
<pre><code>label,lbound,ubound
low,0,0.674
mid,0.674,1.64
high,1.64,2.33</code></pre>
<p>The <code>read_csv</code> file reads the data and creates a tibble. The function assumes that your file has a header line unless told otherwise:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="InputAndOutput.html#cb209-1" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/example1.csv&quot;</span>)</span>
<span id="cb209-2"><a href="InputAndOutput.html#cb209-2" tabindex="-1"></a><span class="co">#&gt; Rows: 3 Columns: 3</span></span>
<span id="cb209-3"><a href="InputAndOutput.html#cb209-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb209-4"><a href="InputAndOutput.html#cb209-4" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb209-5"><a href="InputAndOutput.html#cb209-5" tabindex="-1"></a><span class="co">#&gt; chr (1): label</span></span>
<span id="cb209-6"><a href="InputAndOutput.html#cb209-6" tabindex="-1"></a><span class="co">#&gt; dbl (2): lbound, ubound</span></span>
<span id="cb209-7"><a href="InputAndOutput.html#cb209-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb209-8"><a href="InputAndOutput.html#cb209-8" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb209-9"><a href="InputAndOutput.html#cb209-9" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb209-10"><a href="InputAndOutput.html#cb209-10" tabindex="-1"></a>tbl</span>
<span id="cb209-11"><a href="InputAndOutput.html#cb209-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span id="cb209-12"><a href="InputAndOutput.html#cb209-12" tabindex="-1"></a><span class="co">#&gt;   label lbound ubound</span></span>
<span id="cb209-13"><a href="InputAndOutput.html#cb209-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb209-14"><a href="InputAndOutput.html#cb209-14" tabindex="-1"></a><span class="co">#&gt; 1 low    0      0.674</span></span>
<span id="cb209-15"><a href="InputAndOutput.html#cb209-15" tabindex="-1"></a><span class="co">#&gt; 2 mid    0.674  1.64 </span></span>
<span id="cb209-16"><a href="InputAndOutput.html#cb209-16" tabindex="-1"></a><span class="co">#&gt; 3 high   1.64   2.33</span></span></code></pre></div>
<p>Observe that <code>read_csv</code> took the column names from the header line for
the tibble. If the file did not contain a header, then we would
specify <code>col_names=FALSE</code> and R would synthesize column names for us (<code>X1</code>,
<code>X2</code>, and <code>X3</code> in this case):</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="InputAndOutput.html#cb210-1" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/example1.csv&quot;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb210-2"><a href="InputAndOutput.html#cb210-2" tabindex="-1"></a><span class="co">#&gt; Rows: 4 Columns: 3</span></span>
<span id="cb210-3"><a href="InputAndOutput.html#cb210-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb210-4"><a href="InputAndOutput.html#cb210-4" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb210-5"><a href="InputAndOutput.html#cb210-5" tabindex="-1"></a><span class="co">#&gt; chr (3): X1, X2, X3</span></span>
<span id="cb210-6"><a href="InputAndOutput.html#cb210-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb210-7"><a href="InputAndOutput.html#cb210-7" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb210-8"><a href="InputAndOutput.html#cb210-8" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb210-9"><a href="InputAndOutput.html#cb210-9" tabindex="-1"></a>tbl</span>
<span id="cb210-10"><a href="InputAndOutput.html#cb210-10" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 3</span></span>
<span id="cb210-11"><a href="InputAndOutput.html#cb210-11" tabindex="-1"></a><span class="co">#&gt;   X1    X2     X3    </span></span>
<span id="cb210-12"><a href="InputAndOutput.html#cb210-12" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; </span></span>
<span id="cb210-13"><a href="InputAndOutput.html#cb210-13" tabindex="-1"></a><span class="co">#&gt; 1 label lbound ubound</span></span>
<span id="cb210-14"><a href="InputAndOutput.html#cb210-14" tabindex="-1"></a><span class="co">#&gt; 2 low   0      0.674 </span></span>
<span id="cb210-15"><a href="InputAndOutput.html#cb210-15" tabindex="-1"></a><span class="co">#&gt; 3 mid   0.674  1.64  </span></span>
<span id="cb210-16"><a href="InputAndOutput.html#cb210-16" tabindex="-1"></a><span class="co">#&gt; 4 high  1.64   2.33</span></span></code></pre></div>
<p>Sometimes it’s convenient to put metadata in files. If this metadata starts with a common character, such as a pound sign (<code>#</code>), we can use the <code>comment=FALSE</code> parameter to ignore metadata lines.</p>
<p>The <code>read_csv</code> function has many useful bells and whistles. A few of these options and their default values include:</p>
<dl>
<dt><code>na = c("", "NA")</code></dt>
<dd>
<p>Indicates what values represent missing or NA values</p>
</dd>
<dt><code>comment = ""</code></dt>
<dd>
<p>Indicates which lines to ignore as comments or metadata</p>
</dd>
<dt><code>trim_ws = TRUE</code></dt>
<dd>
<p>Indicates whether to drop whitespace at the beginning and/or end of fields</p>
</dd>
<dt><code>skip = 0</code></dt>
<dd>
<p>Indicates the number of rows to skip at the beginning of the file</p>
</dd>
<dt><code>guess_max = min(1000, n_max)</code></dt>
<dd>
<p>Indicates the number of rows to consider when imputing column types</p>
</dd>
</dl>
<p>See the R help page, <code>help(read_csv)</code>, for more details on all the available options.</p>
<p>If you have a data file that uses semicolons (<code>;</code>) for separators and commas for the decimal mark, as is common outside of North America, you should use the function <code>read_csv2</code>, which is built for that very situation.</p>
</div>
<div id="see_also-id027" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id027" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="InputAndOutput.html#recipe-id028">4.9</a>, <a href="InputAndOutput.html#recipe-id028">“Writing to CSV Files”</a>. See also the vignette for the <code>readr</code>: <code>vignette(readr)</code>.</p>
</div>
</div>
<div id="recipe-id028" class="section level2 hasAnchor" number="4.9">
<h2><span class="header-section-number">4.9</span> Writing to CSV Files<a href="InputAndOutput.html#recipe-id028" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id028" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id028" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to save a matrix or data frame in a file using the
comma-separated values format.</p>
</div>
<div id="solution-id028" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id028" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>write_csv</code> function from the tidyverse <code>readr</code> package can write a CSV file:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="InputAndOutput.html#cb211-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb211-2"><a href="InputAndOutput.html#cb211-2" tabindex="-1"></a></span>
<span id="cb211-3"><a href="InputAndOutput.html#cb211-3" tabindex="-1"></a><span class="fu">write_csv</span>(df, <span class="at">path =</span> <span class="st">&quot;outfile.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="discussion-id028" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id028" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>write_csv</code> function writes tabular data to an ASCII file in CSV format. Each row of data creates one line in the file, with data items separated by commas (<code>,</code>). We can start with the data frame <code>tab1</code> we created previously in Recipe <a href="InputAndOutput.html#recipe-id245">4.7</a>, <a href="InputAndOutput.html#recipe-id245">“Reading Tabular Data Files”</a>.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="InputAndOutput.html#cb212-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb212-2"><a href="InputAndOutput.html#cb212-2" tabindex="-1"></a><span class="fu">write_csv</span>(tab1, <span class="st">&quot;./data/tab1.csv&quot;</span>)</span></code></pre></div>
<p>This example creates a file called <em>tab1.csv</em> in the <em>data</em> directory, which is a subdirectory of the current working directory. The file looks like this:</p>
<pre><code>last,first,birth,death
Fisher,R.A.,1890,1962
Pearson,Karl,1857,1936
Cox,Gertrude,1900,1978
Yates,Frank,1902,1994
Smith,Kirstine,1878,1939</code></pre>
<p><code>write_csv</code> has a number of parameters with typically very good defaults. Should you want to adjust the output, here are a few parameters you can change, along with their defaults:</p>
<dl>
<dt><code>col_names = TRUE</code></dt>
<dd>
<p>Indicates whether or not the first row contains column names.</p>
</dd>
<dt><code>col_types = NULL</code></dt>
<dd>
<p><code>write_csv</code> will look at the first 1,000 rows (changeable with <code>guess_max</code>) and make an informed guess as to what data types to use for the columns. If you’d rather explicitly state the column types, you can do so by passing a vector of column types to the parameter <code>col_types</code>.</p>
</dd>
<dt><code>na = c("", "NA")</code></dt>
<dd>
<p>Indicates what values represent missing or NA values.</p>
</dd>
<dt><code>comment = ""</code></dt>
<dd>
<p>Indicates which lines to ignore as comments or metadata.</p>
</dd>
<dt><code>trim_ws = TRUE</code></dt>
<dd>
<p>Indicates whether to drop whitespace at the beginning and/or end of fields.</p>
</dd>
<dt><code>skip = 0</code></dt>
<dd>
<p>Indicates the number of rows to skip at the beginning of the file.</p>
</dd>
<dt><code>guess_max = min(1000, n_max)</code></dt>
<dd>
<p>Indicates the number of rows to consider when guessing column types.</p>
</dd>
</dl>
</div>
<div id="see_also-id028" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id028" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="NavigatingTheSoftware.html#recipe-id008">3.1</a>, <a href="NavigatingTheSoftware.html#recipe-id008">“Getting and Setting the Working Directory”</a>, for more about the current working directory
and Recipe <a href="InputAndOutput.html#recipe-id029">4.18</a>, <a href="InputAndOutput.html#recipe-id029">“Saving and Transporting Objects”</a>, for other ways to save data to files. For more info on reading and writing text files, see the <code>readr</code> vignette: <code>vignette(readr)</code>.</p>
</div>
</div>
<div id="recipe-id031" class="section level2 hasAnchor" number="4.10">
<h2><span class="header-section-number">4.10</span> Reading Tabular or CSV Data from the Web<a href="InputAndOutput.html#recipe-id031" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id031" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id031" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read data directly from the web into your R workspace.</p>
</div>
<div id="solution-id031" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id031" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>read_csv</code> or <code>read_table2</code> functions from the <code>readr</code> package,
using a URL instead of a filename. The functions will read directly from the remote server:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="InputAndOutput.html#cb214-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb214-2"><a href="InputAndOutput.html#cb214-2" tabindex="-1"></a></span>
<span id="cb214-3"><a href="InputAndOutput.html#cb214-3" tabindex="-1"></a>berkley <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&#39;http://bit.ly/barkley18&#39;</span>, <span class="at">comment =</span> <span class="st">&#39;#&#39;</span>)</span>
<span id="cb214-4"><a href="InputAndOutput.html#cb214-4" tabindex="-1"></a><span class="co">#&gt; Rows: 26 Columns: 3</span></span>
<span id="cb214-5"><a href="InputAndOutput.html#cb214-5" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb214-6"><a href="InputAndOutput.html#cb214-6" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb214-7"><a href="InputAndOutput.html#cb214-7" tabindex="-1"></a><span class="co">#&gt; chr  (2): Name, Location</span></span>
<span id="cb214-8"><a href="InputAndOutput.html#cb214-8" tabindex="-1"></a><span class="co">#&gt; time (1): Time</span></span>
<span id="cb214-9"><a href="InputAndOutput.html#cb214-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb214-10"><a href="InputAndOutput.html#cb214-10" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb214-11"><a href="InputAndOutput.html#cb214-11" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>You can also open a connection using the URL and then read from the
connection, which may be preferable for complicated files.</p>
</div>
<div id="discussion-id031" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id031" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The web is a gold mine of data. You could download the data into a file
and then read the file into R, but it’s more convenient to read directly
from the web. Give the URL to <code>read_csv</code>, <code>read_table2</code>, or another read function in <code>readr</code>
(depending upon the format of the data), and the data will be downloaded
and parsed for you. No fuss, no muss.</p>
<p>Aside from using a URL, this recipe is just like reading from a CSV file
(see Recipe <a href="InputAndOutput.html#recipe-id027">4.8</a>, <a href="InputAndOutput.html#recipe-id027">“Reading from CSV Files”</a>) or a complex file
(Recipe <a href="InputAndOutput.html#recipe-id098">4.15</a>, <a href="InputAndOutput.html#recipe-id098">“Reading Files with a Complex Structure”</a>), so all the
comments in those recipes apply here, too.</p>
<p>Remember that URLs work for FTP servers, not just HTTP servers. This
means that R can also read data from FTP sites using URLs:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="InputAndOutput.html#cb215-1" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> <span class="fu">read_table2</span>(<span class="st">&quot;ftp://ftp.example.com/download/data.txt&quot;</span>)</span></code></pre></div>
</div>
<div id="see_also-id031" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id031" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipes <a href="InputAndOutput.html#recipe-id027">4.8</a>, <a href="InputAndOutput.html#recipe-id027">“Reading from CSV Files”</a>, and <a href="InputAndOutput.html#recipe-id098">4.15</a>, <a href="InputAndOutput.html#recipe-id098">“Reading Files with a Complex Structure”</a>.</p>
</div>
</div>
<div id="recipe-readexcel" class="section level2 hasAnchor" number="4.11">
<h2><span class="header-section-number">4.11</span> Reading Data from Excel<a href="InputAndOutput.html#recipe-readexcel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-readexcel" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-readexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read data in from an Excel file.</p>
</div>
<div id="solution-readexcel" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-readexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>openxlsx</code> package makes reading Excel files easy.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="InputAndOutput.html#cb216-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb216-2"><a href="InputAndOutput.html#cb216-2" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="at">xlsxFile =</span> <span class="st">&quot;file.xlsx&quot;</span>,</span>
<span id="cb216-3"><a href="InputAndOutput.html#cb216-3" tabindex="-1"></a>                 <span class="at">sheet =</span> <span class="st">&#39;sheet_name&#39;</span>)</span></code></pre></div>
</div>
<div id="discussion-readexcel" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-readexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The package <code>openxlsx</code> is a good choice for both reading and writing Excel files with R. If we’re reading in an entire sheet, passing a filename and a sheet name to the <code>read.xlsx</code> function is a simple option. We need only pass in a filename and, if desired, the name of the sheet we want imported:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="InputAndOutput.html#cb217-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb217-2"><a href="InputAndOutput.html#cb217-2" tabindex="-1"></a></span>
<span id="cb217-3"><a href="InputAndOutput.html#cb217-3" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(<span class="at">xlsxFile =</span> <span class="st">&quot;data/iris_excel.xlsx&quot;</span>,</span>
<span id="cb217-4"><a href="InputAndOutput.html#cb217-4" tabindex="-1"></a>                 <span class="at">sheet =</span> <span class="st">&#39;iris_data&#39;</span>)</span>
<span id="cb217-5"><a href="InputAndOutput.html#cb217-5" tabindex="-1"></a><span class="fu">head</span>(df1, <span class="dv">3</span>)</span>
<span id="cb217-6"><a href="InputAndOutput.html#cb217-6" tabindex="-1"></a><span class="co">#&gt;   Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span></span>
<span id="cb217-7"><a href="InputAndOutput.html#cb217-7" tabindex="-1"></a><span class="co">#&gt; 1          5.1         3.5          1.4         0.2  setosa</span></span>
<span id="cb217-8"><a href="InputAndOutput.html#cb217-8" tabindex="-1"></a><span class="co">#&gt; 2          4.9         3.0          1.4         0.2  setosa</span></span>
<span id="cb217-9"><a href="InputAndOutput.html#cb217-9" tabindex="-1"></a><span class="co">#&gt; 3          4.7         3.2          1.3         0.2  setosa</span></span></code></pre></div>
<p>But <code>openxlsx</code> supports more complex workflows.</p>
<p>A common pattern is to read a named table out of an Excel file and into an R data frame. This is trickier because the sheet we’re reading from may have values outside of the named table and we want to only read in the named table range. We can use the functions in <code>openxlsx</code> to get the location of a table, then read that range of cells into a data frame.</p>
<p>First we load the entire workbook into R:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="InputAndOutput.html#cb218-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb218-2"><a href="InputAndOutput.html#cb218-2" tabindex="-1"></a>wb <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(<span class="st">&quot;data/excel_table_data.xlsx&quot;</span>)</span></code></pre></div>
<p>Then we can use the <code>getTables</code> function to get the names and ranges of all the Excel tables in the <code>input_data</code> sheet and select out the one table we want. In this example the Excel table we are after is named <code>example_data</code>:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="InputAndOutput.html#cb219-1" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">getTables</span>(wb, <span class="st">&#39;input_data&#39;</span>)</span>
<span id="cb219-2"><a href="InputAndOutput.html#cb219-2" tabindex="-1"></a>table_range_str <span class="ot">&lt;-</span> <span class="fu">names</span>(tables[tables <span class="sc">==</span> <span class="st">&#39;example_table&#39;</span>])</span>
<span id="cb219-3"><a href="InputAndOutput.html#cb219-3" tabindex="-1"></a>table_range_refs <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(table_range_str, <span class="st">&#39;:&#39;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb219-4"><a href="InputAndOutput.html#cb219-4" tabindex="-1"></a></span>
<span id="cb219-5"><a href="InputAndOutput.html#cb219-5" tabindex="-1"></a><span class="co"># use a regex to extract out the row numbers</span></span>
<span id="cb219-6"><a href="InputAndOutput.html#cb219-6" tabindex="-1"></a>table_range_row_num <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[^0-9.]&quot;</span>, <span class="st">&quot;&quot;</span>, table_range_refs)</span>
<span id="cb219-7"><a href="InputAndOutput.html#cb219-7" tabindex="-1"></a></span>
<span id="cb219-8"><a href="InputAndOutput.html#cb219-8" tabindex="-1"></a><span class="co"># extract out the column numbers</span></span>
<span id="cb219-9"><a href="InputAndOutput.html#cb219-9" tabindex="-1"></a>table_range_col_num <span class="ot">&lt;-</span> <span class="fu">convertFromExcelRef</span>(table_range_refs)</span></code></pre></div>
<p>Now the vector <code>table_range_col_num</code> contains the column numbers of our named table, while <code>table_range_row_num</code> contains the row numbers.
We can then use the <code>read.xlsx</code> function to pull in only the rows and columns we want.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="InputAndOutput.html#cb220-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.xlsx</span>(</span>
<span id="cb220-2"><a href="InputAndOutput.html#cb220-2" tabindex="-1"></a>  <span class="at">xlsxFile =</span> <span class="st">&quot;data/excel_table_data.xlsx&quot;</span>,</span>
<span id="cb220-3"><a href="InputAndOutput.html#cb220-3" tabindex="-1"></a>  <span class="at">sheet =</span> <span class="st">&#39;input_data&#39;</span>,</span>
<span id="cb220-4"><a href="InputAndOutput.html#cb220-4" tabindex="-1"></a>  <span class="at">cols =</span> table_range_col_num[<span class="dv">1</span>]<span class="sc">:</span>table_range_col_num[<span class="dv">2</span>],</span>
<span id="cb220-5"><a href="InputAndOutput.html#cb220-5" tabindex="-1"></a>  <span class="at">rows =</span> table_range_row_num[<span class="dv">1</span>]<span class="sc">:</span>table_range_row_num[<span class="dv">2</span>]</span>
<span id="cb220-6"><a href="InputAndOutput.html#cb220-6" tabindex="-1"></a>)</span></code></pre></div>
<p>While this may seem complicated, this design pattern can save a lot of hassle when sharing data with analysts who are using highly structured Excel files that include named tables.</p>
</div>
<div id="see_also-readexcel" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-readexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vignette for <code>openxlsx</code> by installing <code>openxlsx</code> and running: <code>vignette('Introduction', package='openxlsx')</code></p>
<p>The <a href="https://readxl.tidyverse.org/"><code>readxl</code> package</a> is part of the tidyverse and provides fast, simple reading of Excel files. However, <code>readxl</code> does not currently support named Excel tables.</p>
<p>The <a href="https://cran.r-project.org/web/packages/writexl/index.html"><code>writexl</code> package</a> is a fast and lightweight (no dependencies) package for writing Excel files.</p>
<p>Recipe <a href="InputAndOutput.html#recipe-writeexcel">4.12</a>, <a href="InputAndOutput.html#recipe-writeexcel">“Writing a Data Frame to Excel”</a></p>
</div>
</div>
<div id="recipe-writeexcel" class="section level2 hasAnchor" number="4.12">
<h2><span class="header-section-number">4.12</span> Writing a Data Frame to Excel<a href="InputAndOutput.html#recipe-writeexcel" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-writeexcel" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-writeexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to write an R data frame to an Excel file.</p>
</div>
<div id="solution-writeexcel" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-writeexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>openxlsx</code> package makes writing to Excel files relatively easy. While there are lots of options in <code>openxlsx</code>, a typical pattern is to specify an Excel filename and a sheet name:</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="InputAndOutput.html#cb221-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb221-2"><a href="InputAndOutput.html#cb221-2" tabindex="-1"></a><span class="fu">write.xlsx</span>(df,</span>
<span id="cb221-3"><a href="InputAndOutput.html#cb221-3" tabindex="-1"></a>           <span class="at">sheetName =</span> <span class="st">&quot;some_sheet&quot;</span>,</span>
<span id="cb221-4"><a href="InputAndOutput.html#cb221-4" tabindex="-1"></a>           <span class="at">file =</span> <span class="st">&quot;out_file.xlsx&quot;</span>)</span></code></pre></div>
</div>
<div id="discussion-writeexcel" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-writeexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>openxlsx</code> package has a huge number of options for controlling many aspects of the Excel object model. We can use it to set cell colors, define named ranges, and set cell outlines, for example. But it has a few helper functions like <code>write.xlsx</code> that make simple tasks super easy.</p>
<p>When businesses work with Excel, it’s a good practice to keep all input data in an Excel file in a named Excel table, which makes accessing the data easier and less error prone. However, if you use <code>openxlsx</code> to overwrite an Excel table in one of the sheets, you run the risk that the new data may contain fewer rows than the Excel table it replaces. That could cause errors, as you would end up with old data and new data in contiguous rows. The solution is to first delete an existing Excel table, then add new data back into the same location and assign the new data to a named Excel table. To do this we need to use the more advanced Excel manipulation features of <code>openxlsx</code>.</p>
<p>First we use <code>loadWorkbook</code> to read the Excel workbook into R in its entirety:</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="InputAndOutput.html#cb222-1" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb222-2"><a href="InputAndOutput.html#cb222-2" tabindex="-1"></a></span>
<span id="cb222-3"><a href="InputAndOutput.html#cb222-3" tabindex="-1"></a>wb <span class="ot">&lt;-</span> <span class="fu">loadWorkbook</span>(<span class="st">&quot;data/excel_table_data.xlsx&quot;</span>)</span></code></pre></div>
<p>Before we delete the table, we want to extract the table’s starting row and column.</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="InputAndOutput.html#cb223-1" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">getTables</span>(wb, <span class="st">&#39;input_data&#39;</span>)</span>
<span id="cb223-2"><a href="InputAndOutput.html#cb223-2" tabindex="-1"></a>table_range_str <span class="ot">&lt;-</span> <span class="fu">names</span>(tables[tables <span class="sc">==</span> <span class="st">&#39;example_table&#39;</span>])</span>
<span id="cb223-3"><a href="InputAndOutput.html#cb223-3" tabindex="-1"></a>table_range_refs <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(table_range_str, <span class="st">&#39;:&#39;</span>)[[<span class="dv">1</span>]]</span>
<span id="cb223-4"><a href="InputAndOutput.html#cb223-4" tabindex="-1"></a></span>
<span id="cb223-5"><a href="InputAndOutput.html#cb223-5" tabindex="-1"></a><span class="co"># use a regex to extract out the starting row number</span></span>
<span id="cb223-6"><a href="InputAndOutput.html#cb223-6" tabindex="-1"></a>table_row_num <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">&quot;[^0-9.]&quot;</span>, <span class="st">&quot;&quot;</span>, table_range_refs)[[<span class="dv">1</span>]]</span>
<span id="cb223-7"><a href="InputAndOutput.html#cb223-7" tabindex="-1"></a></span>
<span id="cb223-8"><a href="InputAndOutput.html#cb223-8" tabindex="-1"></a><span class="co"># extract out the starting column number</span></span>
<span id="cb223-9"><a href="InputAndOutput.html#cb223-9" tabindex="-1"></a>table_col_num <span class="ot">&lt;-</span> <span class="fu">convertFromExcelRef</span>(table_range_refs)[[<span class="dv">1</span>]]</span></code></pre></div>
<p>Then we can use the <code>removeTable</code> function to remove the existing named Excel table:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="InputAndOutput.html#cb224-1" tabindex="-1"></a><span class="fu">removeTable</span>(<span class="at">wb =</span> wb,</span>
<span id="cb224-2"><a href="InputAndOutput.html#cb224-2" tabindex="-1"></a>            <span class="at">sheet =</span> <span class="st">&#39;input_data&#39;</span>,</span>
<span id="cb224-3"><a href="InputAndOutput.html#cb224-3" tabindex="-1"></a>            <span class="at">table =</span> <span class="st">&#39;example_table&#39;</span>)</span></code></pre></div>
<p>Then we can use <code>writeDataTable</code> to write the <code>iris</code> data frame (which comes with R) to write data back into our workbook object in R.</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="InputAndOutput.html#cb225-1" tabindex="-1"></a><span class="fu">writeDataTable</span>(</span>
<span id="cb225-2"><a href="InputAndOutput.html#cb225-2" tabindex="-1"></a>  <span class="at">wb =</span> wb,</span>
<span id="cb225-3"><a href="InputAndOutput.html#cb225-3" tabindex="-1"></a>  <span class="at">sheet =</span> <span class="st">&#39;input_data&#39;</span>,</span>
<span id="cb225-4"><a href="InputAndOutput.html#cb225-4" tabindex="-1"></a>  <span class="at">x =</span> iris,</span>
<span id="cb225-5"><a href="InputAndOutput.html#cb225-5" tabindex="-1"></a>  <span class="at">startCol =</span> table_col_num,</span>
<span id="cb225-6"><a href="InputAndOutput.html#cb225-6" tabindex="-1"></a>  <span class="at">startRow =</span> table_row_num,</span>
<span id="cb225-7"><a href="InputAndOutput.html#cb225-7" tabindex="-1"></a>  <span class="at">tableStyle =</span> <span class="st">&quot;TableStyleLight9&quot;</span>,</span>
<span id="cb225-8"><a href="InputAndOutput.html#cb225-8" tabindex="-1"></a>  <span class="at">tableName =</span> <span class="st">&#39;example_table&#39;</span></span>
<span id="cb225-9"><a href="InputAndOutput.html#cb225-9" tabindex="-1"></a>)</span></code></pre></div>
<p>At this point we could save the workbook and our table would be updated. However, it’s a good idea to save some metadata in the workbook to let others know exactly when the data was refreshed. We can do this with the <code>writeData</code> function, then save the workbook to a file and overwrite the original file. In this example, we’ll put the metadata text in cell <code>B:5</code>, then save the workbook back to a file, overwriting the original.</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="InputAndOutput.html#cb226-1" tabindex="-1"></a><span class="fu">writeData</span>(</span>
<span id="cb226-2"><a href="InputAndOutput.html#cb226-2" tabindex="-1"></a>  <span class="at">wb =</span> wb,</span>
<span id="cb226-3"><a href="InputAndOutput.html#cb226-3" tabindex="-1"></a>  <span class="at">sheet =</span> <span class="st">&#39;input_data&#39;</span>,</span>
<span id="cb226-4"><a href="InputAndOutput.html#cb226-4" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">paste</span>(<span class="st">&#39;example_table data refreshed on:&#39;</span>, <span class="fu">Sys.time</span>()),</span>
<span id="cb226-5"><a href="InputAndOutput.html#cb226-5" tabindex="-1"></a>  <span class="at">startCol =</span> <span class="dv">2</span>,</span>
<span id="cb226-6"><a href="InputAndOutput.html#cb226-6" tabindex="-1"></a>  <span class="at">startRow =</span> <span class="dv">5</span></span>
<span id="cb226-7"><a href="InputAndOutput.html#cb226-7" tabindex="-1"></a>)</span>
<span id="cb226-8"><a href="InputAndOutput.html#cb226-8" tabindex="-1"></a></span>
<span id="cb226-9"><a href="InputAndOutput.html#cb226-9" tabindex="-1"></a><span class="do">## then save the workbook</span></span>
<span id="cb226-10"><a href="InputAndOutput.html#cb226-10" tabindex="-1"></a><span class="fu">saveWorkbook</span>(<span class="at">wb =</span> wb,</span>
<span id="cb226-11"><a href="InputAndOutput.html#cb226-11" tabindex="-1"></a>             <span class="at">file =</span> <span class="st">&quot;data/excel_table_data.xlsx&quot;</span>,</span>
<span id="cb226-12"><a href="InputAndOutput.html#cb226-12" tabindex="-1"></a>             <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>The resulting Excel sheet looks as shown in Figure <a href="InputAndOutput.html#fig:excel-table">4.2</a>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:excel-table"></span>
<img src="images_v2/excel_table_data.png" alt="Excel table and metadata text" width="85%" />
<p class="caption">
Figure 4.2: Excel table and metadata text
</p>
</div>
</div>
<div id="see_also-writeexcel" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-writeexcel" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vignette for <code>openxlsx</code> by installing <code>openxlsx</code> and running: <code>vignette('Introduction', package='openxlsx')</code></p>
<p>The <a href="https://readxl.tidyverse.org/"><code>readxl</code> package</a> is part of the tidyverse and provides fast, simple reading of Excel files.</p>
<p>The <a href="https://cran.r-project.org/web/packages/writexl/index.html"><code>writexl</code> package</a> is a fast and lightweight (no dependencies) package for writing Excel files.</p>
<p>Recipe <a href="InputAndOutput.html#recipe-readexcel">4.11</a>, <a href="InputAndOutput.html#recipe-readexcel">“Reading Data from Excel”</a></p>
</div>
</div>
<div id="recipe-readsas" class="section level2 hasAnchor" number="4.13">
<h2><span class="header-section-number">4.13</span> Reading Data from a SAS file<a href="InputAndOutput.html#recipe-readsas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-readsas" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-readsas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read a SAS dataset into an R data frame.</p>
</div>
<div id="solution-readsas" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-readsas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>sas7bdat</code> package supports reading SAS <em>sas7bdat</em> files into R.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="InputAndOutput.html#cb227-1" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb227-2"><a href="InputAndOutput.html#cb227-2" tabindex="-1"></a></span>
<span id="cb227-3"><a href="InputAndOutput.html#cb227-3" tabindex="-1"></a>sas_movie_data <span class="ot">&lt;-</span> <span class="fu">read_sas</span>(<span class="st">&quot;data/movies.sas7bdat&quot;</span>)</span></code></pre></div>
</div>
<div id="discussion-readsas" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-readsas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>SAS V7 and beyond all support the <em>sas7bdat</em> file format. The <code>read_sas</code> function in <code>haven</code> supports reading the <em>sas7bdat</em> file format including variable labels. If your SAS file has variable labels, when they are inported into R they will be stored in the <code>label</code> attributes of the data frame. These labels will not be printed by default. You can see the labels by opening the data frame in RStudio, or by calling the <code>attributes</code> Base R function on each column:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="InputAndOutput.html#cb228-1" tabindex="-1"></a><span class="fu">sapply</span>(sas_movie_data, attributes)</span>
<span id="cb228-2"><a href="InputAndOutput.html#cb228-2" tabindex="-1"></a><span class="co">#&gt; $Movie</span></span>
<span id="cb228-3"><a href="InputAndOutput.html#cb228-3" tabindex="-1"></a><span class="co">#&gt; $Movie$label</span></span>
<span id="cb228-4"><a href="InputAndOutput.html#cb228-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Movie&quot;</span></span>
<span id="cb228-5"><a href="InputAndOutput.html#cb228-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-6"><a href="InputAndOutput.html#cb228-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-7"><a href="InputAndOutput.html#cb228-7" tabindex="-1"></a><span class="co">#&gt; $Type</span></span>
<span id="cb228-8"><a href="InputAndOutput.html#cb228-8" tabindex="-1"></a><span class="co">#&gt; $Type$label</span></span>
<span id="cb228-9"><a href="InputAndOutput.html#cb228-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Type&quot;</span></span>
<span id="cb228-10"><a href="InputAndOutput.html#cb228-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-11"><a href="InputAndOutput.html#cb228-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-12"><a href="InputAndOutput.html#cb228-12" tabindex="-1"></a><span class="co">#&gt; $Rating</span></span>
<span id="cb228-13"><a href="InputAndOutput.html#cb228-13" tabindex="-1"></a><span class="co">#&gt; $Rating$label</span></span>
<span id="cb228-14"><a href="InputAndOutput.html#cb228-14" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Rating&quot;</span></span>
<span id="cb228-15"><a href="InputAndOutput.html#cb228-15" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-16"><a href="InputAndOutput.html#cb228-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-17"><a href="InputAndOutput.html#cb228-17" tabindex="-1"></a><span class="co">#&gt; $Year</span></span>
<span id="cb228-18"><a href="InputAndOutput.html#cb228-18" tabindex="-1"></a><span class="co">#&gt; $Year$label</span></span>
<span id="cb228-19"><a href="InputAndOutput.html#cb228-19" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Year&quot;</span></span>
<span id="cb228-20"><a href="InputAndOutput.html#cb228-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-21"><a href="InputAndOutput.html#cb228-21" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-22"><a href="InputAndOutput.html#cb228-22" tabindex="-1"></a><span class="co">#&gt; $Domestic__</span></span>
<span id="cb228-23"><a href="InputAndOutput.html#cb228-23" tabindex="-1"></a><span class="co">#&gt; $Domestic__$label</span></span>
<span id="cb228-24"><a href="InputAndOutput.html#cb228-24" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Domestic $&quot;</span></span>
<span id="cb228-25"><a href="InputAndOutput.html#cb228-25" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-26"><a href="InputAndOutput.html#cb228-26" tabindex="-1"></a><span class="co">#&gt; $Domestic__$format.sas</span></span>
<span id="cb228-27"><a href="InputAndOutput.html#cb228-27" tabindex="-1"></a><span class="co">#&gt; [1] &quot;F&quot;</span></span>
<span id="cb228-28"><a href="InputAndOutput.html#cb228-28" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-29"><a href="InputAndOutput.html#cb228-29" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-30"><a href="InputAndOutput.html#cb228-30" tabindex="-1"></a><span class="co">#&gt; $Worldwide__</span></span>
<span id="cb228-31"><a href="InputAndOutput.html#cb228-31" tabindex="-1"></a><span class="co">#&gt; $Worldwide__$label</span></span>
<span id="cb228-32"><a href="InputAndOutput.html#cb228-32" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Worldwide $&quot;</span></span>
<span id="cb228-33"><a href="InputAndOutput.html#cb228-33" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-34"><a href="InputAndOutput.html#cb228-34" tabindex="-1"></a><span class="co">#&gt; $Worldwide__$format.sas</span></span>
<span id="cb228-35"><a href="InputAndOutput.html#cb228-35" tabindex="-1"></a><span class="co">#&gt; [1] &quot;F&quot;</span></span>
<span id="cb228-36"><a href="InputAndOutput.html#cb228-36" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-37"><a href="InputAndOutput.html#cb228-37" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb228-38"><a href="InputAndOutput.html#cb228-38" tabindex="-1"></a><span class="co">#&gt; $Director</span></span>
<span id="cb228-39"><a href="InputAndOutput.html#cb228-39" tabindex="-1"></a><span class="co">#&gt; $Director$label</span></span>
<span id="cb228-40"><a href="InputAndOutput.html#cb228-40" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Director&quot;</span></span></code></pre></div>
</div>
<div id="see_also-readsas" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-readsas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>sas7bdat</code> package is much slower on large files than <code>haven</code>, but it has more elaborate support for file attributes. If the SAS metadata is important to you, then you should investigate <code>sas7bdat::read.sas7bdat</code>.</p>
</div>
</div>
<div id="recipe-id246" class="section level2 hasAnchor" number="4.14">
<h2><span class="header-section-number">4.14</span> Reading Data from HTML Tables<a href="InputAndOutput.html#recipe-id246" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id246" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id246" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to read data from an HTML table on the web.</p>
</div>
<div id="solution-id246" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id246" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>read_html</code> and <code>html_table</code> functions in the <code>rvest</code> package. To read all
tables on the page, do the following:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="InputAndOutput.html#cb229-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb229-2"><a href="InputAndOutput.html#cb229-2" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb229-3"><a href="InputAndOutput.html#cb229-3" tabindex="-1"></a></span>
<span id="cb229-4"><a href="InputAndOutput.html#cb229-4" tabindex="-1"></a>all_tables <span class="ot">&lt;-</span></span>
<span id="cb229-5"><a href="InputAndOutput.html#cb229-5" tabindex="-1"></a>  <span class="fu">read_html</span>(<span class="st">&quot;URL&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb229-6"><a href="InputAndOutput.html#cb229-6" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Note that <code>rvest</code> is installed when you run <code>install.packages('tidyverse')</code>, although it is not a core tidyverse package. So you must explicitly load the package.</p>
</div>
<div id="discussion-id246" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id246" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Web pages can contain several HTML tables. Calling <code>read_html(*url*)</code> and then piping that to <code>html_table</code>
reads all tables on the page and returns them in a list. This can be
useful for exploring a page, but it’s annoying if you want just one
specific table. In that case, use <code>extract2(*n*)</code> to select the <em>n</em>th table.</p>
<p>Here we can extract all tables from a Wikipedia article:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="InputAndOutput.html#cb230-1" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb230-2"><a href="InputAndOutput.html#cb230-2" tabindex="-1"></a></span>
<span id="cb230-3"><a href="InputAndOutput.html#cb230-3" tabindex="-1"></a>all_tables <span class="ot">&lt;-</span></span>
<span id="cb230-4"><a href="InputAndOutput.html#cb230-4" tabindex="-1"></a>  <span class="fu">read_html</span>(<span class="st">&quot;https://en.wikipedia.org/wiki/Aviation_accidents_and_incidents&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb230-5"><a href="InputAndOutput.html#cb230-5" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p><code>read_html</code> puts all tables from the HTML document into the output list. To pull a single table from that list, you can use the function <code>extract2</code> from the <code>magrittr</code> package:</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="InputAndOutput.html#cb231-1" tabindex="-1"></a>out_table <span class="ot">&lt;-</span></span>
<span id="cb231-2"><a href="InputAndOutput.html#cb231-2" tabindex="-1"></a>  all_tables <span class="sc">%&gt;%</span></span>
<span id="cb231-3"><a href="InputAndOutput.html#cb231-3" tabindex="-1"></a>  magrittr<span class="sc">::</span><span class="fu">extract2</span>(<span class="dv">2</span>)</span>
<span id="cb231-4"><a href="InputAndOutput.html#cb231-4" tabindex="-1"></a></span>
<span id="cb231-5"><a href="InputAndOutput.html#cb231-5" tabindex="-1"></a><span class="fu">head</span>(out_table)</span>
<span id="cb231-6"><a href="InputAndOutput.html#cb231-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 0 × 2</span></span>
<span id="cb231-7"><a href="InputAndOutput.html#cb231-7" tabindex="-1"></a><span class="co">#&gt; # ℹ 2 variables:  &lt;lgl&gt;,</span></span>
<span id="cb231-8"><a href="InputAndOutput.html#cb231-8" tabindex="-1"></a><span class="co">#&gt; #   This article may be in need of reorganization to comply with Wikipedia&#39;s layout guidelines. Please help by editing the article to make improvements to the overall structure.  (September 2024) (Learn how and when to remove this message) &lt;lgl&gt;</span></span></code></pre></div>
<p>Two common parameters for the <code>html_table</code> function are <code>fill=TRUE</code>, which fills in missing values with <code>NA</code>, and <code>header=TRUE</code>, which indicates that the first row contains the header names.</p>
<p>The following example loads all tables from the Wikipedia page entitled
“World population”:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="InputAndOutput.html#cb232-1" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">&#39;http://en.wikipedia.org/wiki/World_population&#39;</span></span>
<span id="cb232-2"><a href="InputAndOutput.html#cb232-2" tabindex="-1"></a>tbls <span class="ot">&lt;-</span> <span class="fu">read_html</span>(url) <span class="sc">%&gt;%</span></span>
<span id="cb232-3"><a href="InputAndOutput.html#cb232-3" tabindex="-1"></a>  <span class="fu">html_table</span>(<span class="at">fill =</span> <span class="cn">TRUE</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>As it turns out, that page contains 23 tables (or things that <code>html_table</code> thinks might be tables):</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="InputAndOutput.html#cb233-1" tabindex="-1"></a><span class="fu">length</span>(tbls)</span>
<span id="cb233-2"><a href="InputAndOutput.html#cb233-2" tabindex="-1"></a><span class="co">#&gt; [1] 31</span></span></code></pre></div>
<p>In this example we care only about the sixth table (which lists the
largest populations by country), so we can either access that element using brackets, <code>tbls[[6]]</code>, or we can pipe it into the <code>extract2</code> function from the <code>magrittr</code> package:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="InputAndOutput.html#cb234-1" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb234-2"><a href="InputAndOutput.html#cb234-2" tabindex="-1"></a>tbl <span class="ot">&lt;-</span> tbls <span class="sc">%&gt;%</span></span>
<span id="cb234-3"><a href="InputAndOutput.html#cb234-3" tabindex="-1"></a>  <span class="fu">extract2</span>(<span class="dv">6</span>)</span>
<span id="cb234-4"><a href="InputAndOutput.html#cb234-4" tabindex="-1"></a></span>
<span id="cb234-5"><a href="InputAndOutput.html#cb234-5" tabindex="-1"></a><span class="fu">head</span>(tbl, <span class="dv">2</span>)</span>
<span id="cb234-6"><a href="InputAndOutput.html#cb234-6" tabindex="-1"></a><span class="co">#&gt; # A tibble: 2 × 5</span></span>
<span id="cb234-7"><a href="InputAndOutput.html#cb234-7" tabindex="-1"></a><span class="co">#&gt;   `Country / Dependency` Population    `% ofworld` Date   Source (official or …¹</span></span>
<span id="cb234-8"><a href="InputAndOutput.html#cb234-8" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;                  &lt;chr&gt;         &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;                 </span></span>
<span id="cb234-9"><a href="InputAndOutput.html#cb234-9" tabindex="-1"></a><span class="co">#&gt; 1 India                  1,425,775,850 17.5%       14 Ap… UN projection[89]     </span></span>
<span id="cb234-10"><a href="InputAndOutput.html#cb234-10" tabindex="-1"></a><span class="co">#&gt; 2 China                  1,409,670,000 17.3%       17 Ja… National annual estim…</span></span>
<span id="cb234-11"><a href="InputAndOutput.html#cb234-11" tabindex="-1"></a><span class="co">#&gt; # ℹ abbreviated name: ¹​`Source (official or fromthe United Nations)`</span></span></code></pre></div>
<p>The <code>extract2</code> function is a “pipe friendly” version of the R <code>[[i]]</code> syntax. So it pulls out a single list element from a list. The <code>extract</code> function is analogous to <code>[i]</code>, which returns element <em>i</em> from the original list into a list of length 1.</p>
<p>In that table, columns 2 and 3 contain the country name and population,
respectively:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="InputAndOutput.html#cb235-1" tabindex="-1"></a>tbl[, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span>
<span id="cb235-2"><a href="InputAndOutput.html#cb235-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span id="cb235-3"><a href="InputAndOutput.html#cb235-3" tabindex="-1"></a><span class="co">#&gt;   Population    `% ofworld`</span></span>
<span id="cb235-4"><a href="InputAndOutput.html#cb235-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;      </span></span>
<span id="cb235-5"><a href="InputAndOutput.html#cb235-5" tabindex="-1"></a><span class="co">#&gt; 1 1,425,775,850 17.5%      </span></span>
<span id="cb235-6"><a href="InputAndOutput.html#cb235-6" tabindex="-1"></a><span class="co">#&gt; 2 1,409,670,000 17.3%      </span></span>
<span id="cb235-7"><a href="InputAndOutput.html#cb235-7" tabindex="-1"></a><span class="co">#&gt; 3 337,189,834   4.14%      </span></span>
<span id="cb235-8"><a href="InputAndOutput.html#cb235-8" tabindex="-1"></a><span class="co">#&gt; 4 278,696,200   3.42%      </span></span>
<span id="cb235-9"><a href="InputAndOutput.html#cb235-9" tabindex="-1"></a><span class="co">#&gt; 5 229,488,994   2.82%      </span></span>
<span id="cb235-10"><a href="InputAndOutput.html#cb235-10" tabindex="-1"></a><span class="co">#&gt; 6 216,746,934   2.66%      </span></span>
<span id="cb235-11"><a href="InputAndOutput.html#cb235-11" tabindex="-1"></a><span class="co">#&gt; # ℹ 4 more rows</span></span></code></pre></div>
<p>Right away, we can see problems with the data: China and Russia have <code>[note 4]</code> and <code>[note 5]</code> appended to their names. On the
Wikipedia website, that was a footnote reference, but now it’s just a
bit of unwanted text. Adding insult to injury, the population numbers
have embedded commas, so you cannot easily convert them to raw numbers.
All these problems can be solved by some string processing, but each
problem adds at least one more step to the process.</p>
<p>This illustrates the main obstacle to reading HTML tables. HTML was
designed for presenting information to people, not to computers. When
you “scrape” information off an HTML page, you get stuff that’s useful
to people but annoying to computers. If you ever have a choice, choose
instead a computer-oriented data representation such as XML, JSON, or
CSV.</p>
<p>The <code>read_html(*url*)</code> and <code>html_table</code> functions are part of the <code>rvest</code> package, which (by necessity) is large and complex. Any time you pull data from a site designed for human readers, not machines, expect that you will have to do post-processing to clean up the bits and pieces the machine leaves messy.</p>
</div>
<div id="see_also-id246" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id246" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="NavigatingTheSoftware.html#recipe-id012">3.10</a>, <a href="NavigatingTheSoftware.html#recipe-id012">“Installing Packages from CRAN”</a>, for downloading and installing packages such as
the <code>rvest</code> package.</p>
</div>
</div>
<div id="recipe-id098" class="section level2 hasAnchor" number="4.15">
<h2><span class="header-section-number">4.15</span> Reading Files with a Complex Structure<a href="InputAndOutput.html#recipe-id098" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id098" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id098" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You are reading data from a file that has a complex or irregular
structure.</p>
</div>
<div id="solution-id098" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id098" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p>Use the <code>readLines</code> function to read individual lines; then process
them as strings to extract data items.</p></li>
<li><p>Alternatively, use the <code>scan</code> function to read individual tokens and
use the argument <code>what</code> to describe the stream of tokens in
your file. The function can convert tokens into data and then
assemble the data into records.</p></li>
</ul>
</div>
<div id="discussion-id098" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id098" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Life would be simple and beautiful if all our data files were organized
into neat tables with cleanly delimited data. We could read those files
using one of the functions in the <code>readr</code> package and get on with living.</p>
<p>Unfortunately, we don’t live in a land of rainbows and unicorn kisses.</p>
<p>You will eventually encounter a funky file format, and your job is to read the file contents into R.</p>
<p>The <code>read.table</code> and <code>read.csv</code> functions are file-oriented and probably won’t help.
However, the <code>readLines</code> and <code>scan</code> functions are useful here because
they let you process the individual lines and even tokens of the file.</p>
<p>The <code>readLines</code> function is pretty simple. It reads lines from a file
and returns them as a list of character strings:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="InputAndOutput.html#cb236-1" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;input.txt&quot;</span>)</span></code></pre></div>
<p>You can limit the number of lines by using the <code>n</code> parameter, which
gives the maximum number of lines to be read:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="InputAndOutput.html#cb237-1" tabindex="-1"></a>lines <span class="ot">&lt;-</span> <span class="fu">readLines</span>(<span class="st">&quot;input.txt&quot;</span>, <span class="at">n =</span> <span class="dv">10</span>)       <span class="co"># Read 10 lines and stop</span></span></code></pre></div>
<p>The <code>scan</code> function is much richer. It reads one token at a time and
handles it according to your instructions. The first argument is either
a filename or a connection. The second
argument is called <code>what</code>, and it describes the tokens that <code>scan</code>
should expect in the input file. The description is cryptic but quite
clever:</p>
<dl>
<dt><code>what=numeric(0)</code></dt>
<dd>
<p>Interprets the next token as a number.</p>
</dd>
<dt><code>what=integer(0)</code></dt>
<dd>
<p>Interprets the next token as an integer.</p>
</dd>
<dt><code>what=complex(0)</code></dt>
<dd>
<p>Interprets the next token as a complex number.</p>
</dd>
<dt><code>what=character(0)</code></dt>
<dd>
<p>Interprets the next token as a character string.</p>
</dd>
<dt><code>what=logical(0)</code></dt>
<dd>
<p>Interprets the next token as a logical value.</p>
</dd>
</dl>
<p>The <code>scan</code> function will apply the given pattern repeatedly until all
data is read.</p>
<p>Suppose your file is simply a sequence of numbers, like this:</p>
<pre><code>2355.09 2246.73 1738.74 1841.01 2027.85</code></pre>
<p>Use <code>what=numeric(0)</code> to say, “My file is a sequence of tokens, each of
which is a number”:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="InputAndOutput.html#cb239-1" tabindex="-1"></a>singles <span class="ot">&lt;-</span> <span class="fu">scan</span>(<span class="st">&quot;./data/singles.txt&quot;</span>, <span class="at">what =</span> <span class="fu">numeric</span>(<span class="dv">0</span>))</span>
<span id="cb239-2"><a href="InputAndOutput.html#cb239-2" tabindex="-1"></a>singles</span>
<span id="cb239-3"><a href="InputAndOutput.html#cb239-3" tabindex="-1"></a><span class="co">#&gt; [1] 2355.09 2246.73 1738.74 1841.01 2027.85</span></span></code></pre></div>
<p>A key feature of <code>scan</code> is that the <code>what</code> can be a list containing
several token types. The <code>scan</code> function will assume your file is a
repeating sequence of those types. Suppose your file contains triplets
of data, like this:</p>
<pre><code>15-Oct-87 2439.78 2345.63 16-Oct-87 2396.21 2207.73
19-Oct-87 2164.16 1677.55 20-Oct-87 2067.47 1616.21
21-Oct-87 2081.07 1951.76</code></pre>
<p>Use a list to tell <code>scan</code> that it should expect a repeating, three-token
sequence:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="InputAndOutput.html#cb241-1" tabindex="-1"></a>triples <span class="ot">&lt;-</span></span>
<span id="cb241-2"><a href="InputAndOutput.html#cb241-2" tabindex="-1"></a>  <span class="fu">scan</span>(<span class="st">&quot;./data/triples.txt&quot;</span>,</span>
<span id="cb241-3"><a href="InputAndOutput.html#cb241-3" tabindex="-1"></a>       <span class="at">what =</span> <span class="fu">list</span>(<span class="fu">character</span>(<span class="dv">0</span>), <span class="fu">numeric</span>(<span class="dv">0</span>), <span class="fu">numeric</span>(<span class="dv">0</span>)))</span>
<span id="cb241-4"><a href="InputAndOutput.html#cb241-4" tabindex="-1"></a>triples</span>
<span id="cb241-5"><a href="InputAndOutput.html#cb241-5" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb241-6"><a href="InputAndOutput.html#cb241-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;15-Oct-87&quot; &quot;16-Oct-87&quot; &quot;19-Oct-87&quot; &quot;20-Oct-87&quot; &quot;21-Oct-87&quot;</span></span>
<span id="cb241-7"><a href="InputAndOutput.html#cb241-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb241-8"><a href="InputAndOutput.html#cb241-8" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb241-9"><a href="InputAndOutput.html#cb241-9" tabindex="-1"></a><span class="co">#&gt; [1] 2439.78 2396.21 2164.16 2067.47 2081.07</span></span>
<span id="cb241-10"><a href="InputAndOutput.html#cb241-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb241-11"><a href="InputAndOutput.html#cb241-11" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb241-12"><a href="InputAndOutput.html#cb241-12" tabindex="-1"></a><span class="co">#&gt; [1] 2345.63 2207.73 1677.55 1616.21 1951.76</span></span></code></pre></div>
<p>Give names to the list elements, and <code>scan</code> will assign those names to
the data:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="InputAndOutput.html#cb242-1" tabindex="-1"></a>triples <span class="ot">&lt;-</span> <span class="fu">scan</span>(<span class="st">&quot;./data/triples.txt&quot;</span>,</span>
<span id="cb242-2"><a href="InputAndOutput.html#cb242-2" tabindex="-1"></a>                <span class="at">what =</span> <span class="fu">list</span>(</span>
<span id="cb242-3"><a href="InputAndOutput.html#cb242-3" tabindex="-1"></a>                  <span class="at">date =</span> <span class="fu">character</span>(<span class="dv">0</span>),</span>
<span id="cb242-4"><a href="InputAndOutput.html#cb242-4" tabindex="-1"></a>                  <span class="at">high =</span> <span class="fu">numeric</span>(<span class="dv">0</span>),</span>
<span id="cb242-5"><a href="InputAndOutput.html#cb242-5" tabindex="-1"></a>                  <span class="at">low =</span> <span class="fu">numeric</span>(<span class="dv">0</span>)</span>
<span id="cb242-6"><a href="InputAndOutput.html#cb242-6" tabindex="-1"></a>                ))</span>
<span id="cb242-7"><a href="InputAndOutput.html#cb242-7" tabindex="-1"></a>triples</span>
<span id="cb242-8"><a href="InputAndOutput.html#cb242-8" tabindex="-1"></a><span class="co">#&gt; $date</span></span>
<span id="cb242-9"><a href="InputAndOutput.html#cb242-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;15-Oct-87&quot; &quot;16-Oct-87&quot; &quot;19-Oct-87&quot; &quot;20-Oct-87&quot; &quot;21-Oct-87&quot;</span></span>
<span id="cb242-10"><a href="InputAndOutput.html#cb242-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb242-11"><a href="InputAndOutput.html#cb242-11" tabindex="-1"></a><span class="co">#&gt; $high</span></span>
<span id="cb242-12"><a href="InputAndOutput.html#cb242-12" tabindex="-1"></a><span class="co">#&gt; [1] 2439.78 2396.21 2164.16 2067.47 2081.07</span></span>
<span id="cb242-13"><a href="InputAndOutput.html#cb242-13" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb242-14"><a href="InputAndOutput.html#cb242-14" tabindex="-1"></a><span class="co">#&gt; $low</span></span>
<span id="cb242-15"><a href="InputAndOutput.html#cb242-15" tabindex="-1"></a><span class="co">#&gt; [1] 2345.63 2207.73 1677.55 1616.21 1951.76</span></span></code></pre></div>
<p>This can easily be turned into a data frame with the <code>data.frame</code> command:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="InputAndOutput.html#cb243-1" tabindex="-1"></a>df_triples <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(triples)</span>
<span id="cb243-2"><a href="InputAndOutput.html#cb243-2" tabindex="-1"></a>df_triples</span>
<span id="cb243-3"><a href="InputAndOutput.html#cb243-3" tabindex="-1"></a><span class="co">#&gt;        date    high     low</span></span>
<span id="cb243-4"><a href="InputAndOutput.html#cb243-4" tabindex="-1"></a><span class="co">#&gt; 1 15-Oct-87 2439.78 2345.63</span></span>
<span id="cb243-5"><a href="InputAndOutput.html#cb243-5" tabindex="-1"></a><span class="co">#&gt; 2 16-Oct-87 2396.21 2207.73</span></span>
<span id="cb243-6"><a href="InputAndOutput.html#cb243-6" tabindex="-1"></a><span class="co">#&gt; 3 19-Oct-87 2164.16 1677.55</span></span>
<span id="cb243-7"><a href="InputAndOutput.html#cb243-7" tabindex="-1"></a><span class="co">#&gt; 4 20-Oct-87 2067.47 1616.21</span></span>
<span id="cb243-8"><a href="InputAndOutput.html#cb243-8" tabindex="-1"></a><span class="co">#&gt; 5 21-Oct-87 2081.07 1951.76</span></span></code></pre></div>
<p>The <code>scan</code> function has many bells and whistles, but the following are
especially useful:</p>
<dl>
<dt><code>n=number</code></dt>
<dd>
<p>Stop after reading this many tokens. (Default: stop at end of file.)</p>
</dd>
<dt><code>nlines=number</code></dt>
<dd>
<p>Stop after reading this many input lines. (Default: stop at end
of file.)</p>
</dd>
<dt><code>skip=number</code></dt>
<dd>
<p>Number of input lines to skip before reading data.</p>
</dd>
<dt><code>na.strings=list</code></dt>
<dd>
<p>A list of strings to be interpreted as NA.</p>
</dd>
</dl>
</div>
<div id="an-example" class="section level3 unnumbered hasAnchor">
<h3>An Example<a href="InputAndOutput.html#an-example" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s use this recipe to read a dataset from StatLib, the repository of
statistical data and software maintained by Carnegie Mellon University.
Jeff Witmer contributed a dataset called <code>wseries</code> that shows the
pattern of wins and losses for every World Series since 1903. The
dataset is stored in an ASCII file with 35 lines of comments followed by
23 lines of data. The data itself looks like this:</p>
<pre id="I_programlisting4_d1e10023"><code>1903  LWLlwwwW    1927  wwWW      1950  wwWW      1973  WLwllWW
1905  wLwWW       1928  WWww      1951  LWlwwW    1974  wlWWW
1906  wLwLwW      1929  wwLWW     1952  lwLWLww   1975  lwWLWlw
1907  WWww        1930  WWllwW    1953  WWllwW    1976  WWww
1908  wWLww       1931  LWwlwLW   1954  WWww      1977  WLwwlW

.
. (etc.)
. </code></pre>
<p>The data is encoded as follows: L = loss at home, l = loss on the road,
W = win at home, w = win on the road. The data appears in column order,
not row order, which complicates our lives a bit.</p>
<p>Here is the R code for reading the raw data:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="InputAndOutput.html#cb244-1" tabindex="-1"></a><span class="co"># Read the wseries dataset:</span></span>
<span id="cb244-2"><a href="InputAndOutput.html#cb244-2" tabindex="-1"></a><span class="co">#     - Skip the first 35 lines</span></span>
<span id="cb244-3"><a href="InputAndOutput.html#cb244-3" tabindex="-1"></a><span class="co">#     - Then read 23 lines of data</span></span>
<span id="cb244-4"><a href="InputAndOutput.html#cb244-4" tabindex="-1"></a><span class="co">#     - The data occurs in pairs: a year and a pattern (char string)</span></span>
<span id="cb244-5"><a href="InputAndOutput.html#cb244-5" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb244-6"><a href="InputAndOutput.html#cb244-6" tabindex="-1"></a>world.series <span class="ot">&lt;-</span> <span class="fu">scan</span>(</span>
<span id="cb244-7"><a href="InputAndOutput.html#cb244-7" tabindex="-1"></a>  <span class="st">&quot;http://lib.stat.cmu.edu/datasets/wseries&quot;</span>,</span>
<span id="cb244-8"><a href="InputAndOutput.html#cb244-8" tabindex="-1"></a>  <span class="at">skip =</span> <span class="dv">35</span>,</span>
<span id="cb244-9"><a href="InputAndOutput.html#cb244-9" tabindex="-1"></a>  <span class="at">nlines =</span> <span class="dv">23</span>,</span>
<span id="cb244-10"><a href="InputAndOutput.html#cb244-10" tabindex="-1"></a>  <span class="at">what =</span> <span class="fu">list</span>(<span class="at">year =</span> <span class="fu">integer</span>(<span class="dv">0</span>),</span>
<span id="cb244-11"><a href="InputAndOutput.html#cb244-11" tabindex="-1"></a>              <span class="at">pattern =</span> <span class="fu">character</span>(<span class="dv">0</span>)),</span>
<span id="cb244-12"><a href="InputAndOutput.html#cb244-12" tabindex="-1"></a>)</span></code></pre></div>
<p>The <code>scan</code> function returns a list, so we get a list with two elements:
<code>year</code> and <code>pattern</code>. The function reads from left to right, but the
dataset is organized by columns and so the years appear in a strange
order:</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="InputAndOutput.html#cb245-1" tabindex="-1"></a>world.series<span class="sc">$</span>year</span>
<span id="cb245-2"><a href="InputAndOutput.html#cb245-2" tabindex="-1"></a><span class="co">#&gt;  [1] 1903 1927 1950 1973 1905 1928 1951 1974 1906 1929 1952 1975 1907 1930 1953</span></span>
<span id="cb245-3"><a href="InputAndOutput.html#cb245-3" tabindex="-1"></a><span class="co">#&gt; [16] 1976 1908 1931 1954 1977 1909 1932 1955 1978 1910 1933 1956 1979 1911 1934</span></span>
<span id="cb245-4"><a href="InputAndOutput.html#cb245-4" tabindex="-1"></a><span class="co">#&gt; [31] 1957 1980 1912 1935 1958 1981 1913 1936 1959 1982 1914 1937 1960 1983 1915</span></span>
<span id="cb245-5"><a href="InputAndOutput.html#cb245-5" tabindex="-1"></a><span class="co">#&gt; [46] 1938 1961 1984 1916 1939 1962 1985 1917 1940 1963 1986 1918 1941 1964 1987</span></span>
<span id="cb245-6"><a href="InputAndOutput.html#cb245-6" tabindex="-1"></a><span class="co">#&gt; [61] 1919 1942 1965 1988 1920 1943 1966 1989 1921 1944 1967 1990 1922 1945 1968</span></span>
<span id="cb245-7"><a href="InputAndOutput.html#cb245-7" tabindex="-1"></a><span class="co">#&gt; [76] 1991 1923 1946 1969 1992 1924 1947 1970 1993 1925 1948 1971 1926 1949 1972</span></span></code></pre></div>
<p>We can fix that by sorting the list elements according to year:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="InputAndOutput.html#cb246-1" tabindex="-1"></a>perm <span class="ot">&lt;-</span> <span class="fu">order</span>(world.series<span class="sc">$</span>year)</span>
<span id="cb246-2"><a href="InputAndOutput.html#cb246-2" tabindex="-1"></a>world.series <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">year    =</span> world.series<span class="sc">$</span>year[perm],</span>
<span id="cb246-3"><a href="InputAndOutput.html#cb246-3" tabindex="-1"></a>                     <span class="at">pattern =</span> world.series<span class="sc">$</span>pattern[perm])</span></code></pre></div>
<p>Now the data appears in chronological order:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="InputAndOutput.html#cb247-1" tabindex="-1"></a>world.series<span class="sc">$</span>year</span>
<span id="cb247-2"><a href="InputAndOutput.html#cb247-2" tabindex="-1"></a><span class="co">#&gt;  [1] 1903 1905 1906 1907 1908 1909 1910 1911 1912 1913 1914 1915 1916 1917 1918</span></span>
<span id="cb247-3"><a href="InputAndOutput.html#cb247-3" tabindex="-1"></a><span class="co">#&gt; [16] 1919 1920 1921 1922 1923 1924 1925 1926 1927 1928 1929 1930 1931 1932 1933</span></span>
<span id="cb247-4"><a href="InputAndOutput.html#cb247-4" tabindex="-1"></a><span class="co">#&gt; [31] 1934 1935 1936 1937 1938 1939 1940 1941 1942 1943 1944 1945 1946 1947 1948</span></span>
<span id="cb247-5"><a href="InputAndOutput.html#cb247-5" tabindex="-1"></a><span class="co">#&gt; [46] 1949 1950 1951 1952 1953 1954 1955 1956 1957 1958 1959 1960 1961 1962 1963</span></span>
<span id="cb247-6"><a href="InputAndOutput.html#cb247-6" tabindex="-1"></a><span class="co">#&gt; [61] 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 1976 1977 1978</span></span>
<span id="cb247-7"><a href="InputAndOutput.html#cb247-7" tabindex="-1"></a><span class="co">#&gt; [76] 1979 1980 1981 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993</span></span>
<span id="cb247-8"><a href="InputAndOutput.html#cb247-8" tabindex="-1"></a></span>
<span id="cb247-9"><a href="InputAndOutput.html#cb247-9" tabindex="-1"></a>world.series<span class="sc">$</span>pattern</span>
<span id="cb247-10"><a href="InputAndOutput.html#cb247-10" tabindex="-1"></a><span class="co">#&gt;  [1] &quot;LWLlwwwW&quot; &quot;wLwWW&quot;    &quot;wLwLwW&quot;   &quot;WWww&quot;     &quot;wWLww&quot;    &quot;WLwlWlw&quot; </span></span>
<span id="cb247-11"><a href="InputAndOutput.html#cb247-11" tabindex="-1"></a><span class="co">#&gt;  [7] &quot;WWwlw&quot;    &quot;lWwWlW&quot;   &quot;wLwWlLW&quot;  &quot;wLwWw&quot;    &quot;wwWW&quot;     &quot;lwWWw&quot;   </span></span>
<span id="cb247-12"><a href="InputAndOutput.html#cb247-12" tabindex="-1"></a><span class="co">#&gt; [13] &quot;WWlwW&quot;    &quot;WWllWw&quot;   &quot;wlwWLW&quot;   &quot;WWlwwLLw&quot; &quot;wllWWWW&quot;  &quot;LlWwLwWw&quot;</span></span>
<span id="cb247-13"><a href="InputAndOutput.html#cb247-13" tabindex="-1"></a><span class="co">#&gt; [19] &quot;WWwW&quot;     &quot;LwLwWw&quot;   &quot;LWlwlWW&quot;  &quot;LWllwWW&quot;  &quot;lwWLLww&quot;  &quot;wwWW&quot;    </span></span>
<span id="cb247-14"><a href="InputAndOutput.html#cb247-14" tabindex="-1"></a><span class="co">#&gt; [25] &quot;WWww&quot;     &quot;wwLWW&quot;    &quot;WWllwW&quot;   &quot;LWwlwLW&quot;  &quot;WWww&quot;     &quot;WWlww&quot;   </span></span>
<span id="cb247-15"><a href="InputAndOutput.html#cb247-15" tabindex="-1"></a><span class="co">#&gt; [31] &quot;wlWLLww&quot;  &quot;LWwwlW&quot;   &quot;lwWWLw&quot;   &quot;WWwlw&quot;    &quot;wwWW&quot;     &quot;WWww&quot;    </span></span>
<span id="cb247-16"><a href="InputAndOutput.html#cb247-16" tabindex="-1"></a><span class="co">#&gt; [37] &quot;LWlwlWW&quot;  &quot;WLwww&quot;    &quot;LWwww&quot;    &quot;WLWww&quot;    &quot;LWlwwW&quot;   &quot;LWLwwlw&quot; </span></span>
<span id="cb247-17"><a href="InputAndOutput.html#cb247-17" tabindex="-1"></a><span class="co">#&gt; [43] &quot;LWlwlww&quot;  &quot;WWllwLW&quot;  &quot;lwWWLw&quot;   &quot;WLwww&quot;    &quot;wwWW&quot;     &quot;LWlwwW&quot;  </span></span>
<span id="cb247-18"><a href="InputAndOutput.html#cb247-18" tabindex="-1"></a><span class="co">#&gt; [49] &quot;lwLWLww&quot;  &quot;WWllwW&quot;   &quot;WWww&quot;     &quot;llWWWlw&quot;  &quot;llWWWlw&quot;  &quot;lwLWWlw&quot; </span></span>
<span id="cb247-19"><a href="InputAndOutput.html#cb247-19" tabindex="-1"></a><span class="co">#&gt; [55] &quot;llWLWww&quot;  &quot;lwWWLw&quot;   &quot;WLlwwLW&quot;  &quot;WLwww&quot;    &quot;wlWLWlw&quot;  &quot;wwWW&quot;    </span></span>
<span id="cb247-20"><a href="InputAndOutput.html#cb247-20" tabindex="-1"></a><span class="co">#&gt; [61] &quot;WLlwwLW&quot;  &quot;llWWWlw&quot;  &quot;wwWW&quot;     &quot;wlWWLlw&quot;  &quot;lwLLWww&quot;  &quot;lwWWW&quot;   </span></span>
<span id="cb247-21"><a href="InputAndOutput.html#cb247-21" tabindex="-1"></a><span class="co">#&gt; [67] &quot;wwWLW&quot;    &quot;llWWWlw&quot;  &quot;wwLWLlw&quot;  &quot;WLwllWW&quot;  &quot;wlWWW&quot;    &quot;lwWLWlw&quot; </span></span>
<span id="cb247-22"><a href="InputAndOutput.html#cb247-22" tabindex="-1"></a><span class="co">#&gt; [73] &quot;WWww&quot;     &quot;WLwwlW&quot;   &quot;llWWWw&quot;   &quot;lwLLWww&quot;  &quot;WWllwW&quot;   &quot;llWWWw&quot;  </span></span>
<span id="cb247-23"><a href="InputAndOutput.html#cb247-23" tabindex="-1"></a><span class="co">#&gt; [79] &quot;LWwllWW&quot;  &quot;LWwww&quot;    &quot;wlWWW&quot;    &quot;LLwlwWW&quot;  &quot;LLwwlWW&quot;  &quot;WWlllWW&quot; </span></span>
<span id="cb247-24"><a href="InputAndOutput.html#cb247-24" tabindex="-1"></a><span class="co">#&gt; [85] &quot;WWlww&quot;    &quot;WWww&quot;     &quot;WWww&quot;     &quot;WWlllWW&quot;  &quot;lwWWLw&quot;   &quot;WLwwlW&quot;</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id037" class="section level2 hasAnchor" number="4.16">
<h2><span class="header-section-number">4.16</span> Reading from MySQL Databases<a href="InputAndOutput.html#recipe-id037" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id037" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id037" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want access to data stored in a MySQL database.</p>
</div>
<div id="solution-id037" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id037" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Install the <code>RMySQL</code> package on your computer and add a user and password.</p></li>
<li><p>Open a database connection using the <code>DBI::dbConnect</code> function.</p></li>
<li><p>Use <code>dbGetQuery</code> to initiate a <code>SELECT</code> and return the result sets.</p></li>
<li><p>Use <code>dbDisconnect</code> to terminate the database connection when you
are done.</p></li>
</ol>
</div>
<div id="discussion-id037" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id037" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This recipe requires that the <code>RMySQL</code> package be installed on your
computer. That package requires, in turn, the MySQL client software. If
the MySQL client software is not already installed and configured,
consult the MySQL documentation or your system administrator.</p>
<p>Use the <code>dbConnect</code> function to establish a connection to the MySQL
database. It returns a connection object that is used in subsequent
calls to <code>RMySQL</code> functions:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="InputAndOutput.html#cb248-1" tabindex="-1"></a><span class="fu">library</span>(RMySQL)</span>
<span id="cb248-2"><a href="InputAndOutput.html#cb248-2" tabindex="-1"></a></span>
<span id="cb248-3"><a href="InputAndOutput.html#cb248-3" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb248-4"><a href="InputAndOutput.html#cb248-4" tabindex="-1"></a>    <span class="at">drv =</span> RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(),</span>
<span id="cb248-5"><a href="InputAndOutput.html#cb248-5" tabindex="-1"></a>    <span class="at">dbname =</span> <span class="st">&quot;your_db_name&quot;</span>,</span>
<span id="cb248-6"><a href="InputAndOutput.html#cb248-6" tabindex="-1"></a>    <span class="at">host =</span> <span class="st">&quot;your.host.com&quot;</span>,</span>
<span id="cb248-7"><a href="InputAndOutput.html#cb248-7" tabindex="-1"></a>    <span class="at">username =</span> <span class="st">&quot;userid&quot;</span>,</span>
<span id="cb248-8"><a href="InputAndOutput.html#cb248-8" tabindex="-1"></a>    <span class="at">password =</span> <span class="st">&quot;pwd&quot;</span></span>
<span id="cb248-9"><a href="InputAndOutput.html#cb248-9" tabindex="-1"></a>  )</span></code></pre></div>
<p>The username, password, and host parameters are the same parameters used
for accessing MySQL through the <code>mysql</code> client program. The example
given here shows them hardcoded into the <code>dbConnect</code> call. Actually,
that is an ill-advised practice. It puts your password in a plain-text document,
creating a security problem. It also creates a major headache whenever
your password or host changes, requiring you to hunt down the hardcoded
values. We strongly recommend using the security mechanism of MySQL
instead. Version 8 of MySQL introduces even more advanced security options, but currently these have not been built into the R MySQL client. So we recommend you use MySQL native passwords by setting <code>default-authentication-plugin=mysql_native_password</code> in your MySQL configuration file,
which is <em>$HOME/.my.cnf</em> on Unix and <em>C:\my.cnf</em> on Windows. We use <code>loose-local-infile=1</code> to ensure that we have permissions to write to the database. Make sure the file is unreadable by anyone except you. The file is delimited into
sections with markers such as <code>[mysqld]</code> and <code>[client]</code>. Put connection parameters into the
<code>[client]</code> section, so that your config file will contain something like
this:</p>
<pre><code>[mysqld]
default-authentication-plugin=mysql_native_password
loose-local-infile=1

[client]
loose-local-infile=1
user=&quot;jdl&quot;
password=&quot;password&quot;
host=127.0.0.1
port=3306</code></pre>
<p>Once the parameters are defined in the config file, you no longer need
to supply them in the <code>dbConnect</code> call, which then becomes much simpler:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb250-1"><a href="InputAndOutput.html#cb250-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(</span>
<span id="cb250-2"><a href="InputAndOutput.html#cb250-2" tabindex="-1"></a>  <span class="at">drv =</span> RMySQL<span class="sc">::</span><span class="fu">MySQL</span>(), </span>
<span id="cb250-3"><a href="InputAndOutput.html#cb250-3" tabindex="-1"></a>  <span class="at">dbname =</span> <span class="st">&quot;your_db_name&quot;</span>)</span></code></pre></div>
<p>Use the <code>dbGetQuery</code> function to submit your SQL to the database and
read the result sets. Doing so requires an open database connection:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="InputAndOutput.html#cb251-1" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="st">&quot;SELECT * from SurveyResults WHERE City = &#39;Chicago&#39;&quot;</span></span>
<span id="cb251-2"><a href="InputAndOutput.html#cb251-2" tabindex="-1"></a>rows <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, sql)</span></code></pre></div>
<p>You are not restricted to <code>SELECT</code> statements. Any SQL that
generates a result set is OK. It is common to use <code>CALL</code> statements, for
example, if your SQL is encapsulated in stored procedures and
those stored procedures contain embedded <code>SELECT</code> statements.</p>
<p>Using <code>dbGetQuery</code> is convenient because it packages the result set into
a data frame and returns the data frame. This is the perfect
representation of an SQL result set. The result set is a tabular data
structure of rows and columns, and so is a data frame. The result set’s
columns have names given by the SQL <code>SELECT</code> statement, and R uses them
for naming the columns of the data frame.</p>
<p>Call <code>dbGetQuery</code> repeatedly to perform multiple queries. When
you are done, close the database connection using <code>dbDisconnect</code>:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="InputAndOutput.html#cb252-1" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span></code></pre></div>
<p>Here is a complete session that reads and prints three rows from a
database of stock prices. The query selects the price of IBM stock for
the last three days of 2008. It assumes that the username, password, dbname, and
host are defined in the <em>my.cnf</em> file:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="InputAndOutput.html#cb253-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RMySQL<span class="sc">::</span><span class="fu">MySQL</span>())</span>
<span id="cb253-2"><a href="InputAndOutput.html#cb253-2" tabindex="-1"></a>sql <span class="ot">&lt;-</span> <span class="fu">paste</span>(</span>
<span id="cb253-3"><a href="InputAndOutput.html#cb253-3" tabindex="-1"></a>  <span class="st">&quot;select * from DailyBar where Symbol = &#39;IBM&#39;&quot;</span>,</span>
<span id="cb253-4"><a href="InputAndOutput.html#cb253-4" tabindex="-1"></a>  <span class="st">&quot;and Day between &#39;2008-12-29&#39; and &#39;2008-12-31&#39;&quot;</span></span>
<span id="cb253-5"><a href="InputAndOutput.html#cb253-5" tabindex="-1"></a>)</span>
<span id="cb253-6"><a href="InputAndOutput.html#cb253-6" tabindex="-1"></a>rows <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(con, sql)</span>
<span id="cb253-7"><a href="InputAndOutput.html#cb253-7" tabindex="-1"></a></span>
<span id="cb253-8"><a href="InputAndOutput.html#cb253-8" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span>
<span id="cb253-9"><a href="InputAndOutput.html#cb253-9" tabindex="-1"></a><span class="fu">print</span>(rows)</span></code></pre></div>
<pre><code>##   Symbol        Day       Next OpenPx HighPx LowPx ClosePx AdjClosePx
## 1    IBM 2008-12-29 2008-12-30  81.72  81.72 79.68   81.25      81.25
## 2    IBM 2008-12-30 2008-12-31  81.83  83.64 81.52   83.55      83.55
## 3    IBM 2008-12-31 2009-01-02  83.50  85.00 83.50   84.16      84.16
##   HistClosePx  Volume OpenInt
## 1       81.25 6062600      NA
## 2       83.55 5774400      NA
## 3       84.16 6667700      NA</code></pre>
</div>
<div id="see_also-id037" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id037" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="NavigatingTheSoftware.html#recipe-id012">3.10</a>, <a href="NavigatingTheSoftware.html#recipe-id012">“Installing Packages from CRAN”</a>, and the documentation for <code>RMySQL</code>, which
contains more details about configuring and using the package.</p>
<p>See Recipe <a href="InputAndOutput.html#recipe-dbplyr">4.17</a>, <a href="InputAndOutput.html#recipe-dbplyr">“Accessing a Database with dbplyr”</a>, for information about how to get data from an SQL without writing any SQL.</p>
<p>R can read from several other RDBMS systems, including Oracle, Sybase,
PostgreSQL, and SQLite. For more information, see the R Data
Import/Export guide, which is supplied with the base distribution
(Recipe <a href="GettingStarted.html#recipe-id265">1.7</a>, <a href="GettingStarted.html#recipe-id265">“Viewing the Supplied Documentation”</a>) and is also available on <a href="http://cran.r-project.org/doc/manuals/R-data.pdf">CRAN</a>.</p>
</div>
</div>
<div id="recipe-dbplyr" class="section level2 hasAnchor" number="4.17">
<h2><span class="header-section-number">4.17</span> Accessing a Database with dbplyr<a href="InputAndOutput.html#recipe-dbplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-dbplyr" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-dbplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to access a database, but you’d rather not write SQL code in order to manipulate data and return results to R.</p>
</div>
<div id="solution-dbplyr" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-dbplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In addition to being a grammar of data manipulation, the tidyverse package <code>dplyr</code> can, in connection with the <code>dbplyr</code> package, turn <code>dplyr</code> commands into SQL for you.</p>
<p>Let’s set up an example database using <code>RSQLite</code>. Then we’ll connect to it and use <code>dplyr</code> and the <code>dbplyr</code> backend to extract data.</p>
<p>Set up the example table by loading the <code>msleep</code> example data into an in-memory SQLite database:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="InputAndOutput.html#cb255-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> DBI<span class="sc">::</span><span class="fu">dbConnect</span>(RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(), <span class="st">&quot;:memory:&quot;</span>)</span>
<span id="cb255-2"><a href="InputAndOutput.html#cb255-2" tabindex="-1"></a>sleep_db <span class="ot">&lt;-</span> <span class="fu">copy_to</span>(con, msleep, <span class="st">&quot;sleep&quot;</span>)</span></code></pre></div>
<p>Now that we have a table in our database, we can create a reference to it from <code>R</code>:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="InputAndOutput.html#cb256-1" tabindex="-1"></a>sleep_table <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&quot;sleep&quot;</span>)</span></code></pre></div>
<p>The <code>sleep_table</code> object is a type of pointer or alias to the table on the database. However, <code>dplyr</code> will treat it like a regular tidyverse <code>tibble</code> or data frame, so you can operate on it using <code>dplyr</code> and other R commands. Let’s select all animals from the data who sleep less than three hours.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="InputAndOutput.html#cb257-1" tabindex="-1"></a>little_sleep <span class="ot">&lt;-</span> sleep_table <span class="sc">%&gt;%</span></span>
<span id="cb257-2"><a href="InputAndOutput.html#cb257-2" tabindex="-1"></a>  <span class="fu">select</span>(name, genus, order, sleep_total) <span class="sc">%&gt;%</span></span>
<span id="cb257-3"><a href="InputAndOutput.html#cb257-3" tabindex="-1"></a>  <span class="fu">filter</span>(sleep_total <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code></pre></div>
<p>The <code>dbplyr</code> backend does not go fetch the data when we do the preceding commands. But it does build the query and get ready. To see the query built by <code>dplyr</code>, you can use <code>show_query</code>:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="InputAndOutput.html#cb258-1" tabindex="-1"></a><span class="fu">show_query</span>(little_sleep)</span>
<span id="cb258-2"><a href="InputAndOutput.html#cb258-2" tabindex="-1"></a><span class="co">#&gt; &lt;SQL&gt;</span></span>
<span id="cb258-3"><a href="InputAndOutput.html#cb258-3" tabindex="-1"></a><span class="co">#&gt; SELECT `name`, `genus`, `order`, `sleep_total`</span></span>
<span id="cb258-4"><a href="InputAndOutput.html#cb258-4" tabindex="-1"></a><span class="co">#&gt; FROM `sleep`</span></span>
<span id="cb258-5"><a href="InputAndOutput.html#cb258-5" tabindex="-1"></a><span class="co">#&gt; WHERE (`sleep_total` &lt; 3.0)</span></span></code></pre></div>
<p>To bring the data back to your local machine, use <code>collect</code>:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="InputAndOutput.html#cb259-1" tabindex="-1"></a>local_little_sleep <span class="ot">&lt;-</span> <span class="fu">collect</span>(little_sleep)</span>
<span id="cb259-2"><a href="InputAndOutput.html#cb259-2" tabindex="-1"></a>local_little_sleep</span>
<span id="cb259-3"><a href="InputAndOutput.html#cb259-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb259-4"><a href="InputAndOutput.html#cb259-4" tabindex="-1"></a><span class="co">#&gt;   name        genus         order          sleep_total</span></span>
<span id="cb259-5"><a href="InputAndOutput.html#cb259-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb259-6"><a href="InputAndOutput.html#cb259-6" tabindex="-1"></a><span class="co">#&gt; 1 Horse       Equus         Perissodactyla         2.9</span></span>
<span id="cb259-7"><a href="InputAndOutput.html#cb259-7" tabindex="-1"></a><span class="co">#&gt; 2 Giraffe     Giraffa       Artiodactyla           1.9</span></span>
<span id="cb259-8"><a href="InputAndOutput.html#cb259-8" tabindex="-1"></a><span class="co">#&gt; 3 Pilot whale Globicephalus Cetacea                2.7</span></span></code></pre></div>
</div>
<div id="discussion-dbplyr" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-dbplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you use <code>dplyr</code> to access SQL databases by writing only <code>dplyr</code> commands, you can be more productive by not having to switch from one language to another and back. The alternative is to have large chunks of SQL code stored as text strings in the middle of an R script, or have the SQL in separate files that are read in by R.</p>
<p>By allowing <code>dplyr</code> to transparently create the SQL in the background, you are freed from having to maintain separate SQL code to extract data.</p>
<p>The <code>dbplyr</code> package uses <code>DBI</code> to connect to your database, so you’ll need a <code>DBI</code> backend package for whichever database you want to access.</p>
<p>Some commonly used backend <code>DBI</code> packages are:</p>
<dl>
<dt><code>odbc</code></dt>
<dd>
<p>Uses the Open Database Connectivity (ODBC) protocol to connect to many different databases. This is typically the best choice when you are connecting to Microsoft SQL Server. ODBC is typically straightforward on Windows machines but may require some considerable effort to get working in Linux or Mac.</p>
</dd>
<dt><code>RPostgreSQL</code></dt>
<dd>
<p>For connecting to Postgres and Redshift.</p>
</dd>
<dt><code>RMySQL</code></dt>
<dd>
<p>For MySQL and MariaDB</p>
</dd>
<dt><code>RSQLite</code></dt>
<dd>
<p>For connecting to SQLite databases on disk or in memory</p>
</dd>
<dt><code>bigrquery</code></dt>
<dd>
<p>For connections to Google’s BigQuery.</p>
</dd>
</dl>
<p>Each DBI backend package discussed here is listed on CRAN and can be installed with the typical <code>install.packages('*packagename*')</code> command.</p>
</div>
<div id="see_also-dbplyr" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-dbplyr" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For more information about connecting the databases with R &amp; RStudio, see <a href="https://db.rstudio.com/">https://db.rstudio.com/</a>.</p>
<p>For more detail on SQL translation in dbplyr, see the sql-translation vignette at <code>vignette("sql-translation")</code> or <a href="http://dbplyr.tidyverse.org/articles/sql-translation.html">http://dbplyr.tidyverse.org/articles/sql-translation.html</a>.</p>
</div>
</div>
<div id="recipe-id029" class="section level2 hasAnchor" number="4.18">
<h2><span class="header-section-number">4.18</span> Saving and Transporting Objects<a href="InputAndOutput.html#recipe-id029" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id029" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="InputAndOutput.html#problem-id029" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to store one or more R objects in a file for later use, or you want to copy an R object from one machine to another.</p>
</div>
<div id="solution-id029" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="InputAndOutput.html#solution-id029" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Write the objects to a file using the <code>save</code> function:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb260-1"><a href="InputAndOutput.html#cb260-1" tabindex="-1"></a><span class="fu">save</span>(tbl, t, <span class="at">file =</span> <span class="st">&quot;myData.RData&quot;</span>)</span></code></pre></div>
<p>Read them back using the <code>load</code> function, either on your computer or on any platform that supports R:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="InputAndOutput.html#cb261-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;myData.RData&quot;</span>)</span></code></pre></div>
<p>The <code>save</code> function writes binary data. To save in an ASCII format, use
<code>dput</code> or <code>dump</code> instead:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="InputAndOutput.html#cb262-1" tabindex="-1"></a><span class="fu">dput</span>(tbl, <span class="at">file =</span> <span class="st">&quot;myData.txt&quot;</span>)</span>
<span id="cb262-2"><a href="InputAndOutput.html#cb262-2" tabindex="-1"></a><span class="fu">dump</span>(<span class="st">&quot;tbl&quot;</span>, <span class="at">file =</span> <span class="st">&quot;myData.txt&quot;</span>)    <span class="co"># Note quotes around variable name</span></span></code></pre></div>
</div>
<div id="discussion-id029" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="InputAndOutput.html#discussion-id029" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ve found ourselves with a large, complicated data object that we want to load into other workspaces, or we may want to move R
objects between a Linux box and a Windows box. The <code>load</code> and <code>save</code> functions let us do all this: <code>save</code> will store the object in a file that is portable across machines, and <code>load</code> can read those files.</p>
<p>When you run <code>load</code>, it does not return your data per se; rather, it creates variables in your workspace, loads your data into those
variables, and then returns the names of the variables (in a vector). The first time you run <code>load</code>, you might be tempted to do this:</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb263-1"><a href="InputAndOutput.html#cb263-1" tabindex="-1"></a>myData <span class="ot">&lt;-</span> <span class="fu">load</span>(<span class="st">&quot;myData.RData&quot;</span>)     <span class="co"># Achtung! Might not do what you think</span></span></code></pre></div>
<p>Let’s look at what <code>myData</code> is:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="InputAndOutput.html#cb264-1" tabindex="-1"></a>myData</span>
<span id="cb264-2"><a href="InputAndOutput.html#cb264-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;tbl&quot; &quot;t&quot;</span></span>
<span id="cb264-3"><a href="InputAndOutput.html#cb264-3" tabindex="-1"></a><span class="fu">str</span>(myData)</span>
<span id="cb264-4"><a href="InputAndOutput.html#cb264-4" tabindex="-1"></a><span class="co">#&gt;  chr [1:2] &quot;tbl&quot; &quot;t&quot;</span></span></code></pre></div>
<p>This might be puzzling, because <code>myData</code> will not contain your data at all. This can be perplexing and frustrating the first time.</p>
<p>The <code>save</code> function writes in a binary format to keep the file small.
Sometimes you want an ASCII format instead. When you submit a question
to a mailing list or to Stack Overflow, for example, including an ASCII dump of the data lets
others re-create your problem. In such cases use <code>dput</code> or <code>dump</code>, which
write an ASCII representation.</p>
<p>Be careful when you save and load objects created by a particular R
package. When you load the objects, R does not automatically load the
required packages, too, so it will not “understand” the object unless
you previously loaded the package yourself. For instance, suppose you
have an object called <code>z</code> created by the <code>zoo</code> package, and suppose we
save the object in a file called <em>z.RData</em>. The following sequence of
functions will create some confusion:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb265-1"><a href="InputAndOutput.html#cb265-1" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./data/z.RData&quot;</span>)   <span class="co"># Create and populate the z variable</span></span>
<span id="cb265-2"><a href="InputAndOutput.html#cb265-2" tabindex="-1"></a><span class="fu">plot</span>(z)                  <span class="co"># Does not plot as expected: zoo pkg not loaded</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:no-zoo-example"></span>
<img src="04_InputAndOutput_files/figure-html/no-zoo-example-1.png" alt="Plot without zoo loaded" width="85%" />
<p class="caption">
Figure 4.3: Plot without zoo loaded
</p>
</div>
<p>The plot in Figure <a href="InputAndOutput.html#fig:no-zoo-example">4.3</a> shows the resulting plot, which is just points.</p>
<p>We should have loaded the <code>zoo</code> package <em>before</em> printing or plotting
any <code>zoo</code> objects, like this:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="InputAndOutput.html#cb266-1" tabindex="-1"></a><span class="fu">library</span>(zoo)           <span class="co"># Load the zoo package into memory</span></span>
<span id="cb266-2"><a href="InputAndOutput.html#cb266-2" tabindex="-1"></a><span class="fu">load</span>(<span class="st">&quot;./data/z.RData&quot;</span>) <span class="co"># Create and populate the z variable</span></span>
<span id="cb266-3"><a href="InputAndOutput.html#cb266-3" tabindex="-1"></a><span class="fu">plot</span>(z)                <span class="co"># Ahhh. Now plotting works correctly</span></span></code></pre></div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:zoo-example"></span>
<img src="04_InputAndOutput_files/figure-html/zoo-example-1.png" alt="Plotting with zoo" width="85%" />
<p class="caption">
Figure 4.4: Plotting with zoo
</p>
</div>
<p>And you can see the resulting plot in Figure <a href="InputAndOutput.html#fig:zoo-example">4.4</a>.</p>
</div>
<div id="see_also-id029" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="InputAndOutput.html#see_also-id029" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you are just saving and loading a single data frame or other R object, you should consider <code>write_rds</code> and <code>read_rds</code>. These functions don’t have “side effects” like <code>load</code>.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="NavigatingTheSoftware.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DataStructures.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/CerebralMastication/R-Cookbook/edit/master/04_InputAndOutput.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
