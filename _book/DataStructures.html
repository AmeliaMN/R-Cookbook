<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data Structures | R Cookbook, 2nd Edition</title>
  <meta name="description" content="Second edition of R Cookbook" />
  <meta name="generator" content="bookdown 0.40 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data Structures | R Cookbook, 2nd Edition" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Second edition of R Cookbook" />
  <meta name="github-repo" content="CerebralMastication/R-Cookbook" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data Structures | R Cookbook, 2nd Edition" />
  
  <meta name="twitter:description" content="Second edition of R Cookbook" />
  

<meta name="author" content="James (JD) Long" />
<meta name="author" content="Paul Teetor" />


<meta name="date" content="2024-11-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="InputAndOutput.html"/>
<link rel="next" href="DataTransformations.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129487349-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-129487349-3');
</script>



<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R Cookbook 2nd Edition</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome to the R Cookbook 2nd Edition</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#the-recipes"><i class="fa fa-check"></i>The Recipes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#a-note-on-terminology"><i class="fa fa-check"></i>A Note on Terminology</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-and-platform-notes"><i class="fa fa-check"></i>Software and Platform Notes</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#conventions-used-in-this-book"><i class="fa fa-check"></i>Conventions Used in This Book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#using-code-examples"><i class="fa fa-check"></i>Using Code Examples</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#safari-books-online"><i class="fa fa-check"></i>Safari® Books Online</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-to-contact-us"><i class="fa fa-check"></i>How to Contact Us</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="GettingStarted.html"><a href="GettingStarted.html"><i class="fa fa-check"></i><b>1</b> Getting Started and Getting Help</a>
<ul>
<li class="chapter" data-level="" data-path="GettingStarted.html"><a href="GettingStarted.html#intro-GettingStarted"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="1.1" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id001"><i class="fa fa-check"></i><b>1.1</b> Downloading and Installing R</a></li>
<li class="chapter" data-level="1.2" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id002b"><i class="fa fa-check"></i><b>1.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="1.3" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-startingrstudio"><i class="fa fa-check"></i><b>1.3</b> Starting RStudio</a></li>
<li class="chapter" data-level="1.4" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id007"><i class="fa fa-check"></i><b>1.4</b> Entering Commands</a></li>
<li class="chapter" data-level="1.5" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id097"><i class="fa fa-check"></i><b>1.5</b> Exiting from RStudio</a></li>
<li class="chapter" data-level="1.6" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id100"><i class="fa fa-check"></i><b>1.6</b> Interrupting R</a></li>
<li class="chapter" data-level="1.7" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id265"><i class="fa fa-check"></i><b>1.7</b> Viewing the Supplied Documentation</a></li>
<li class="chapter" data-level="1.8" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id003"><i class="fa fa-check"></i><b>1.8</b> Getting Help on a Function</a></li>
<li class="chapter" data-level="1.9" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id267"><i class="fa fa-check"></i><b>1.9</b> Searching the Supplied Documentation</a></li>
<li class="chapter" data-level="1.10" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id266"><i class="fa fa-check"></i><b>1.10</b> Getting Help on a Package</a></li>
<li class="chapter" data-level="1.11" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id005"><i class="fa fa-check"></i><b>1.11</b> Searching the Web for Help</a></li>
<li class="chapter" data-level="1.12" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id270"><i class="fa fa-check"></i><b>1.12</b> Finding Relevant Functions and Packages</a></li>
<li class="chapter" data-level="1.13" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id268"><i class="fa fa-check"></i><b>1.13</b> Searching the Mailing Lists</a></li>
<li class="chapter" data-level="1.14" data-path="GettingStarted.html"><a href="GettingStarted.html#recipe-id269"><i class="fa fa-check"></i><b>1.14</b> Submitting Questions to Stack Overflow or Elsewhere in the Community</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="SomeBasics.html"><a href="SomeBasics.html"><i class="fa fa-check"></i><b>2</b> Some Basics</a>
<ul>
<li class="chapter" data-level="" data-path="SomeBasics.html"><a href="SomeBasics.html#intro-SomeBasics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="2.1" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id017"><i class="fa fa-check"></i><b>2.1</b> Printing Something to the Screen</a></li>
<li class="chapter" data-level="2.2" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id016"><i class="fa fa-check"></i><b>2.2</b> Setting Variables</a></li>
<li class="chapter" data-level="2.3" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id091"><i class="fa fa-check"></i><b>2.3</b> Listing Variables</a></li>
<li class="chapter" data-level="2.4" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id075"><i class="fa fa-check"></i><b>2.4</b> Deleting Variables</a></li>
<li class="chapter" data-level="2.5" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id038"><i class="fa fa-check"></i><b>2.5</b> Creating a Vector</a></li>
<li class="chapter" data-level="2.6" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id101"><i class="fa fa-check"></i><b>2.6</b> Computing Basic Statistics</a></li>
<li class="chapter" data-level="2.7" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id021"><i class="fa fa-check"></i><b>2.7</b> Creating Sequences</a></li>
<li class="chapter" data-level="2.8" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id020"><i class="fa fa-check"></i><b>2.8</b> Comparing Vectors</a></li>
<li class="chapter" data-level="2.9" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id039"><i class="fa fa-check"></i><b>2.9</b> Selecting Vector Elements</a></li>
<li class="chapter" data-level="2.10" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id019"><i class="fa fa-check"></i><b>2.10</b> Performing Vector Arithmetic</a></li>
<li class="chapter" data-level="2.11" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id018"><i class="fa fa-check"></i><b>2.11</b> Getting Operator Precedence Right</a></li>
<li class="chapter" data-level="2.12" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id022"><i class="fa fa-check"></i><b>2.12</b> Typing Less and Accomplishing More</a></li>
<li class="chapter" data-level="2.13" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-pipe-2"><i class="fa fa-check"></i><b>2.13</b> Creating a Pipeline of Function Calls</a></li>
<li class="chapter" data-level="2.14" data-path="SomeBasics.html"><a href="SomeBasics.html#recipe-id025"><i class="fa fa-check"></i><b>2.14</b> Avoiding Some Common Mistakes</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html"><i class="fa fa-check"></i><b>3</b> Navigating the Software</a>
<ul>
<li class="chapter" data-level="" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#intro-NavigatingTheSoftware"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="3.1" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id008"><i class="fa fa-check"></i><b>3.1</b> Getting and Setting the Working Directory</a></li>
<li class="chapter" data-level="3.2" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-CreateProject"><i class="fa fa-check"></i><b>3.2</b> Creating a New RStudio Project</a></li>
<li class="chapter" data-level="3.3" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id009"><i class="fa fa-check"></i><b>3.3</b> Saving Your Workspace</a></li>
<li class="chapter" data-level="3.4" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id023"><i class="fa fa-check"></i><b>3.4</b> Viewing Your Command History</a></li>
<li class="chapter" data-level="3.5" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id024"><i class="fa fa-check"></i><b>3.5</b> Saving the Result of the Previous Command</a></li>
<li class="chapter" data-level="3.6" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id010"><i class="fa fa-check"></i><b>3.6</b> Displaying Loaded Packages via the Search Path</a></li>
<li class="chapter" data-level="3.7" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id094"><i class="fa fa-check"></i><b>3.7</b> Viewing the List of Installed Packages</a></li>
<li class="chapter" data-level="3.8" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id013"><i class="fa fa-check"></i><b>3.8</b> Accessing the Functions in a Package</a></li>
<li class="chapter" data-level="3.9" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id257"><i class="fa fa-check"></i><b>3.9</b> Accessing Built-in Datasets</a></li>
<li class="chapter" data-level="3.10" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id012"><i class="fa fa-check"></i><b>3.10</b> Installing Packages from CRAN</a></li>
<li class="chapter" data-level="3.11" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-installGH"><i class="fa fa-check"></i><b>3.11</b> Installing a Package from GitHub</a></li>
<li class="chapter" data-level="3.12" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id272"><i class="fa fa-check"></i><b>3.12</b> Setting or Changing a Default CRAN Mirror</a></li>
<li class="chapter" data-level="3.13" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id014"><i class="fa fa-check"></i><b>3.13</b> Running a Script</a></li>
<li class="chapter" data-level="3.14" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id015"><i class="fa fa-check"></i><b>3.14</b> Running a Batch Script</a></li>
<li class="chapter" data-level="3.15" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id102"><i class="fa fa-check"></i><b>3.15</b> Locating the R Home Directory</a></li>
<li class="chapter" data-level="3.16" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-id099"><i class="fa fa-check"></i><b>3.16</b> Customizing R Startup</a></li>
<li class="chapter" data-level="3.17" data-path="NavigatingTheSoftware.html"><a href="NavigatingTheSoftware.html#recipe-Rcloud"><i class="fa fa-check"></i><b>3.17</b> Using R and RStudio in the Cloud</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="InputAndOutput.html"><a href="InputAndOutput.html"><i class="fa fa-check"></i><b>4</b> Input and Output</a>
<ul>
<li class="chapter" data-level="" data-path="InputAndOutput.html"><a href="InputAndOutput.html#intro-InputAndOutput"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="4.1" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id035"><i class="fa fa-check"></i><b>4.1</b> Entering Data from the Keyboard</a></li>
<li class="chapter" data-level="4.2" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id036"><i class="fa fa-check"></i><b>4.2</b> Printing Fewer Digits (or More Digits)</a></li>
<li class="chapter" data-level="4.3" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id034"><i class="fa fa-check"></i><b>4.3</b> Redirecting Output to a File</a></li>
<li class="chapter" data-level="4.4" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id030"><i class="fa fa-check"></i><b>4.4</b> Listing Files</a></li>
<li class="chapter" data-level="4.5" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id033"><i class="fa fa-check"></i><b>4.5</b> Dealing with “Cannot Open File” in Windows</a></li>
<li class="chapter" data-level="4.6" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id136"><i class="fa fa-check"></i><b>4.6</b> Reading Fixed-Width Records</a></li>
<li class="chapter" data-level="4.7" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id245"><i class="fa fa-check"></i><b>4.7</b> Reading Tabular Data Files</a></li>
<li class="chapter" data-level="4.8" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id027"><i class="fa fa-check"></i><b>4.8</b> Reading from CSV Files</a></li>
<li class="chapter" data-level="4.9" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id028"><i class="fa fa-check"></i><b>4.9</b> Writing to CSV Files</a></li>
<li class="chapter" data-level="4.10" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id031"><i class="fa fa-check"></i><b>4.10</b> Reading Tabular or CSV Data from the Web</a></li>
<li class="chapter" data-level="4.11" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-readexcel"><i class="fa fa-check"></i><b>4.11</b> Reading Data from Excel</a></li>
<li class="chapter" data-level="4.12" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-writeexcel"><i class="fa fa-check"></i><b>4.12</b> Writing a Data Frame to Excel</a></li>
<li class="chapter" data-level="4.13" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-readsas"><i class="fa fa-check"></i><b>4.13</b> Reading Data from a SAS file</a></li>
<li class="chapter" data-level="4.14" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id246"><i class="fa fa-check"></i><b>4.14</b> Reading Data from HTML Tables</a></li>
<li class="chapter" data-level="4.15" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id098"><i class="fa fa-check"></i><b>4.15</b> Reading Files with a Complex Structure</a></li>
<li class="chapter" data-level="4.16" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id037"><i class="fa fa-check"></i><b>4.16</b> Reading from MySQL Databases</a></li>
<li class="chapter" data-level="4.17" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-dbplyr"><i class="fa fa-check"></i><b>4.17</b> Accessing a Database with dbplyr</a></li>
<li class="chapter" data-level="4.18" data-path="InputAndOutput.html"><a href="InputAndOutput.html#recipe-id029"><i class="fa fa-check"></i><b>4.18</b> Saving and Transporting Objects</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="DataStructures.html"><a href="DataStructures.html"><i class="fa fa-check"></i><b>5</b> Data Structures</a>
<ul>
<li class="chapter" data-level="" data-path="DataStructures.html"><a href="DataStructures.html#intro-DataStructures"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="5.1" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id048"><i class="fa fa-check"></i><b>5.1</b> Appending Data to a Vector</a></li>
<li class="chapter" data-level="5.2" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id049"><i class="fa fa-check"></i><b>5.2</b> Inserting Data into a Vector</a></li>
<li class="chapter" data-level="5.3" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id050"><i class="fa fa-check"></i><b>5.3</b> Understanding the Recycling Rule</a></li>
<li class="chapter" data-level="5.4" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id051"><i class="fa fa-check"></i><b>5.4</b> Creating a Factor (Categorical Variable)</a></li>
<li class="chapter" data-level="5.5" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id227"><i class="fa fa-check"></i><b>5.5</b> Combining Multiple Vectors into One Vector and a Factor</a></li>
<li class="chapter" data-level="5.6" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id053"><i class="fa fa-check"></i><b>5.6</b> Creating a List</a></li>
<li class="chapter" data-level="5.7" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id054"><i class="fa fa-check"></i><b>5.7</b> Selecting List Elements by Position</a></li>
<li class="chapter" data-level="5.8" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id253"><i class="fa fa-check"></i><b>5.8</b> Selecting List Elements by Name</a></li>
<li class="chapter" data-level="5.9" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id158"><i class="fa fa-check"></i><b>5.9</b> Building a Name/Value Association List</a></li>
<li class="chapter" data-level="5.10" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id056"><i class="fa fa-check"></i><b>5.10</b> Removing an Element from a List</a></li>
<li class="chapter" data-level="5.11" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id152"><i class="fa fa-check"></i><b>5.11</b> Flatten a List into a Vector</a></li>
<li class="chapter" data-level="5.12" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id058"><i class="fa fa-check"></i><b>5.12</b> Removing NULL Elements from a List</a></li>
<li class="chapter" data-level="5.13" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id060"><i class="fa fa-check"></i><b>5.13</b> Removing List Elements Using a Condition</a></li>
<li class="chapter" data-level="5.14" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id062"><i class="fa fa-check"></i><b>5.14</b> Initializing a Matrix</a></li>
<li class="chapter" data-level="5.15" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id139"><i class="fa fa-check"></i><b>5.15</b> Performing Matrix Operations</a></li>
<li class="chapter" data-level="5.16" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id063"><i class="fa fa-check"></i><b>5.16</b> Giving Descriptive Names to the Rows and Columns of a Matrix</a></li>
<li class="chapter" data-level="5.17" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id250"><i class="fa fa-check"></i><b>5.17</b> Selecting One Row or Column from a Matrix</a></li>
<li class="chapter" data-level="5.18" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id251"><i class="fa fa-check"></i><b>5.18</b> Initializing a Data Frame from Column Data</a></li>
<li class="chapter" data-level="5.19" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id252"><i class="fa fa-check"></i><b>5.19</b> Initializing a Data Frame from Row Data</a></li>
<li class="chapter" data-level="5.20" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id071"><i class="fa fa-check"></i><b>5.20</b> Appending Rows to a Data Frame</a></li>
<li class="chapter" data-level="5.21" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id068"><i class="fa fa-check"></i><b>5.21</b> Selecting Data Frame Columns by Position</a></li>
<li class="chapter" data-level="5.22" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id254"><i class="fa fa-check"></i><b>5.22</b> Selecting Data Frame Columns by Name</a></li>
<li class="chapter" data-level="5.23" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id069"><i class="fa fa-check"></i><b>5.23</b> Changing the Names of Data Frame Columns</a></li>
<li class="chapter" data-level="5.24" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id249"><i class="fa fa-check"></i><b>5.24</b> Removing NAs from a Data Frame</a></li>
<li class="chapter" data-level="5.25" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id072"><i class="fa fa-check"></i><b>5.25</b> Excluding Columns by Name</a></li>
<li class="chapter" data-level="5.26" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id155"><i class="fa fa-check"></i><b>5.26</b> Combining Two Data Frames</a></li>
<li class="chapter" data-level="5.27" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id057"><i class="fa fa-check"></i><b>5.27</b> Merging Data Frames by Common Column</a></li>
<li class="chapter" data-level="5.28" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id248"><i class="fa fa-check"></i><b>5.28</b> Converting One Atomic Value into Another</a></li>
<li class="chapter" data-level="5.29" data-path="DataStructures.html"><a href="DataStructures.html#recipe-id074"><i class="fa fa-check"></i><b>5.29</b> Converting One Structured Data Type into Another</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="DataTransformations.html"><a href="DataTransformations.html"><i class="fa fa-check"></i><b>6</b> Data Transformations</a>
<ul>
<li class="chapter" data-level="" data-path="DataTransformations.html"><a href="DataTransformations.html#intro-DataTransformations"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="6.1" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id149"><i class="fa fa-check"></i><b>6.1</b> Applying a Function to Each List Element</a></li>
<li class="chapter" data-level="6.2" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-row_df"><i class="fa fa-check"></i><b>6.2</b> Applying a Function to Every Row of a Data Frame</a></li>
<li class="chapter" data-level="6.3" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id146"><i class="fa fa-check"></i><b>6.3</b> Applying a Function to Every Row of a Matrix</a></li>
<li class="chapter" data-level="6.4" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id157"><i class="fa fa-check"></i><b>6.4</b> Applying a Function to Every Column</a></li>
<li class="chapter" data-level="6.5" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id275"><i class="fa fa-check"></i><b>6.5</b> Applying a Function to Parallel Vectors or Lists</a></li>
<li class="chapter" data-level="6.6" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-id148"><i class="fa fa-check"></i><b>6.6</b> Applying a Function to Groups of Data</a></li>
<li class="chapter" data-level="6.7" data-path="DataTransformations.html"><a href="DataTransformations.html#recipe-casewhen"><i class="fa fa-check"></i><b>6.7</b> Creating a New Column Based on Some Condition</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="StringsAndDates.html"><a href="StringsAndDates.html"><i class="fa fa-check"></i><b>7</b> Strings and Dates</a>
<ul>
<li class="chapter" data-level="" data-path="StringsAndDates.html"><a href="StringsAndDates.html#I_sect17_d1e17434"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="7.1" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id093"><i class="fa fa-check"></i><b>7.1</b> Getting the Length of a String</a></li>
<li class="chapter" data-level="7.2" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id040"><i class="fa fa-check"></i><b>7.2</b> Concatenating Strings</a></li>
<li class="chapter" data-level="7.3" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id041"><i class="fa fa-check"></i><b>7.3</b> Extracting Substrings</a></li>
<li class="chapter" data-level="7.4" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id276"><i class="fa fa-check"></i><b>7.4</b> Splitting a String According to a Delimiter</a></li>
<li class="chapter" data-level="7.5" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id277"><i class="fa fa-check"></i><b>7.5</b> Replacing Substrings</a></li>
<li class="chapter" data-level="7.6" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id109"><i class="fa fa-check"></i><b>7.6</b> Generating All Pairwise Combinations of Strings</a></li>
<li class="chapter" data-level="7.7" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id045"><i class="fa fa-check"></i><b>7.7</b> Getting the Current Date</a></li>
<li class="chapter" data-level="7.8" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id043"><i class="fa fa-check"></i><b>7.8</b> Converting a String into a Date</a></li>
<li class="chapter" data-level="7.9" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id044"><i class="fa fa-check"></i><b>7.9</b> Converting a Date into a String</a></li>
<li class="chapter" data-level="7.10" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id241"><i class="fa fa-check"></i><b>7.10</b> Converting Year, Month, and Day into a Date</a></li>
<li class="chapter" data-level="7.11" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id042"><i class="fa fa-check"></i><b>7.11</b> Getting the Julian Date</a></li>
<li class="chapter" data-level="7.12" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id046"><i class="fa fa-check"></i><b>7.12</b> Extracting the Parts of a Date</a></li>
<li class="chapter" data-level="7.13" data-path="StringsAndDates.html"><a href="StringsAndDates.html#recipe-id047"><i class="fa fa-check"></i><b>7.13</b> Creating a Sequence of Dates</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Probability.html"><a href="Probability.html"><i class="fa fa-check"></i><b>8</b> Probability</a>
<ul>
<li class="chapter" data-level="" data-path="Probability.html"><a href="Probability.html#intro-Probability"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="8.1" data-path="Probability.html"><a href="Probability.html#recipe-id163"><i class="fa fa-check"></i><b>8.1</b> Counting the Number of Combinations</a></li>
<li class="chapter" data-level="8.2" data-path="Probability.html"><a href="Probability.html#recipe-id198"><i class="fa fa-check"></i><b>8.2</b> Generating Combinations</a></li>
<li class="chapter" data-level="8.3" data-path="Probability.html"><a href="Probability.html#recipe-id165"><i class="fa fa-check"></i><b>8.3</b> Generating Random Numbers</a></li>
<li class="chapter" data-level="8.4" data-path="Probability.html"><a href="Probability.html#recipe-id201"><i class="fa fa-check"></i><b>8.4</b> Generating Reproducible Random Numbers</a></li>
<li class="chapter" data-level="8.5" data-path="Probability.html"><a href="Probability.html#recipe-id199"><i class="fa fa-check"></i><b>8.5</b> Generating a Random Sample</a></li>
<li class="chapter" data-level="8.6" data-path="Probability.html"><a href="Probability.html#recipe-id200"><i class="fa fa-check"></i><b>8.6</b> Generating Random Sequences</a></li>
<li class="chapter" data-level="8.7" data-path="Probability.html"><a href="Probability.html#recipe-id151"><i class="fa fa-check"></i><b>8.7</b> Randomly Permuting a Vector</a></li>
<li class="chapter" data-level="8.8" data-path="Probability.html"><a href="Probability.html#recipe-id196"><i class="fa fa-check"></i><b>8.8</b> Calculating Probabilities for Discrete Distributions</a></li>
<li class="chapter" data-level="8.9" data-path="Probability.html"><a href="Probability.html#recipe-id197"><i class="fa fa-check"></i><b>8.9</b> Calculating Probabilities for Continuous Distributions</a></li>
<li class="chapter" data-level="8.10" data-path="Probability.html"><a href="Probability.html#recipe-id168"><i class="fa fa-check"></i><b>8.10</b> Converting Probabilities to Quantiles</a></li>
<li class="chapter" data-level="8.11" data-path="Probability.html"><a href="Probability.html#recipe-id166"><i class="fa fa-check"></i><b>8.11</b> Plotting a Density Function</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html"><i class="fa fa-check"></i><b>9</b> General Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#intro-GeneralStatistics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="9.1" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id119"><i class="fa fa-check"></i><b>9.1</b> Summarizing Your Data</a></li>
<li class="chapter" data-level="9.2" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id229"><i class="fa fa-check"></i><b>9.2</b> Calculating Relative Frequencies</a></li>
<li class="chapter" data-level="9.3" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id124"><i class="fa fa-check"></i><b>9.3</b> Tabulating Factors and Creating Contingency Tables</a></li>
<li class="chapter" data-level="9.4" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id125"><i class="fa fa-check"></i><b>9.4</b> Testing Categorical Variables for Independence</a></li>
<li class="chapter" data-level="9.5" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id143"><i class="fa fa-check"></i><b>9.5</b> Calculating Quantiles (and Quartiles) of a Dataset</a></li>
<li class="chapter" data-level="9.6" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id142"><i class="fa fa-check"></i><b>9.6</b> Inverting a Quantile</a></li>
<li class="chapter" data-level="9.7" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id133"><i class="fa fa-check"></i><b>9.7</b> Converting Data to z-Scores</a></li>
<li class="chapter" data-level="9.8" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id121"><i class="fa fa-check"></i><b>9.8</b> Testing the Mean of a Sample (t Test)</a></li>
<li class="chapter" data-level="9.9" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id123"><i class="fa fa-check"></i><b>9.9</b> Forming a Confidence Interval for a Mean</a></li>
<li class="chapter" data-level="9.10" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id135"><i class="fa fa-check"></i><b>9.10</b> Forming a Confidence Interval for a Median</a></li>
<li class="chapter" data-level="9.11" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id225"><i class="fa fa-check"></i><b>9.11</b> Testing a Sample Proportion</a></li>
<li class="chapter" data-level="9.12" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id226"><i class="fa fa-check"></i><b>9.12</b> Forming a Confidence Interval for a Proportion</a></li>
<li class="chapter" data-level="9.13" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id126"><i class="fa fa-check"></i><b>9.13</b> Testing for Normality</a></li>
<li class="chapter" data-level="9.14" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id131"><i class="fa fa-check"></i><b>9.14</b> Testing for Runs</a></li>
<li class="chapter" data-level="9.15" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id122"><i class="fa fa-check"></i><b>9.15</b> Comparing the Means of Two Samples</a></li>
<li class="chapter" data-level="9.16" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id130"><i class="fa fa-check"></i><b>9.16</b> Comparing the Locations of Two Samples Nonparametrically</a></li>
<li class="chapter" data-level="9.17" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id132"><i class="fa fa-check"></i><b>9.17</b> Testing a Correlation for Significance</a></li>
<li class="chapter" data-level="9.18" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id134"><i class="fa fa-check"></i><b>9.18</b> Testing Groups for Equal Proportions</a></li>
<li class="chapter" data-level="9.19" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id127"><i class="fa fa-check"></i><b>9.19</b> Performing Pairwise Comparisons Between Group Means</a></li>
<li class="chapter" data-level="9.20" data-path="GeneralStatistics.html"><a href="GeneralStatistics.html#recipe-id129"><i class="fa fa-check"></i><b>9.20</b> Testing Two Samples for the Same Distribution</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Graphics.html"><a href="Graphics.html"><i class="fa fa-check"></i><b>10</b> Graphics</a>
<ul>
<li class="chapter" data-level="" data-path="Graphics.html"><a href="Graphics.html#intro-Graphics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="10.1" data-path="Graphics.html"><a href="Graphics.html#recipe-id171"><i class="fa fa-check"></i><b>10.1</b> Creating a Scatter Plot</a></li>
<li class="chapter" data-level="10.2" data-path="Graphics.html"><a href="Graphics.html#recipe-id259"><i class="fa fa-check"></i><b>10.2</b> Adding a Title and Labels</a></li>
<li class="chapter" data-level="10.3" data-path="Graphics.html"><a href="Graphics.html#recipe-id261"><i class="fa fa-check"></i><b>10.3</b> Adding (or Removing) a Grid</a></li>
<li class="chapter" data-level="10.4" data-path="Graphics.html"><a href="Graphics.html#recipe-theme"><i class="fa fa-check"></i><b>10.4</b> Applying a Theme to a ggplot Figure</a></li>
<li class="chapter" data-level="10.5" data-path="Graphics.html"><a href="Graphics.html#recipe-id262"><i class="fa fa-check"></i><b>10.5</b> Creating a Scatter Plot of Multiple Groups</a></li>
<li class="chapter" data-level="10.6" data-path="Graphics.html"><a href="Graphics.html#recipe-id260"><i class="fa fa-check"></i><b>10.6</b> Adding (or Removing) a Legend</a></li>
<li class="chapter" data-level="10.7" data-path="Graphics.html"><a href="Graphics.html#recipe-id217"><i class="fa fa-check"></i><b>10.7</b> Plotting the Regression Line of a Scatter Plot</a></li>
<li class="chapter" data-level="10.8" data-path="Graphics.html"><a href="Graphics.html#recipe-id184"><i class="fa fa-check"></i><b>10.8</b> Plotting All Variables Against All Other Variables</a></li>
<li class="chapter" data-level="10.9" data-path="Graphics.html"><a href="Graphics.html#recipe-id185"><i class="fa fa-check"></i><b>10.9</b> Creating One Scatter Plot for Each Group</a></li>
<li class="chapter" data-level="10.10" data-path="Graphics.html"><a href="Graphics.html#recipe-id175"><i class="fa fa-check"></i><b>10.10</b> Creating a Bar Chart</a></li>
<li class="chapter" data-level="10.11" data-path="Graphics.html"><a href="Graphics.html#recipe-id177"><i class="fa fa-check"></i><b>10.11</b> Adding Confidence Intervals to a Bar Chart</a></li>
<li class="chapter" data-level="10.12" data-path="Graphics.html"><a href="Graphics.html#recipe-id176"><i class="fa fa-check"></i><b>10.12</b> Coloring a Bar Chart</a></li>
<li class="chapter" data-level="10.13" data-path="Graphics.html"><a href="Graphics.html#recipe-id174"><i class="fa fa-check"></i><b>10.13</b> Plotting a Line from x and y Points</a></li>
<li class="chapter" data-level="10.14" data-path="Graphics.html"><a href="Graphics.html#recipe-id256"><i class="fa fa-check"></i><b>10.14</b> Changing the Type, Width, or Color of a Line</a></li>
<li class="chapter" data-level="10.15" data-path="Graphics.html"><a href="Graphics.html#recipe-id263"><i class="fa fa-check"></i><b>10.15</b> Plotting Multiple Datasets</a></li>
<li class="chapter" data-level="10.16" data-path="Graphics.html"><a href="Graphics.html#recipe-id186"><i class="fa fa-check"></i><b>10.16</b> Adding Vertical or Horizontal Lines</a></li>
<li class="chapter" data-level="10.17" data-path="Graphics.html"><a href="Graphics.html#recipe-id178"><i class="fa fa-check"></i><b>10.17</b> Creating a Boxplot</a></li>
<li class="chapter" data-level="10.18" data-path="Graphics.html"><a href="Graphics.html#recipe-id179"><i class="fa fa-check"></i><b>10.18</b> Creating One Boxplot for Each Factor Level</a></li>
<li class="chapter" data-level="10.19" data-path="Graphics.html"><a href="Graphics.html#recipe-id182"><i class="fa fa-check"></i><b>10.19</b> Creating a Histogram</a></li>
<li class="chapter" data-level="10.20" data-path="Graphics.html"><a href="Graphics.html#recipe-id183"><i class="fa fa-check"></i><b>10.20</b> Adding a Density Estimate to a Histogram</a></li>
<li class="chapter" data-level="10.21" data-path="Graphics.html"><a href="Graphics.html#recipe-id180"><i class="fa fa-check"></i><b>10.21</b> Creating a Normal Quantile–Quantile Plot</a></li>
<li class="chapter" data-level="10.22" data-path="Graphics.html"><a href="Graphics.html#recipe-id181"><i class="fa fa-check"></i><b>10.22</b> Creating Other Quantile–Quantile Plots</a></li>
<li class="chapter" data-level="10.23" data-path="Graphics.html"><a href="Graphics.html#recipe-id191"><i class="fa fa-check"></i><b>10.23</b> Plotting a Variable in Multiple Colors</a></li>
<li class="chapter" data-level="10.24" data-path="Graphics.html"><a href="Graphics.html#recipe-id192"><i class="fa fa-check"></i><b>10.24</b> Graphing a Function</a></li>
<li class="chapter" data-level="10.25" data-path="Graphics.html"><a href="Graphics.html#recipe-id190"><i class="fa fa-check"></i><b>10.25</b> Displaying Several Figures on One Page</a></li>
<li class="chapter" data-level="10.26" data-path="Graphics.html"><a href="Graphics.html#recipe-id188"><i class="fa fa-check"></i><b>10.26</b> Writing Your Plot to a File</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html"><i class="fa fa-check"></i><b>11</b> Linear Regression and ANOVA</a>
<ul>
<li class="chapter" data-level="" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#intro-LinearRegressionAndANOVA"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="11.1" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id203"><i class="fa fa-check"></i><b>11.1</b> Performing Simple Linear Regression</a></li>
<li class="chapter" data-level="11.2" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id204"><i class="fa fa-check"></i><b>11.2</b> Performing Multiple Linear Regression</a></li>
<li class="chapter" data-level="11.3" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id231"><i class="fa fa-check"></i><b>11.3</b> Getting Regression Statistics</a></li>
<li class="chapter" data-level="11.4" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id240"><i class="fa fa-check"></i><b>11.4</b> Understanding the Regression Summary</a></li>
<li class="chapter" data-level="11.5" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id205"><i class="fa fa-check"></i><b>11.5</b> Performing Linear Regression Without an Intercept</a></li>
<li class="chapter" data-level="11.6" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#title-highcor"><i class="fa fa-check"></i><b>11.6</b> Regressing Only Variables That Highly Correlate with Your Dependent Variable</a></li>
<li class="chapter" data-level="11.7" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id206"><i class="fa fa-check"></i><b>11.7</b> Performing Linear Regression with Interaction Terms</a></li>
<li class="chapter" data-level="11.8" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id236"><i class="fa fa-check"></i><b>11.8</b> Selecting the Best Regression Variables</a></li>
<li class="chapter" data-level="11.9" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id209"><i class="fa fa-check"></i><b>11.9</b> Regressing on a Subset of Your Data</a></li>
<li class="chapter" data-level="11.10" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id244"><i class="fa fa-check"></i><b>11.10</b> Using an Expression Inside a Regression Formula</a></li>
<li class="chapter" data-level="11.11" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id243"><i class="fa fa-check"></i><b>11.11</b> Regressing on a Polynomial</a></li>
<li class="chapter" data-level="11.12" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id208"><i class="fa fa-check"></i><b>11.12</b> Regressing on Transformed Data</a></li>
<li class="chapter" data-level="11.13" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id210"><i class="fa fa-check"></i><b>11.13</b> Finding the Best Power Transformation (Box–Cox Procedure)</a></li>
<li class="chapter" data-level="11.14" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id211"><i class="fa fa-check"></i><b>11.14</b> Forming Confidence Intervals for Regression Coefficients</a></li>
<li class="chapter" data-level="11.15" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id216"><i class="fa fa-check"></i><b>11.15</b> Plotting Regression Residuals</a></li>
<li class="chapter" data-level="11.16" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id212"><i class="fa fa-check"></i><b>11.16</b> Diagnosing a Linear Regression</a></li>
<li class="chapter" data-level="11.17" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id233"><i class="fa fa-check"></i><b>11.17</b> Identifying Influential Observations</a></li>
<li class="chapter" data-level="11.18" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id213"><i class="fa fa-check"></i><b>11.18</b> Testing Residuals for Autocorrelation (Durbin–Watson Test)</a></li>
<li class="chapter" data-level="11.19" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id214"><i class="fa fa-check"></i><b>11.19</b> Predicting New Values</a></li>
<li class="chapter" data-level="11.20" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id215"><i class="fa fa-check"></i><b>11.20</b> Forming Prediction Intervals</a></li>
<li class="chapter" data-level="11.21" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id218"><i class="fa fa-check"></i><b>11.21</b> Performing One-Way ANOVA</a></li>
<li class="chapter" data-level="11.22" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id221"><i class="fa fa-check"></i><b>11.22</b> Creating an Interaction Plot</a></li>
<li class="chapter" data-level="11.23" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id220"><i class="fa fa-check"></i><b>11.23</b> Finding Differences Between Means of Groups</a></li>
<li class="chapter" data-level="11.24" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id228"><i class="fa fa-check"></i><b>11.24</b> Performing Robust ANOVA (Kruskal–Wallis Test)</a></li>
<li class="chapter" data-level="11.25" data-path="LinearRegressionAndANOVA.html"><a href="LinearRegressionAndANOVA.html#recipe-id232"><i class="fa fa-check"></i><b>11.25</b> Comparing Models by Using ANOVA</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="UsefulTricks.html"><a href="UsefulTricks.html"><i class="fa fa-check"></i><b>12</b> Useful Tricks</a>
<ul>
<li class="chapter" data-level="" data-path="UsefulTricks.html"><a href="UsefulTricks.html#intro-UsefulTricks"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="12.1" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id278"><i class="fa fa-check"></i><b>12.1</b> Peeking at Your Data</a></li>
<li class="chapter" data-level="12.2" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id271"><i class="fa fa-check"></i><b>12.2</b> Printing the Result of an Assignment</a></li>
<li class="chapter" data-level="12.3" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id138"><i class="fa fa-check"></i><b>12.3</b> Summing Rows and Columns</a></li>
<li class="chapter" data-level="12.4" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id112"><i class="fa fa-check"></i><b>12.4</b> Printing Data in Columns</a></li>
<li class="chapter" data-level="12.5" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id137"><i class="fa fa-check"></i><b>12.5</b> Binning Your Data</a></li>
<li class="chapter" data-level="12.6" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id116"><i class="fa fa-check"></i><b>12.6</b> Finding the Position of a Particular Value</a></li>
<li class="chapter" data-level="12.7" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id103"><i class="fa fa-check"></i><b>12.7</b> Selecting Every nth Element of a Vector</a></li>
<li class="chapter" data-level="12.8" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id107"><i class="fa fa-check"></i><b>12.8</b> Finding Minimums or Maximums</a></li>
<li class="chapter" data-level="12.9" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id110"><i class="fa fa-check"></i><b>12.9</b> Generating All Combinations of Several Variables</a></li>
<li class="chapter" data-level="12.10" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id153"><i class="fa fa-check"></i><b>12.10</b> Flattening a Data Frame</a></li>
<li class="chapter" data-level="12.11" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id247"><i class="fa fa-check"></i><b>12.11</b> Sorting a Data Frame</a></li>
<li class="chapter" data-level="12.12" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id223"><i class="fa fa-check"></i><b>12.12</b> Stripping Attributes from a Variable</a></li>
<li class="chapter" data-level="12.13" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id202"><i class="fa fa-check"></i><b>12.13</b> Revealing the Structure of an Object</a></li>
<li class="chapter" data-level="12.14" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id224"><i class="fa fa-check"></i><b>12.14</b> Timing Your Code</a></li>
<li class="chapter" data-level="12.15" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id113"><i class="fa fa-check"></i><b>12.15</b> Suppressing Warnings and Error Messages</a></li>
<li class="chapter" data-level="12.16" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id118"><i class="fa fa-check"></i><b>12.16</b> Taking Function Arguments from a List</a></li>
<li class="chapter" data-level="12.17" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id114"><i class="fa fa-check"></i><b>12.17</b> Defining Your Own Binary Operators</a></li>
<li class="chapter" data-level="12.18" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id111"><i class="fa fa-check"></i><b>12.18</b> Suppressing the Startup Message</a></li>
<li class="chapter" data-level="12.19" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-id106"><i class="fa fa-check"></i><b>12.19</b> Getting and Setting Environment Variables</a></li>
<li class="chapter" data-level="12.20" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-codesections"><i class="fa fa-check"></i><b>12.20</b> Use Code Sections</a></li>
<li class="chapter" data-level="12.21" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-parallel_local"><i class="fa fa-check"></i><b>12.21</b> Executing R in Parallel Locally</a></li>
<li class="chapter" data-level="12.22" data-path="UsefulTricks.html"><a href="UsefulTricks.html#recipe-parallel_remote"><i class="fa fa-check"></i><b>12.22</b> Executing R in Parallel Remotely</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="BeyondBasics.html"><a href="BeyondBasics.html"><i class="fa fa-check"></i><b>13</b> Beyond Basic Numerics and Statistics</a>
<ul>
<li class="chapter" data-level="" data-path="BeyondBasics.html"><a href="BeyondBasics.html#intro-BeyondBasics"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="13.1" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id234"><i class="fa fa-check"></i><b>13.1</b> Minimizing or Maximizing a Single-Parameter Function</a></li>
<li class="chapter" data-level="13.2" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id235"><i class="fa fa-check"></i><b>13.2</b> Minimizing or Maximizing a Multiparameter Function</a></li>
<li class="chapter" data-level="13.3" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id140"><i class="fa fa-check"></i><b>13.3</b> Calculating Eigenvalues and Eigenvectors</a></li>
<li class="chapter" data-level="13.4" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id162"><i class="fa fa-check"></i><b>13.4</b> Performing Principal Component Analysis</a></li>
<li class="chapter" data-level="13.5" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id264"><i class="fa fa-check"></i><b>13.5</b> Performing Simple Orthogonal Regression</a></li>
<li class="chapter" data-level="13.6" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id160"><i class="fa fa-check"></i><b>13.6</b> Finding Clusters in Your Data</a></li>
<li class="chapter" data-level="13.7" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id161"><i class="fa fa-check"></i><b>13.7</b> Predicting a Binary-Valued Variable (Logistic Regression)</a></li>
<li class="chapter" data-level="13.8" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id159"><i class="fa fa-check"></i><b>13.8</b> Bootstrapping a Statistic</a></li>
<li class="chapter" data-level="13.9" data-path="BeyondBasics.html"><a href="BeyondBasics.html#recipe-id193"><i class="fa fa-check"></i><b>13.9</b> Factor Analysis</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html"><i class="fa fa-check"></i><b>14</b> Time Series Analysis</a>
<ul>
<li class="chapter" data-level="" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#introduction"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="14.1" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id076"><i class="fa fa-check"></i><b>14.1</b> Representing Time Series Data</a></li>
<li class="chapter" data-level="14.2" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id089"><i class="fa fa-check"></i><b>14.2</b> Plotting Time Series Data</a></li>
<li class="chapter" data-level="14.3" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id077"><i class="fa fa-check"></i><b>14.3</b> Extracting the Oldest or Newest Observations</a></li>
<li class="chapter" data-level="14.4" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id281"><i class="fa fa-check"></i><b>14.4</b> Subsetting a Time Series</a></li>
<li class="chapter" data-level="14.5" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id079"><i class="fa fa-check"></i><b>14.5</b> Merging Several Time Series</a></li>
<li class="chapter" data-level="14.6" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id239"><i class="fa fa-check"></i><b>14.6</b> Filling or Padding a Time Series</a></li>
<li class="chapter" data-level="14.7" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id280"><i class="fa fa-check"></i><b>14.7</b> Lagging a Time Series</a></li>
<li class="chapter" data-level="14.8" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id141"><i class="fa fa-check"></i><b>14.8</b> Computing Successive Differences</a></li>
<li class="chapter" data-level="14.9" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id080"><i class="fa fa-check"></i><b>14.9</b> Performing Calculations on Time Series</a></li>
<li class="chapter" data-level="14.10" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id279"><i class="fa fa-check"></i><b>14.10</b> Computing a Moving Average</a></li>
<li class="chapter" data-level="14.11" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id282"><i class="fa fa-check"></i><b>14.11</b> Applying a Function by Calendar Period</a></li>
<li class="chapter" data-level="14.12" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id081"><i class="fa fa-check"></i><b>14.12</b> Applying a Rolling Function</a></li>
<li class="chapter" data-level="14.13" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id082"><i class="fa fa-check"></i><b>14.13</b> Plotting the Autocorrelation Function</a></li>
<li class="chapter" data-level="14.14" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id104"><i class="fa fa-check"></i><b>14.14</b> Testing a Time Series for Autocorrelation</a></li>
<li class="chapter" data-level="14.15" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id083"><i class="fa fa-check"></i><b>14.15</b> Plotting the Partial Autocorrelation Function</a></li>
<li class="chapter" data-level="14.16" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id084"><i class="fa fa-check"></i><b>14.16</b> Finding Lagged Correlations Between Two Time Series</a></li>
<li class="chapter" data-level="14.17" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id088"><i class="fa fa-check"></i><b>14.17</b> Detrending a Time Series</a></li>
<li class="chapter" data-level="14.18" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id085"><i class="fa fa-check"></i><b>14.18</b> Fitting an ARIMA Model</a></li>
<li class="chapter" data-level="14.19" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id237"><i class="fa fa-check"></i><b>14.19</b> Removing Insignificant ARIMA Coefficients</a></li>
<li class="chapter" data-level="14.20" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id238"><i class="fa fa-check"></i><b>14.20</b> Running Diagnostics on an ARIMA Model</a></li>
<li class="chapter" data-level="14.21" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id086"><i class="fa fa-check"></i><b>14.21</b> Making Forecasts from an ARIMA Model</a></li>
<li class="chapter" data-level="14.22" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-plotting_forecast"><i class="fa fa-check"></i><b>14.22</b> Plotting a Forecast</a></li>
<li class="chapter" data-level="14.23" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id087"><i class="fa fa-check"></i><b>14.23</b> Testing for Mean Reversion</a></li>
<li class="chapter" data-level="14.24" data-path="TimeSeriesAnalysis.html"><a href="TimeSeriesAnalysis.html#recipe-id195"><i class="fa fa-check"></i><b>14.24</b> Smoothing a Time Series</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html"><i class="fa fa-check"></i><b>15</b> Simple Programming</a>
<ul>
<li class="chapter" data-level="" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#intro-SimpleProgramming"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="15.1" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-creating_if_logic"><i class="fa fa-check"></i><b>15.1</b> Choosing Between Two Alternatives: if-else</a></li>
<li class="chapter" data-level="15.2" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-for_loop"><i class="fa fa-check"></i><b>15.2</b> Iterating with a Loop</a></li>
<li class="chapter" data-level="15.3" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-id117"><i class="fa fa-check"></i><b>15.3</b> Defining a Function</a></li>
<li class="chapter" data-level="15.4" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-variable"><i class="fa fa-check"></i><b>15.4</b> Creating a Local Variable</a></li>
<li class="chapter" data-level="15.5" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#choosing-between-multiple-alternatives-switch"><i class="fa fa-check"></i><b>15.5</b> Choosing Between Multiple Alternatives: switch</a></li>
<li class="chapter" data-level="15.6" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-title"><i class="fa fa-check"></i><b>15.6</b> Defining Defaults for Function Parameters</a></li>
<li class="chapter" data-level="15.7" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#signaling-errors"><i class="fa fa-check"></i><b>15.7</b> Signaling Errors</a></li>
<li class="chapter" data-level="15.8" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#protecting-against-errors"><i class="fa fa-check"></i><b>15.8</b> Protecting Against Errors</a></li>
<li class="chapter" data-level="15.9" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-anon-function"><i class="fa fa-check"></i><b>15.9</b> Creating an Anonymous Function</a></li>
<li class="chapter" data-level="15.10" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#creating-a-collection-of-reusable-functions"><i class="fa fa-check"></i><b>15.10</b> Creating a Collection of Reusable Functions</a></li>
<li class="chapter" data-level="15.11" data-path="SimpleProgramming.html"><a href="SimpleProgramming.html#recipe-indent"><i class="fa fa-check"></i><b>15.11</b> Automatically Reindent Code</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="RMarkdown.html"><a href="RMarkdown.html"><i class="fa fa-check"></i><b>16</b> R Markdown and Publishing</a>
<ul>
<li class="chapter" data-level="" data-path="RMarkdown.html"><a href="RMarkdown.html#intro-Rmd_pub"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="16.1" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-new_doc"><i class="fa fa-check"></i><b>16.1</b> Creating a New Document</a></li>
<li class="chapter" data-level="16.2" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-metadata"><i class="fa fa-check"></i><b>16.2</b> Adding a Title, Author, or Date</a></li>
<li class="chapter" data-level="16.3" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-doc-text"><i class="fa fa-check"></i><b>16.3</b> Formatting Document Text</a></li>
<li class="chapter" data-level="16.4" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-headings"><i class="fa fa-check"></i><b>16.4</b> Inserting Document Headings</a></li>
<li class="chapter" data-level="16.5" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-list"><i class="fa fa-check"></i><b>16.5</b> Inserting a List</a></li>
<li class="chapter" data-level="16.6" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-exec_r"><i class="fa fa-check"></i><b>16.6</b> Showing Output from R Code</a></li>
<li class="chapter" data-level="16.7" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-code-results"><i class="fa fa-check"></i><b>16.7</b> Controlling Which Code and Results Are Shown</a></li>
<li class="chapter" data-level="16.8" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-doc_plot"><i class="fa fa-check"></i><b>16.8</b> Inserting a Plot</a></li>
<li class="chapter" data-level="16.9" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-static-table"><i class="fa fa-check"></i><b>16.9</b> Inserting a Table</a></li>
<li class="chapter" data-level="16.10" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-tables"><i class="fa fa-check"></i><b>16.10</b> Inserting a Table of Data</a></li>
<li class="chapter" data-level="16.11" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-equations"><i class="fa fa-check"></i><b>16.11</b> Inserting Math Equations</a></li>
<li class="chapter" data-level="16.12" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-html"><i class="fa fa-check"></i><b>16.12</b> Generating HTML Output</a></li>
<li class="chapter" data-level="16.13" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-pdf"><i class="fa fa-check"></i><b>16.13</b> Generating PDF Output</a></li>
<li class="chapter" data-level="16.14" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-word"><i class="fa fa-check"></i><b>16.14</b> Generating Microsoft Word Output</a></li>
<li class="chapter" data-level="16.15" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-prez"><i class="fa fa-check"></i><b>16.15</b> Generating Presentation Output</a></li>
<li class="chapter" data-level="16.16" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-param_report"><i class="fa fa-check"></i><b>16.16</b> Creating a Parameterized Report</a></li>
<li class="chapter" data-level="16.17" data-path="RMarkdown.html"><a href="RMarkdown.html#recipe-rmd_org"><i class="fa fa-check"></i><b>16.17</b> Organizing Your R Markdown Workflow</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Cookbook, 2nd Edition</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="DataStructures" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Data Structures<a href="DataStructures.html#DataStructures" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="intro-DataStructures" class="section level2 unnumbered hasAnchor">
<h2>Introduction<a href="DataStructures.html#intro-DataStructures" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>You can get pretty far in R just using vectors. That’s what
Chapter <a href="SomeBasics.html#SomeBasics">2</a> is all about. This chapter moves beyond vectors to
recipes for matrices, lists, factors, data frames, and tibbles (which are a special kind of data frames). If you have
preconceptions about data structures, we suggest you put them aside. R
does data structures differently than many other languages.</p>
<p>If you want to study the technical aspects of R’s data structures, we
suggest reading <a href="http://oreilly.com/catalog/9780596801717"><em>R in a
Nutshell</em></a> (O’Reilly) and the R
Language Definition. The notes here are more informal. These are things we
wish we’d known when we started using R.</p>
<div id="vectors" class="section level3 unnumbered hasAnchor">
<h3>Vectors<a href="DataStructures.html#vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here are some key properties of vectors:</p>
<dl>
<dt>Vectors are homogeneous</dt>
<dd>
<p>All elements of a vector must have the same type or, in R
terminology, the same <em>mode</em>.</p>
</dd>
<dt>Vectors can be indexed by position</dt>
<dd>
<p>So <code>v[2]</code> refers to the second element of <code>v</code>.</p>
</dd>
<dt>Vectors can be indexed by multiple positions, returning a subvector</dt>
<dd>
<p>So <code>v[c(2,3)]</code> is a subvector of <code>v</code> that consists of the second and
third elements.</p>
</dd>
<dt>Vector elements can have names</dt>
<dd>
<p>Vectors have a <code>names</code> property, the same length as the vector
itself, that gives names to the elements:</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb267-1"><a href="DataStructures.html#cb267-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">30</span>)</span>
<span id="cb267-2"><a href="DataStructures.html#cb267-2" tabindex="-1"></a><span class="fu">names</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Moe&quot;</span>, <span class="st">&quot;Larry&quot;</span>, <span class="st">&quot;Curly&quot;</span>)</span>
<span id="cb267-3"><a href="DataStructures.html#cb267-3" tabindex="-1"></a><span class="fu">print</span>(v)</span>
<span id="cb267-4"><a href="DataStructures.html#cb267-4" tabindex="-1"></a><span class="co">#&gt;   Moe Larry Curly </span></span>
<span id="cb267-5"><a href="DataStructures.html#cb267-5" tabindex="-1"></a><span class="co">#&gt;    10    20    30</span></span></code></pre></div>
</dd>
<dt>If vector elements have names, then you can select them by name</dt>
<dd>
<p>Continuing the previous example:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="DataStructures.html#cb268-1" tabindex="-1"></a>v[[<span class="st">&quot;Larry&quot;</span>]]</span>
<span id="cb268-2"><a href="DataStructures.html#cb268-2" tabindex="-1"></a><span class="co">#&gt; [1] 20</span></span></code></pre></div>
</dd>
</dl>
</div>
<div id="lists" class="section level3 unnumbered hasAnchor">
<h3>Lists<a href="DataStructures.html#lists" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<dl>
<dt>Lists are heterogeneous</dt>
<dd>
<p>Lists can contain elements of different types; in R terminology,
list elements may have different modes. Lists can even contain other
structured objects, such as lists and data frames; this allows you
to create recursive data structures.</p>
</dd>
<dt>Lists can be indexed by position</dt>
<dd>
<p>So <code>lst[[2]]</code> refers to the second element of <code>lst</code>. Note the double
square brackets. Double brackets means that R will return the element as whatever type of element it is.</p>
</dd>
<dt>Lists let you extract sublists</dt>
<dd>
<p>So <code>lst[c(2,3)]</code> is a sublist of <code>lst</code> that consists of the second
and third elements. Note the single square brackets. Single brackets means that R will return the items in a list. If you pull a single element with single brackets, like <code>lst[2]</code>, R will return a list of length 1 with the first item being the desired item.</p>
</dd>
<dt>List elements can have names</dt>
<dd>
<p>Both <code>lst[["Moe"]]</code> and <code>lst$Moe</code> refer to the element named “Moe.”</p>
</dd>
</dl>
<p>Since lists are heterogeneous and since their elements can be retrieved
by name, a list is like a dictionary or hash or lookup table in other
programming languages (discussed in Recipe <a href="DataStructures.html#recipe-id158">5.9</a>, <a href="DataStructures.html#recipe-id158">“Building a Name/Value Association List”</a>.</p>
<p>What’s surprising (and cool) is that in R, unlike most of those other
programming languages, lists can also be indexed by position.</p>
</div>
<div id="mode-physical-type" class="section level3 unnumbered hasAnchor">
<h3>Mode: Physical Type<a href="DataStructures.html#mode-physical-type" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, every object has a mode, which indicates how it is stored in
memory: as a number, as a character string, as a list of pointers to
other objects, as a function, and so forth (see Table <a href="DataStructures.html#tab:phystype">5.1</a>).</p>
<table style="width:97%;">
<caption><span id="tab:phystype">Table 5.1: </span> R object-mode mapping</caption>
<colgroup>
<col width="39%" />
<col width="42%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Object</th>
<th align="left">Example</th>
<th align="left">Mode</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Number</td>
<td align="left"><code>3.1415</code></td>
<td align="left">numeric</td>
</tr>
<tr class="even">
<td align="left">Vector of numbers</td>
<td align="left"><code>c(2.7.182, 3.1415)</code></td>
<td align="left">numeric</td>
</tr>
<tr class="odd">
<td align="left">Character string</td>
<td align="left"><code>"Moe"</code></td>
<td align="left">character</td>
</tr>
<tr class="even">
<td align="left">Vector of character strings</td>
<td align="left"><code>c("Moe", "Larry", "Curly")</code></td>
<td align="left">character</td>
</tr>
<tr class="odd">
<td align="left">Factor</td>
<td align="left"><code>factor(c("NY", "CA", "IL"))</code></td>
<td align="left">numeric</td>
</tr>
<tr class="even">
<td align="left">List</td>
<td align="left"><code>list("Moe", "Larry", "Curly")</code></td>
<td align="left">list</td>
</tr>
<tr class="odd">
<td align="left">Data frame</td>
<td align="left"><code>data.frame(x=1:3, y=c("NY", "CA", "IL"))</code></td>
<td align="left">list</td>
</tr>
<tr class="even">
<td align="left">Function</td>
<td align="left"><code>print</code></td>
<td align="left">function</td>
</tr>
</tbody>
</table>
<p>The <code>mode</code> function gives us this information:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb269-1"><a href="DataStructures.html#cb269-1" tabindex="-1"></a><span class="fu">mode</span>(<span class="fl">3.1415</span>)                        <span class="co"># Mode of a number</span></span>
<span id="cb269-2"><a href="DataStructures.html#cb269-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb269-3"><a href="DataStructures.html#cb269-3" tabindex="-1"></a><span class="fu">mode</span>(<span class="fu">c</span>(<span class="fl">2.7182</span>, <span class="fl">3.1415</span>))             <span class="co"># Mode of a vector of numbers</span></span>
<span id="cb269-4"><a href="DataStructures.html#cb269-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb269-5"><a href="DataStructures.html#cb269-5" tabindex="-1"></a><span class="fu">mode</span>(<span class="st">&quot;Moe&quot;</span>)                         <span class="co"># Mode of a character string</span></span>
<span id="cb269-6"><a href="DataStructures.html#cb269-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;character&quot;</span></span>
<span id="cb269-7"><a href="DataStructures.html#cb269-7" tabindex="-1"></a><span class="fu">mode</span>(<span class="fu">list</span>(<span class="st">&quot;Moe&quot;</span>, <span class="st">&quot;Larry&quot;</span>, <span class="st">&quot;Curly&quot;</span>)) <span class="co"># Mode of a list</span></span>
<span id="cb269-8"><a href="DataStructures.html#cb269-8" tabindex="-1"></a><span class="co">#&gt; [1] &quot;list&quot;</span></span></code></pre></div>
<p>A critical difference between a vector and a list can be summed up this
way:</p>
<ul>
<li><p>In a vector, all elements must have the same mode.</p></li>
<li><p>In a list, the elements can have different modes.</p></li>
</ul>
</div>
<div id="class-abstract-type" class="section level3 unnumbered hasAnchor">
<h3>Class: Abstract Type<a href="DataStructures.html#class-abstract-type" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, every object also has a class, which defines its abstract type.
The terminology is borrowed from object-oriented programming. A single
number could represent many different things: a distance, a point in
time, or a weight, for example. All those objects have a mode of “numeric” because they
are stored as a number, but they could have different classes to
indicate their interpretation.</p>
<p>For example, a <code>Date</code> object consists of a single number:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="DataStructures.html#cb270-1" tabindex="-1"></a>d <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">&quot;2010-03-15&quot;</span>)</span>
<span id="cb270-2"><a href="DataStructures.html#cb270-2" tabindex="-1"></a><span class="fu">mode</span>(d)</span>
<span id="cb270-3"><a href="DataStructures.html#cb270-3" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb270-4"><a href="DataStructures.html#cb270-4" tabindex="-1"></a><span class="fu">length</span>(d)</span>
<span id="cb270-5"><a href="DataStructures.html#cb270-5" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>But it has a class of <code>Date</code>, telling us how to interpret that number—namely, as the number of days since January 1, 1970:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb271-1"><a href="DataStructures.html#cb271-1" tabindex="-1"></a><span class="fu">class</span>(d)</span>
<span id="cb271-2"><a href="DataStructures.html#cb271-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Date&quot;</span></span></code></pre></div>
<p>R uses an object’s class to decide how to process the object. For
example, the generic function <code>print</code> has specialized versions (called
<em>methods</em>) for printing objects according to their class: <code>data.frame</code>,
<code>Date</code>, <code>lm</code>, and so forth. When you print an object, R calls the
appropriate <code>print</code> function according to the object’s class.</p>
</div>
<div id="scalars" class="section level3 unnumbered hasAnchor">
<h3>Scalars<a href="DataStructures.html#scalars" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The quirky thing about scalars is their relationship to vectors. In some
software, scalars and vectors are two different things. In R, they are
the same thing: a scalar is simply a vector that contains exactly one
element. In this book we often use the term <em>scalar</em>, but that’s just
shorthand for “vector with one element.”</p>
<p>Consider the built-in constant <code>pi</code>. It is a scalar:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="DataStructures.html#cb272-1" tabindex="-1"></a>pi</span>
<span id="cb272-2"><a href="DataStructures.html#cb272-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span></code></pre></div>
<p>Since a scalar is a one-element vector, you can use vector functions on
<code>pi</code>:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb273-1"><a href="DataStructures.html#cb273-1" tabindex="-1"></a><span class="fu">length</span>(pi)</span>
<span id="cb273-2"><a href="DataStructures.html#cb273-2" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>You can index it. The first (and only) element is <span class="math inline">\(\pi\)</span> of course:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="DataStructures.html#cb274-1" tabindex="-1"></a>pi[<span class="dv">1</span>]</span>
<span id="cb274-2"><a href="DataStructures.html#cb274-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span></code></pre></div>
<p>If you ask for the second element, there is none:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb275-1"><a href="DataStructures.html#cb275-1" tabindex="-1"></a>pi[<span class="dv">2</span>]</span>
<span id="cb275-2"><a href="DataStructures.html#cb275-2" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
</div>
<div id="matrices" class="section level3 unnumbered hasAnchor">
<h3>Matrices<a href="DataStructures.html#matrices" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, a matrix is just a vector that has dimensions. It may seem strange
at first, but you can transform a vector into a matrix simply by giving
it dimensions.</p>
<p>A vector has an attribute called <code>dim</code>, which is initially <code>NULL</code>, as
shown here:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="DataStructures.html#cb276-1" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb276-2"><a href="DataStructures.html#cb276-2" tabindex="-1"></a><span class="fu">dim</span>(A)</span>
<span id="cb276-3"><a href="DataStructures.html#cb276-3" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb276-4"><a href="DataStructures.html#cb276-4" tabindex="-1"></a><span class="fu">print</span>(A)</span>
<span id="cb276-5"><a href="DataStructures.html#cb276-5" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5 6</span></span></code></pre></div>
<p>We give dimensions to the vector when we set its <code>dim</code> attribute. Watch
what happens when we set our vector dimensions to 2 × 3 and print it:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb277-1"><a href="DataStructures.html#cb277-1" tabindex="-1"></a><span class="fu">dim</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb277-2"><a href="DataStructures.html#cb277-2" tabindex="-1"></a><span class="fu">print</span>(A)</span>
<span id="cb277-3"><a href="DataStructures.html#cb277-3" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb277-4"><a href="DataStructures.html#cb277-4" tabindex="-1"></a><span class="co">#&gt; [1,]    1    3    5</span></span>
<span id="cb277-5"><a href="DataStructures.html#cb277-5" tabindex="-1"></a><span class="co">#&gt; [2,]    2    4    6</span></span></code></pre></div>
<p>Voilà! The vector was reshaped into a 2 × 3 matrix.</p>
<p>A matrix can be created from a list, too. Like a vector, a list has a
<code>dim</code> attribute, which is initially <code>NULL</code>:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="DataStructures.html#cb278-1" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>)</span>
<span id="cb278-2"><a href="DataStructures.html#cb278-2" tabindex="-1"></a><span class="fu">dim</span>(B)</span>
<span id="cb278-3"><a href="DataStructures.html#cb278-3" tabindex="-1"></a><span class="co">#&gt; NULL</span></span></code></pre></div>
<p>If we set the <code>dim</code> attribute, it gives the list a shape:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb279-1"><a href="DataStructures.html#cb279-1" tabindex="-1"></a><span class="fu">dim</span>(B) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb279-2"><a href="DataStructures.html#cb279-2" tabindex="-1"></a><span class="fu">print</span>(B)</span>
<span id="cb279-3"><a href="DataStructures.html#cb279-3" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb279-4"><a href="DataStructures.html#cb279-4" tabindex="-1"></a><span class="co">#&gt; [1,] 1    3    5   </span></span>
<span id="cb279-5"><a href="DataStructures.html#cb279-5" tabindex="-1"></a><span class="co">#&gt; [2,] 2    4    6</span></span></code></pre></div>
<p>Voilà! We have turned this list into a 2 × 3 matrix.</p>
</div>
<div id="arrays" class="section level3 unnumbered hasAnchor">
<h3>Arrays<a href="DataStructures.html#arrays" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The discussion of matrices can be generalized to three-dimensional or even
<em>n</em>-dimensional structures: just assign more dimensions to the
underlying vector (or list). The following example creates a
three-dimensional array with dimensions 2 × 3 × 2:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="DataStructures.html#cb280-1" tabindex="-1"></a>D <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">12</span></span>
<span id="cb280-2"><a href="DataStructures.html#cb280-2" tabindex="-1"></a><span class="fu">dim</span>(D) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb280-3"><a href="DataStructures.html#cb280-3" tabindex="-1"></a><span class="fu">print</span>(D)</span>
<span id="cb280-4"><a href="DataStructures.html#cb280-4" tabindex="-1"></a><span class="co">#&gt; , , 1</span></span>
<span id="cb280-5"><a href="DataStructures.html#cb280-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb280-6"><a href="DataStructures.html#cb280-6" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb280-7"><a href="DataStructures.html#cb280-7" tabindex="-1"></a><span class="co">#&gt; [1,]    1    3    5</span></span>
<span id="cb280-8"><a href="DataStructures.html#cb280-8" tabindex="-1"></a><span class="co">#&gt; [2,]    2    4    6</span></span>
<span id="cb280-9"><a href="DataStructures.html#cb280-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb280-10"><a href="DataStructures.html#cb280-10" tabindex="-1"></a><span class="co">#&gt; , , 2</span></span>
<span id="cb280-11"><a href="DataStructures.html#cb280-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb280-12"><a href="DataStructures.html#cb280-12" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb280-13"><a href="DataStructures.html#cb280-13" tabindex="-1"></a><span class="co">#&gt; [1,]    7    9   11</span></span>
<span id="cb280-14"><a href="DataStructures.html#cb280-14" tabindex="-1"></a><span class="co">#&gt; [2,]    8   10   12</span></span></code></pre></div>
<p>Note that R prints one “slice” of the structure at a time, since it’s
not possible to print a three-dimensional structure on a two-dimensional
medium.</p>
<p>It strikes us as very odd that we can turn a list into a matrix just by
giving the list a <code>dim</code> attribute. But wait: it gets stranger.</p>
<p>Recall that a list can be heterogeneous (mixed modes). We can start with
a heterogeneous list, give it dimensions, and thus create a
heterogeneous matrix. This code snippet creates a matrix that is a mix
of numeric and character data:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb281-1"><a href="DataStructures.html#cb281-1" tabindex="-1"></a>C <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="st">&quot;X&quot;</span>, <span class="st">&quot;Y&quot;</span>, <span class="st">&quot;Z&quot;</span>)</span>
<span id="cb281-2"><a href="DataStructures.html#cb281-2" tabindex="-1"></a><span class="fu">dim</span>(C) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb281-3"><a href="DataStructures.html#cb281-3" tabindex="-1"></a><span class="fu">print</span>(C)</span>
<span id="cb281-4"><a href="DataStructures.html#cb281-4" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb281-5"><a href="DataStructures.html#cb281-5" tabindex="-1"></a><span class="co">#&gt; [1,] 1    3    &quot;Y&quot; </span></span>
<span id="cb281-6"><a href="DataStructures.html#cb281-6" tabindex="-1"></a><span class="co">#&gt; [2,] 2    &quot;X&quot;  &quot;Z&quot;</span></span></code></pre></div>
<p>To us, this is strange because we ordinarily assume a matrix is purely
numeric, not mixed. R is not that restrictive.</p>
<p>The possibility of a heterogeneous matrix may seem powerful and
strangely fascinating. However, it creates problems when you are doing
normal, day-to-day stuff with matrices. For example, what happens when
the matrix <code>C</code> (from the previous example) is used in matrix multiplication? What happens if
it is converted to a data frame? The answer is that odd things happen.</p>
<p>In this book, we generally ignore the pathological case of a
heterogeneous matrix. We assume you’ve got simple, vanilla matrices. Some
recipes involving matrices may work oddly (or not at all) if your matrix
contains mixed data. Converting such a matrix to a vector or data frame,
for instance, can be problematic
(see Recipe <a href="DataStructures.html#recipe-id074">5.29</a>, <a href="DataStructures.html#recipe-id074">“Converting One Structured Data Type into Another”</a>.)</p>
</div>
<div id="factors" class="section level3 unnumbered hasAnchor">
<h3>Factors<a href="DataStructures.html#factors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A factor looks like a character vector, but it has special properties. R keeps
track of the unique values in a vector, and each unique value is called
a <em>level</em> of the associated factor. R uses a compact representation for
factors, which makes them efficient for storage in data frames. In other
programming languages, a factor would be represented by a vector of
enumerated values.</p>
<p>There are two key uses for factors:</p>
<dl>
<dt>Categorical variables</dt>
<dd>
<p>A factor can represent a categorical variable. Categorical variables
are used in contingency tables, linear regression, analysis of
variance (ANOVA), logistic regression, and many other areas.</p>
</dd>
<dt>Grouping</dt>
<dd>
<p>This is a technique for labeling or tagging your data items
according to their group. See Chapter <a href="DataTransformations.html#DataTransformations">6</a>.</p>
</dd>
</dl>
</div>
<div id="data-frames" class="section level3 unnumbered hasAnchor">
<h3>Data Frames<a href="DataStructures.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A data frame is a powerful and flexible structure. Most serious R
applications involve data frames. A data frame is intended to mimic a
dataset, such as one you might encounter in SAS or SPSS, or a table in an SQL database.</p>
<p>A data frame is a tabular (rectangular) data structure, which means that
it has rows and columns. It is not implemented by a matrix, however.
Rather, a data frame is a list with the following characteristics:</p>
<ul>
<li><p>The elements of the list are vectors and/or factors.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p></li>
<li><p>Those vectors and factors are the columns of the data frame.</p></li>
<li><p>The vectors and factors must all have the same length; in other
words, all columns must have the same height.</p></li>
<li><p>The equal-height columns give a rectangular shape to the data frame.</p></li>
<li><p>The columns must have names.</p></li>
</ul>
<p>Because a data frame is both a list and a rectangular structure, R
provides two different paradigms for accessing its contents:</p>
<ul>
<li><p>You can use list operators to extract columns from a data frame,
such as <code>df[i]</code>, <code>df[[i]]</code>, or <code>df$name</code>.</p></li>
<li><p>You can use matrix-like notation, such as <code>df[i,j]</code>, <code>df[i,]</code>,
or <code>df[,j]</code>.</p></li>
</ul>
<p>Your perception of a data frame likely depends on your background:</p>
<dl>
<dt>To a statistician</dt>
<dd>
<p>A data frame is a table of observations. Each row contains
one observation. Each observation must contain the same variables.
These variables are called columns, and you can refer to them
by name. You can also refer to the contents by row number and column
number, just as with a matrix.</p>
</dd>
<dt>To a SQL programmer</dt>
<dd>
<p>A data frame is a table. The table resides entirely in memory, but
you can save it to a flat file and restore it later. You needn’t
declare the column types because R figures that out for you.</p>
</dd>
<dt>To an Excel user</dt>
<dd>
<p>A data frame is like a worksheet, or perhaps a range within
a worksheet. It is more restrictive, however, in that each column
has a type.</p>
</dd>
<dt>To an SAS user</dt>
<dd>
<p>A data frame is like a SAS dataset for which all the data resides
in memory. R can read and write the data frame to disk, but the data
frame must be in memory while R is processing it.</p>
</dd>
<dt>To an R programmer</dt>
<dd>
<p>A data frame is a hybrid data structure, part matrix and part list.
A column can contain numbers, character strings, or factors, but not
a mix of them. You can index the data frame just like you index
a matrix. The data frame is also a list, where the list elements are
the columns, so you can access columns by using list operators.</p>
</dd>
<dt>To a computer scientist</dt>
<dd>
<p>A data frame is a rectangular data structure. The columns are
typed, and each column must be numeric values, character
strings, or a factor. Columns must have labels; rows may
have labels. The table can be indexed by position, column name,
and/or row name. It can also be accessed by list operators, in which
case R treats the data frame as a list whose elements are the
columns of the data frame.</p>
</dd>
<dt>To a corporate executive</dt>
<dd>
<p>You can put names and numbers into a data frame.
A data frame is like a little database.
Your staff will enjoy using data frames.</p>
</dd>
</dl>
</div>
<div id="tibbles" class="section level3 unnumbered hasAnchor">
<h3>Tibbles<a href="DataStructures.html#tibbles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A <em>tibble</em> is a modern reimagining of the data frame, introduced by Hadley Wickham in the <code>tibble</code> package, which is a core package in the tidyverse.
Most of the common functions you would use with data frames also work with tibbles.
However, tibbles typically do less than data frames and complain more.
This idea of complaining and doing less may remind you of your least favorite coworker; however, we think tibbles will be one of your favorite data structures.
Doing less and complaining more can be a feature, not a bug.</p>
<p>Unlike data frames, tibbles:</p>
<ul>
<li>Do not give you row numbers by default.</li>
<li>Do not give you strange, unexpected column names.</li>
<li>Don’t coerce your data into factors (unless you explicitly ask for that).</li>
<li>Recycle vectors of length 1 but not other lengths.</li>
</ul>
<p>In addition to basic data frame functionality, tibbles:</p>
<ul>
<li>Print only the top four rows and a bit of metadata by default.</li>
<li>Always return a tibble when subsetting.</li>
<li>Never do partial matching: if you want a column from a tibble, you have to ask for it using its full name.</li>
<li>Complain more by giving you more warnings and chatty messages to make sure you understand what the software is doing.</li>
</ul>
<p>All these extras are designed to give you fewer surprises and help you make fewer mistakes.</p>
</div>
</div>
<div id="recipe-id048" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Appending Data to a Vector<a href="DataStructures.html#recipe-id048" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id048" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id048" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to append additional data items to a vector.</p>
</div>
<div id="solution-id048" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id048" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the vector constructor (<code>c</code>) to construct a vector with the
additional data items:</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="DataStructures.html#cb282-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb282-2"><a href="DataStructures.html#cb282-2" tabindex="-1"></a>newItems <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb282-3"><a href="DataStructures.html#cb282-3" tabindex="-1"></a><span class="fu">c</span>(v, newItems)</span>
<span id="cb282-4"><a href="DataStructures.html#cb282-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 6 7 8</span></span></code></pre></div>
<p>For a single item, you can also assign the new item to the next vector element.
R will automatically extend the vector:</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb283-1"><a href="DataStructures.html#cb283-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb283-2"><a href="DataStructures.html#cb283-2" tabindex="-1"></a>v[<span class="fu">length</span>(v) <span class="sc">+</span> <span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">42</span></span>
<span id="cb283-3"><a href="DataStructures.html#cb283-3" tabindex="-1"></a>v</span>
<span id="cb283-4"><a href="DataStructures.html#cb283-4" tabindex="-1"></a><span class="co">#&gt; [1]  1  2  3 42</span></span></code></pre></div>
</div>
<div id="discussion-id048" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id048" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If you ask us about appending a data item to a vector, we will likely suggest
that maybe you shouldn’t.</p>
<blockquote>
<p><strong>Warning</strong></p>
<p>R works best when you think about entire vectors, not single data
items. Are you repeatedly appending items to a vector? If so, then you
are probably working inside a loop. That’s OK for small vectors, but
for large vectors your program will run slowly. The memory management
in R works poorly when you repeatedly extend a vector by one element.
Try to replace that loop with vector-level operations. You’ll write
less code, and R will run much faster.</p>
</blockquote>
<p>Nonetheless, one does occasionally need to append data to vectors. Our
experiments show that the most efficient way of doing so is to create a new vector
using the vector constructor (<code>c</code>) to join the old and new data. This
works for appending single elements or multiple elements:</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="DataStructures.html#cb284-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb284-2"><a href="DataStructures.html#cb284-2" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(v, <span class="dv">4</span>) <span class="co"># Append a single value to v</span></span>
<span id="cb284-3"><a href="DataStructures.html#cb284-3" tabindex="-1"></a>v</span>
<span id="cb284-4"><a href="DataStructures.html#cb284-4" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4</span></span>
<span id="cb284-5"><a href="DataStructures.html#cb284-5" tabindex="-1"></a></span>
<span id="cb284-6"><a href="DataStructures.html#cb284-6" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>)</span>
<span id="cb284-7"><a href="DataStructures.html#cb284-7" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(v, w) <span class="co"># Append an entire vector to v</span></span>
<span id="cb284-8"><a href="DataStructures.html#cb284-8" tabindex="-1"></a>v</span>
<span id="cb284-9"><a href="DataStructures.html#cb284-9" tabindex="-1"></a><span class="co">#&gt; [1] 1 2 3 4 5 6 7 8</span></span></code></pre></div>
<p>You can also append an item by assigning it to the position past the end
of the vector, as shown in the Solution. In fact, R is very liberal
about extending vectors. You can assign to any element and R will expand
the vector to accommodate your request:</p>
<div class="sourceCode" id="cb285"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb285-1"><a href="DataStructures.html#cb285-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)   <span class="co"># Create a vector of three elements</span></span>
<span id="cb285-2"><a href="DataStructures.html#cb285-2" tabindex="-1"></a>v[<span class="dv">10</span>] <span class="ot">&lt;-</span> <span class="dv">10</span>       <span class="co"># Assign to the 10th element</span></span>
<span id="cb285-3"><a href="DataStructures.html#cb285-3" tabindex="-1"></a>v                 <span class="co"># R extends the vector automatically</span></span>
<span id="cb285-4"><a href="DataStructures.html#cb285-4" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3 NA NA NA NA NA NA 10</span></span></code></pre></div>
<p>Note that R did not complain about the out-of-bounds subscript. It just
extended the vector to the needed length, filling it with <code>NA</code>.</p>
<p>R includes an <code>append</code> function that creates a new vector by appending
items to an existing vector. However, our experiments show that this
function runs more slowly than both the vector constructor and the
element assignment.</p>
</div>
</div>
<div id="recipe-id049" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Inserting Data into a Vector<a href="DataStructures.html#recipe-id049" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id049" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id049" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to insert one or more data items into a vector.</p>
</div>
<div id="solution-id049" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id049" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Despite its name, the <code>append</code> function inserts data into a vector by
using the <code>after</code> parameter, which gives the insertion point for the new
item or items:</p>
<p><code>append(</code><em>vec</em><code>,</code><em>newvalues</em><code>, after =</code><em>n</em><code>)</code></p>
</div>
<div id="discussion-id049" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id049" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The new items will be inserted at the position given by <code>after</code>. This
example inserts 99 into the middle of a sequence:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="DataStructures.html#cb286-1" tabindex="-1"></a><span class="fu">append</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">99</span>, <span class="at">after =</span> <span class="dv">5</span>)</span>
<span id="cb286-2"><a href="DataStructures.html#cb286-2" tabindex="-1"></a><span class="co">#&gt;  [1]  1  2  3  4  5 99  6  7  8  9 10</span></span></code></pre></div>
<p>The special value of <code>after=0</code> means insert the new items at the <em>head</em> of
the vector:</p>
<div class="sourceCode" id="cb287"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb287-1"><a href="DataStructures.html#cb287-1" tabindex="-1"></a><span class="fu">append</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">99</span>, <span class="at">after =</span> <span class="dv">0</span>)</span>
<span id="cb287-2"><a href="DataStructures.html#cb287-2" tabindex="-1"></a><span class="co">#&gt;  [1] 99  1  2  3  4  5  6  7  8  9 10</span></span></code></pre></div>
<p>The comments in Recipe <a href="DataStructures.html#recipe-id048">5.1</a>, <a href="DataStructures.html#recipe-id048">“Appending Data to a Vector”</a> apply here,
too. If you are inserting single items into a vector, you might be
working at the element level when working at the vector level would be
easier to code and faster to run.</p>
</div>
</div>
<div id="recipe-id050" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Understanding the Recycling Rule<a href="DataStructures.html#recipe-id050" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id050" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id050" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to understand the mysterious Recycling Rule that governs how R
handles vectors of unequal length.</p>
</div>
<div id="discussion-id050" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id050" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When you do vector arithmetic, R performs element-by-element operations.
That works well when both vectors have the same length: R pairs the
elements of the vectors and applies the operation to those pairs.</p>
<p>But what happens when the vectors have unequal lengths?</p>
<p>In that case, R invokes the Recycling Rule. It processes the vector
element in pairs, starting at the first elements of both vectors. At a
certain point, the shorter vector is exhausted while the longer vector
still has unprocessed elements. R returns to the beginning of the
shorter vector, “recycling” its elements; continues taking elements from
the longer vector; and completes the operation. It will recycle the
shorter-vector elements as often as necessary until the operation is
complete.</p>
<p>It’s useful to visualize the Recycling Rule. Here is a diagram of two
vectors, 1:6 and 1:3:</p>
<pre><code>   1:6   1:3
  ----- -----
    1     1
    2     2
    3     3
    4
    5
    6</code></pre>
<p>Obviously, the 1:6 vector is longer than the 1:3 vector. If we try to
add the vectors using (1:6) + (1:3), it appears that 1:3 has too few
elements. However, R recycles the elements of 1:3, pairing the two
vectors like this and producing a six-element vector:</p>
<pre><code>   1:6   1:3   (1:6) + (1:3)
  ----- ----- ---------------
    1     1         2
    2     2         4
    3     3         6
    4               5
    5               7
    6               9</code></pre>
<p>Here is what you see in the R console:</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="DataStructures.html#cb290-1" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb290-2"><a href="DataStructures.html#cb290-2" tabindex="-1"></a><span class="co">#&gt; [1] 2 4 6 5 7 9</span></span></code></pre></div>
<p>It’s not only vector operations that invoke the Recycling Rule;
functions can, too. The <code>cbind</code> function can create column vectors, such
as the following column vectors of 1:6 and 1:3. The two column have
different heights, of course:</p>
<p>```r}
cbind(1:6)</p>
<p>cbind(1:3)</p>
<pre><code>
If we try binding these column vectors together into a two-column
matrix, the lengths are mismatched. The 1:3 vector is too short, so
`cbind` invokes the Recycling Rule and recycles the elements of 1:3:


``` r
cbind(1:6, 1:3)
#&gt;      [,1] [,2]
#&gt; [1,]    1    1
#&gt; [2,]    2    2
#&gt; [3,]    3    3
#&gt; [4,]    4    1
#&gt; [5,]    5    2
#&gt; [6,]    6    3</code></pre>
<p>If the longer vector’s length is not a multiple of the shorter vector’s
length, R gives a warning. That’s good, since the operation is highly
suspect and there is likely a bug in your logic:</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="DataStructures.html#cb292-1" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) <span class="co"># Oops! 1:5 is one element too short</span></span>
<span id="cb292-2"><a href="DataStructures.html#cb292-2" tabindex="-1"></a><span class="co">#&gt; Warning in (1:6) + (1:5): longer object length is not a multiple of shorter</span></span>
<span id="cb292-3"><a href="DataStructures.html#cb292-3" tabindex="-1"></a><span class="co">#&gt; object length</span></span>
<span id="cb292-4"><a href="DataStructures.html#cb292-4" tabindex="-1"></a><span class="co">#&gt; [1]  2  4  6  8 10  7</span></span></code></pre></div>
<p>Once you understand the Recycling Rule, you will realize that operations
between a vector and a scalar are simply applications of that rule. In
this example, the 10 is recycled repeatedly until the vector addition is
complete:</p>
<div class="sourceCode" id="cb293"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb293-1"><a href="DataStructures.html#cb293-1" tabindex="-1"></a>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">+</span> <span class="dv">10</span></span>
<span id="cb293-2"><a href="DataStructures.html#cb293-2" tabindex="-1"></a><span class="co">#&gt; [1] 11 12 13 14 15 16</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id051" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Creating a Factor (Categorical Variable)<a href="DataStructures.html#recipe-id051" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id051" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id051" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have a vector of character strings or integers. You want R to treat
them as a factor, which is R’s term for a categorical variable.</p>
</div>
<div id="solution-id051" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id051" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>factor</code> function encodes your vector of discrete values into a factor:</p>
<pre><code>f &lt;- factor(v)   # v can be a vector of strings or integers</code></pre>
<p>If your vector contains only a subset of possible values and not the
entire universe, then include a second argument that gives the possible
levels of the factor:</p>
<pre><code>f &lt;- factor(v, levels)</code></pre>
</div>
<div id="discussion-id051" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id051" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In R, each possible value of a categorical variable is called a <em>level</em>.
A vector of levels is called a <em>factor</em>.
Factors fit very cleanly into the vector orientation of R,
and they are used in powerful ways for processing data and building statistical models.</p>
<p>Most of the time, converting your categorical data into a factor is a
simple matter of calling the <code>factor</code> function, which identifies the
distinct levels of the categorical data and packs them into a factor:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="DataStructures.html#cb296-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&quot;Win&quot;</span>, <span class="st">&quot;Win&quot;</span>, <span class="st">&quot;Lose&quot;</span>, <span class="st">&quot;Tie&quot;</span>, <span class="st">&quot;Win&quot;</span>, <span class="st">&quot;Lose&quot;</span>))</span>
<span id="cb296-2"><a href="DataStructures.html#cb296-2" tabindex="-1"></a>f</span>
<span id="cb296-3"><a href="DataStructures.html#cb296-3" tabindex="-1"></a><span class="co">#&gt; [1] Win  Win  Lose Tie  Win  Lose</span></span>
<span id="cb296-4"><a href="DataStructures.html#cb296-4" tabindex="-1"></a><span class="co">#&gt; Levels: Lose Tie Win</span></span></code></pre></div>
<p>Notice that when we printed the factor, <code>f</code>, R did not put quotes around
the values. They are levels, not strings. Also notice that when we
printed the factor, R also displayed the distinct levels below the
factor.</p>
<p>If your vector contains only a subset of all the possible levels, then R
will have an incomplete picture of the possible levels. Suppose you have
a string-valued variable <code>wday</code> that gives the day of the week on which
your data was observed:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb297-1"><a href="DataStructures.html#cb297-1" tabindex="-1"></a>wday <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Mon&quot;</span>, <span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thu&quot;</span>,</span>
<span id="cb297-2"><a href="DataStructures.html#cb297-2" tabindex="-1"></a>          <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Tue&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Tue&quot;</span>)</span>
<span id="cb297-3"><a href="DataStructures.html#cb297-3" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(wday)</span>
<span id="cb297-4"><a href="DataStructures.html#cb297-4" tabindex="-1"></a>f</span>
<span id="cb297-5"><a href="DataStructures.html#cb297-5" tabindex="-1"></a><span class="co">#&gt;  [1] Wed Thu Mon Wed Thu Thu Thu Tue Thu Tue</span></span>
<span id="cb297-6"><a href="DataStructures.html#cb297-6" tabindex="-1"></a><span class="co">#&gt; Levels: Mon Thu Tue Wed</span></span></code></pre></div>
<p>R thinks that Monday, Thursday, Tuesday, and Wednesday are the only
possible levels. Friday is not listed. Apparently, the lab staff never
made observations on Friday, so R does not know that Friday is a
possible value. Hence, you need to list the possible levels of <code>wday</code>
explicitly:</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="DataStructures.html#cb298-1" tabindex="-1"></a>f <span class="ot">&lt;-</span> <span class="fu">factor</span>(wday, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">&quot;Mon&quot;</span>, <span class="st">&quot;Tue&quot;</span>, <span class="st">&quot;Wed&quot;</span>, <span class="st">&quot;Thu&quot;</span>, <span class="st">&quot;Fri&quot;</span>))</span>
<span id="cb298-2"><a href="DataStructures.html#cb298-2" tabindex="-1"></a>f</span>
<span id="cb298-3"><a href="DataStructures.html#cb298-3" tabindex="-1"></a><span class="co">#&gt;  [1] Wed Thu Mon Wed Thu Thu Thu Tue Thu Tue</span></span>
<span id="cb298-4"><a href="DataStructures.html#cb298-4" tabindex="-1"></a><span class="co">#&gt; Levels: Mon Tue Wed Thu Fri</span></span></code></pre></div>
<p>Now R understands that <code>f</code> is a factor with five possible levels.
It knows their correct order, too.
It originally put Thursday before Tuesday because it assumes alphabetical order by default.
The explicit <code>levels</code> argument defines the correct order.</p>
<p>In many situations it is not necessary to call <code>factor</code> explicitly.
When an R function requires a factor, it usually converts your data to a
factor automatically.
The <code>table</code> function, for instance, works only on factors,
so it routinely converts its inputs to factors without asking.
You must explicitly create a factor variable when you want to specify
the full set of levels or when you want to control the ordering of levels.</p>
</div>
<div id="see_also-id051" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id051" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="UsefulTricks.html#recipe-id137">12.5</a>, <a href="UsefulTricks.html#recipe-id137">“Binning Your Data”</a>, to create a factor from continuous data.</p>
</div>
</div>
<div id="recipe-id227" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Combining Multiple Vectors into One Vector and a Factor<a href="DataStructures.html#recipe-id227" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id227" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id227" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have several groups of data, with one vector for each group. You
want to combine the vectors into one large vector and simultaneously
create a parallel factor that identifies each value’s original group.</p>
</div>
<div id="solution-id227" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id227" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a list that contains the vectors. Use the <code>stack</code> function to
combine the list into a two-column data frame:</p>
<pre><code>comb &lt;- stack(list(v1 = v1, v2 = v2, v3 = v3)) # Combine 3 vectors</code></pre>
<p>The data frame’s columns are called <code>values</code> and <code>ind</code>. The first column
contains the data, and the second column contains the parallel factor.</p>
</div>
<div id="discussion-id227" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id227" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Why in the world would you want to mash all your data into one big
vector and a parallel factor? The reason is that many important
statistical functions require the data in that format.</p>
<p>Suppose you survey freshmen, sophomores, and juniors regarding their
confidence level (“What percentage of the time do you feel confident in
school?”). Now you have three vectors, called <code>freshmen</code>, <code>sophomores</code>,
and <code>juniors</code>. You want to perform an ANOVA of the differences
between the groups. The ANOVA function, <code>aov</code>, requires one vector with
the survey results as well as a parallel factor that identifies the
group. You can combine the groups using the <code>stack</code> function:</p>
<div class="sourceCode" id="cb300"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb300-1"><a href="DataStructures.html#cb300-1" tabindex="-1"></a>freshmen <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb300-2"><a href="DataStructures.html#cb300-2" tabindex="-1"></a>sophomores <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb300-3"><a href="DataStructures.html#cb300-3" tabindex="-1"></a>juniors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">3</span>)</span>
<span id="cb300-4"><a href="DataStructures.html#cb300-4" tabindex="-1"></a></span>
<span id="cb300-5"><a href="DataStructures.html#cb300-5" tabindex="-1"></a>comb <span class="ot">&lt;-</span> <span class="fu">stack</span>(<span class="fu">list</span>(<span class="at">fresh =</span> freshmen, <span class="at">soph =</span> sophomores, <span class="at">jrs =</span> juniors))</span>
<span id="cb300-6"><a href="DataStructures.html#cb300-6" tabindex="-1"></a><span class="fu">print</span>(comb)</span>
<span id="cb300-7"><a href="DataStructures.html#cb300-7" tabindex="-1"></a><span class="co">#&gt;    values   ind</span></span>
<span id="cb300-8"><a href="DataStructures.html#cb300-8" tabindex="-1"></a><span class="co">#&gt; 1       1 fresh</span></span>
<span id="cb300-9"><a href="DataStructures.html#cb300-9" tabindex="-1"></a><span class="co">#&gt; 2       2 fresh</span></span>
<span id="cb300-10"><a href="DataStructures.html#cb300-10" tabindex="-1"></a><span class="co">#&gt; 3       1 fresh</span></span>
<span id="cb300-11"><a href="DataStructures.html#cb300-11" tabindex="-1"></a><span class="co">#&gt; 4       1 fresh</span></span>
<span id="cb300-12"><a href="DataStructures.html#cb300-12" tabindex="-1"></a><span class="co">#&gt; 5       5 fresh</span></span>
<span id="cb300-13"><a href="DataStructures.html#cb300-13" tabindex="-1"></a><span class="co">#&gt; 6       3  soph</span></span>
<span id="cb300-14"><a href="DataStructures.html#cb300-14" tabindex="-1"></a><span class="co">#&gt; 7       2  soph</span></span>
<span id="cb300-15"><a href="DataStructures.html#cb300-15" tabindex="-1"></a><span class="co">#&gt; 8       3  soph</span></span>
<span id="cb300-16"><a href="DataStructures.html#cb300-16" tabindex="-1"></a><span class="co">#&gt; 9       3  soph</span></span>
<span id="cb300-17"><a href="DataStructures.html#cb300-17" tabindex="-1"></a><span class="co">#&gt; 10      5  soph</span></span>
<span id="cb300-18"><a href="DataStructures.html#cb300-18" tabindex="-1"></a><span class="co">#&gt; 11      5   jrs</span></span>
<span id="cb300-19"><a href="DataStructures.html#cb300-19" tabindex="-1"></a><span class="co">#&gt; 12      3   jrs</span></span>
<span id="cb300-20"><a href="DataStructures.html#cb300-20" tabindex="-1"></a><span class="co">#&gt; 13      4   jrs</span></span>
<span id="cb300-21"><a href="DataStructures.html#cb300-21" tabindex="-1"></a><span class="co">#&gt; 14      3   jrs</span></span>
<span id="cb300-22"><a href="DataStructures.html#cb300-22" tabindex="-1"></a><span class="co">#&gt; 15      3   jrs</span></span></code></pre></div>
<p>Now you can perform the ANOVA on the two columns:</p>
<pre><code>aov(values ~ ind, data = comb)</code></pre>
<p>When building the list we must provide tags for the list elements.
(The tags are <code>fresh</code>, <code>soph</code>, and <code>jrs</code> in this example.)
Those tags are required because <code>stack</code> uses them as the levels of the parallel factor.</p>
</div>
</div>
<div id="recipe-id053" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Creating a List<a href="DataStructures.html#recipe-id053" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id053" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id053" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to create and populate a list.</p>
</div>
<div id="solution-id053" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id053" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To create a list from individual data items, use the <code>list</code> function:</p>
<pre><code>lst &lt;- list(x, y, z)</code></pre>
</div>
<div id="discussion-id053" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id053" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Lists can be quite simple, such as this list of three numbers:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="DataStructures.html#cb303-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fl">0.5</span>, <span class="fl">0.841</span>, <span class="fl">0.977</span>)</span>
<span id="cb303-2"><a href="DataStructures.html#cb303-2" tabindex="-1"></a>lst</span>
<span id="cb303-3"><a href="DataStructures.html#cb303-3" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb303-4"><a href="DataStructures.html#cb303-4" tabindex="-1"></a><span class="co">#&gt; [1] 0.5</span></span>
<span id="cb303-5"><a href="DataStructures.html#cb303-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb303-6"><a href="DataStructures.html#cb303-6" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb303-7"><a href="DataStructures.html#cb303-7" tabindex="-1"></a><span class="co">#&gt; [1] 0.841</span></span>
<span id="cb303-8"><a href="DataStructures.html#cb303-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb303-9"><a href="DataStructures.html#cb303-9" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb303-10"><a href="DataStructures.html#cb303-10" tabindex="-1"></a><span class="co">#&gt; [1] 0.977</span></span></code></pre></div>
<p>When R prints the list, it identifies each list element by its position
(<code>[[1]]</code>, <code>[[2]]</code>, <code>[[3]]</code>) and prints the element’s value (e.g.,
<code>[1] 0.5</code>) under its position.</p>
<p>More usefully, lists can, unlike vectors, contain elements of different
modes (types). Here is an extreme example of a mongrel created from a
scalar, a character string, a vector, and a function:</p>
<div class="sourceCode" id="cb304"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb304-1"><a href="DataStructures.html#cb304-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fl">3.14</span>, <span class="st">&quot;Moe&quot;</span>, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>), mean)</span>
<span id="cb304-2"><a href="DataStructures.html#cb304-2" tabindex="-1"></a>lst</span>
<span id="cb304-3"><a href="DataStructures.html#cb304-3" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb304-4"><a href="DataStructures.html#cb304-4" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span>
<span id="cb304-5"><a href="DataStructures.html#cb304-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb304-6"><a href="DataStructures.html#cb304-6" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb304-7"><a href="DataStructures.html#cb304-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Moe&quot;</span></span>
<span id="cb304-8"><a href="DataStructures.html#cb304-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb304-9"><a href="DataStructures.html#cb304-9" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb304-10"><a href="DataStructures.html#cb304-10" tabindex="-1"></a><span class="co">#&gt; [1] 1 1 2 3</span></span>
<span id="cb304-11"><a href="DataStructures.html#cb304-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb304-12"><a href="DataStructures.html#cb304-12" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb304-13"><a href="DataStructures.html#cb304-13" tabindex="-1"></a><span class="co">#&gt; function (x, ...) </span></span>
<span id="cb304-14"><a href="DataStructures.html#cb304-14" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;mean&quot;)</span></span>
<span id="cb304-15"><a href="DataStructures.html#cb304-15" tabindex="-1"></a><span class="co">#&gt; &lt;bytecode: 0x1264d3208&gt;</span></span>
<span id="cb304-16"><a href="DataStructures.html#cb304-16" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>You can also build a list by creating an empty list and populating it.
Here is our “mongrel” example built in that way:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="DataStructures.html#cb305-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb305-2"><a href="DataStructures.html#cb305-2" tabindex="-1"></a>lst[[<span class="dv">1</span>]] <span class="ot">&lt;-</span> <span class="fl">3.14</span></span>
<span id="cb305-3"><a href="DataStructures.html#cb305-3" tabindex="-1"></a>lst[[<span class="dv">2</span>]] <span class="ot">&lt;-</span> <span class="st">&quot;Moe&quot;</span></span>
<span id="cb305-4"><a href="DataStructures.html#cb305-4" tabindex="-1"></a>lst[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb305-5"><a href="DataStructures.html#cb305-5" tabindex="-1"></a>lst[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> mean</span>
<span id="cb305-6"><a href="DataStructures.html#cb305-6" tabindex="-1"></a>lst</span>
<span id="cb305-7"><a href="DataStructures.html#cb305-7" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb305-8"><a href="DataStructures.html#cb305-8" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span>
<span id="cb305-9"><a href="DataStructures.html#cb305-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb305-10"><a href="DataStructures.html#cb305-10" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb305-11"><a href="DataStructures.html#cb305-11" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Moe&quot;</span></span>
<span id="cb305-12"><a href="DataStructures.html#cb305-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb305-13"><a href="DataStructures.html#cb305-13" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb305-14"><a href="DataStructures.html#cb305-14" tabindex="-1"></a><span class="co">#&gt; [1] 1 1 2 3</span></span>
<span id="cb305-15"><a href="DataStructures.html#cb305-15" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb305-16"><a href="DataStructures.html#cb305-16" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb305-17"><a href="DataStructures.html#cb305-17" tabindex="-1"></a><span class="co">#&gt; function (x, ...) </span></span>
<span id="cb305-18"><a href="DataStructures.html#cb305-18" tabindex="-1"></a><span class="co">#&gt; UseMethod(&quot;mean&quot;)</span></span>
<span id="cb305-19"><a href="DataStructures.html#cb305-19" tabindex="-1"></a><span class="co">#&gt; &lt;bytecode: 0x1264d3208&gt;</span></span>
<span id="cb305-20"><a href="DataStructures.html#cb305-20" tabindex="-1"></a><span class="co">#&gt; &lt;environment: namespace:base&gt;</span></span></code></pre></div>
<p>List elements can be named. The <code>list</code> function lets you supply a name
for every element:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb306-1"><a href="DataStructures.html#cb306-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">mid =</span> <span class="fl">0.5</span>, <span class="at">right =</span> <span class="fl">0.841</span>, <span class="at">far.right =</span> <span class="fl">0.977</span>)</span>
<span id="cb306-2"><a href="DataStructures.html#cb306-2" tabindex="-1"></a>lst</span>
<span id="cb306-3"><a href="DataStructures.html#cb306-3" tabindex="-1"></a><span class="co">#&gt; $mid</span></span>
<span id="cb306-4"><a href="DataStructures.html#cb306-4" tabindex="-1"></a><span class="co">#&gt; [1] 0.5</span></span>
<span id="cb306-5"><a href="DataStructures.html#cb306-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb306-6"><a href="DataStructures.html#cb306-6" tabindex="-1"></a><span class="co">#&gt; $right</span></span>
<span id="cb306-7"><a href="DataStructures.html#cb306-7" tabindex="-1"></a><span class="co">#&gt; [1] 0.841</span></span>
<span id="cb306-8"><a href="DataStructures.html#cb306-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb306-9"><a href="DataStructures.html#cb306-9" tabindex="-1"></a><span class="co">#&gt; $far.right</span></span>
<span id="cb306-10"><a href="DataStructures.html#cb306-10" tabindex="-1"></a><span class="co">#&gt; [1] 0.977</span></span></code></pre></div>
</div>
<div id="see_also-id053" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id053" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See the <a href="DataStructures.html#intro-DataStructures">Introduction</a> to this chapter for more
about lists; see Recipe <a href="DataStructures.html#recipe-id158">5.9</a>, <a href="DataStructures.html#recipe-id158">“Building a Name/Value Association List”</a>,
for more about building and using lists with named elements.</p>
</div>
</div>
<div id="recipe-id054" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Selecting List Elements by Position<a href="DataStructures.html#recipe-id054" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id054" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id054" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to access list elements by position.</p>
</div>
<div id="solution-id054" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id054" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use one of these ways. Here, <code>lst</code> is a list variable:</p>
<dl>
<dt><code>lst[[</code><em>n</em><code>]]</code></dt>
<dd>
<p>Select the <em>n</em>th element from the list.</p>
</dd>
<dt><code>lst[c(_n_~1~, _n_~2~, ..., _n_~k~)]</code></dt>
<dd>
<p>Returns a list of elements, selected by their positions.</p>
</dd>
</dl>
<p>Note that the first form returns a single element and the second form returns
a list.</p>
</div>
<div id="discussion-id054" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id054" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Suppose we have a list of four integers, called <code>years</code>:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="DataStructures.html#cb307-1" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1960</span>, <span class="dv">1964</span>, <span class="dv">1976</span>, <span class="dv">1994</span>)</span>
<span id="cb307-2"><a href="DataStructures.html#cb307-2" tabindex="-1"></a>years</span>
<span id="cb307-3"><a href="DataStructures.html#cb307-3" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb307-4"><a href="DataStructures.html#cb307-4" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb307-5"><a href="DataStructures.html#cb307-5" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb307-6"><a href="DataStructures.html#cb307-6" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb307-7"><a href="DataStructures.html#cb307-7" tabindex="-1"></a><span class="co">#&gt; [1] 1964</span></span>
<span id="cb307-8"><a href="DataStructures.html#cb307-8" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb307-9"><a href="DataStructures.html#cb307-9" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb307-10"><a href="DataStructures.html#cb307-10" tabindex="-1"></a><span class="co">#&gt; [1] 1976</span></span>
<span id="cb307-11"><a href="DataStructures.html#cb307-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb307-12"><a href="DataStructures.html#cb307-12" tabindex="-1"></a><span class="co">#&gt; [[4]]</span></span>
<span id="cb307-13"><a href="DataStructures.html#cb307-13" tabindex="-1"></a><span class="co">#&gt; [1] 1994</span></span></code></pre></div>
<p>We can access single elements using the double-square-bracket syntax:</p>
<div class="sourceCode" id="cb308"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb308-1"><a href="DataStructures.html#cb308-1" tabindex="-1"></a>years[[<span class="dv">1</span>]]</span>
<span id="cb308-2"><a href="DataStructures.html#cb308-2" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span></code></pre></div>
<p>We can extract sublists using the single-square-bracket syntax:</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="DataStructures.html#cb309-1" tabindex="-1"></a>years[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)]</span>
<span id="cb309-2"><a href="DataStructures.html#cb309-2" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb309-3"><a href="DataStructures.html#cb309-3" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb309-4"><a href="DataStructures.html#cb309-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb309-5"><a href="DataStructures.html#cb309-5" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb309-6"><a href="DataStructures.html#cb309-6" tabindex="-1"></a><span class="co">#&gt; [1] 1964</span></span></code></pre></div>
<p>This syntax can be confusing because of a subtlety:
there is an important difference between <code>lst[[</code><em>n</em><code>]]</code> and <code>lst[</code><em>n</em><code>]</code>.
They are not the same thing:</p>
<dl>
<dt><code>lst[[</code><em>n</em><code>]]</code></dt>
<dd>
<p>This is an element, not a list. It is the <em>n</em>th element of <code>lst</code>.</p>
</dd>
<dt><code>lst[</code><em>n</em><code>]</code></dt>
<dd>
<p>This is a list, not an element. The list contains one element, taken
from the <em>n</em>th element of <code>lst</code>.</p>
</dd>
</dl>
<p>(The second form is a special case of
<code>lst[c(_n_~1~, _n_~2~, ..., _n_~k~)]</code> in which we eliminated the <code>c(...)</code> construct
because there is only one <em>n</em>.)</p>
<p>The difference becomes apparent when we inspect the structure of the
result — one is a number and the other is a list:</p>
<div class="sourceCode" id="cb310"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb310-1"><a href="DataStructures.html#cb310-1" tabindex="-1"></a><span class="fu">class</span>(years[[<span class="dv">1</span>]])</span>
<span id="cb310-2"><a href="DataStructures.html#cb310-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;numeric&quot;</span></span>
<span id="cb310-3"><a href="DataStructures.html#cb310-3" tabindex="-1"></a></span>
<span id="cb310-4"><a href="DataStructures.html#cb310-4" tabindex="-1"></a><span class="fu">class</span>(years[<span class="dv">1</span>])</span>
<span id="cb310-5"><a href="DataStructures.html#cb310-5" tabindex="-1"></a><span class="co">#&gt; [1] &quot;list&quot;</span></span></code></pre></div>
<p>The difference becomes annoyingly apparent when we <code>cat</code> the value.
Recall that <code>cat</code> can print atomic values or vectors but complains about
printing structured objects:</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="DataStructures.html#cb311-1" tabindex="-1"></a><span class="fu">cat</span>(years[[<span class="dv">1</span>]], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb311-2"><a href="DataStructures.html#cb311-2" tabindex="-1"></a><span class="co">#&gt; 1960</span></span>
<span id="cb311-3"><a href="DataStructures.html#cb311-3" tabindex="-1"></a></span>
<span id="cb311-4"><a href="DataStructures.html#cb311-4" tabindex="-1"></a><span class="fu">cat</span>(years[<span class="dv">1</span>], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb311-5"><a href="DataStructures.html#cb311-5" tabindex="-1"></a><span class="co">#&gt; Error in cat(years[1], &quot;\n&quot;): argument 1 (type &#39;list&#39;) cannot be handled by &#39;cat&#39;</span></span></code></pre></div>
<p>We got lucky here because R alerted us to the problem. In other
contexts, you might work long and hard to figure out that you accessed a
sublist when you wanted an element, or vice versa.</p>
</div>
</div>
<div id="recipe-id253" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Selecting List Elements by Name<a href="DataStructures.html#recipe-id253" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id253" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id253" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to access list elements by their names.</p>
</div>
<div id="solution-id253" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id253" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use one of these forms. Here, <code>lst</code> is a list variable:</p>
<dl>
<dt><code>lst[["*name*"]]</code></dt>
<dd>
<p>Selects the element called <strong>name</strong>.
Returns <code>NULL</code> if no element has that name.</p>
</dd>
<dt><code>lst$*name*</code></dt>
<dd>
<p>Same as previous, just different syntax.</p>
</dd>
<dt><code>lst[c(*name*~1~, *name*~2~, ..., *name*~k~)]</code></dt>
<dd>
<p>Returns a list built from the indicated elements of <code>lst</code>.</p>
</dd>
</dl>
<p>Note that the first two forms return an element, whereas the third form
returns a list.</p>
</div>
<div id="discussion-id253" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id253" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each element of a list can have a name. If named, the element can be
selected by its name. This assignment creates a list of four named
integers:</p>
<div class="sourceCode" id="cb312"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb312-1"><a href="DataStructures.html#cb312-1" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Kennedy =</span> <span class="dv">1960</span>, <span class="at">Johnson =</span> <span class="dv">1964</span>,</span>
<span id="cb312-2"><a href="DataStructures.html#cb312-2" tabindex="-1"></a>              <span class="at">Carter =</span> <span class="dv">1976</span>, <span class="at">Clinton =</span> <span class="dv">1994</span>)</span></code></pre></div>
<p>These next two expressions return the same value—namely, the element
that is named “Kennedy”:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="DataStructures.html#cb313-1" tabindex="-1"></a>years[[<span class="st">&quot;Kennedy&quot;</span>]]</span>
<span id="cb313-2"><a href="DataStructures.html#cb313-2" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb313-3"><a href="DataStructures.html#cb313-3" tabindex="-1"></a>years<span class="sc">$</span>Kennedy</span>
<span id="cb313-4"><a href="DataStructures.html#cb313-4" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span></code></pre></div>
<p>The following two expressions return sublists extracted from <code>years</code>:</p>
<div class="sourceCode" id="cb314"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb314-1"><a href="DataStructures.html#cb314-1" tabindex="-1"></a>years[<span class="fu">c</span>(<span class="st">&quot;Kennedy&quot;</span>, <span class="st">&quot;Johnson&quot;</span>)]</span>
<span id="cb314-2"><a href="DataStructures.html#cb314-2" tabindex="-1"></a><span class="co">#&gt; $Kennedy</span></span>
<span id="cb314-3"><a href="DataStructures.html#cb314-3" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb314-4"><a href="DataStructures.html#cb314-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb314-5"><a href="DataStructures.html#cb314-5" tabindex="-1"></a><span class="co">#&gt; $Johnson</span></span>
<span id="cb314-6"><a href="DataStructures.html#cb314-6" tabindex="-1"></a><span class="co">#&gt; [1] 1964</span></span>
<span id="cb314-7"><a href="DataStructures.html#cb314-7" tabindex="-1"></a></span>
<span id="cb314-8"><a href="DataStructures.html#cb314-8" tabindex="-1"></a>years[<span class="st">&quot;Carter&quot;</span>]</span>
<span id="cb314-9"><a href="DataStructures.html#cb314-9" tabindex="-1"></a><span class="co">#&gt; $Carter</span></span>
<span id="cb314-10"><a href="DataStructures.html#cb314-10" tabindex="-1"></a><span class="co">#&gt; [1] 1976</span></span></code></pre></div>
<p>Just as with selecting list elements by position
(see Recipe <a href="DataStructures.html#recipe-id054">5.7</a>, <a href="DataStructures.html#recipe-id054">“Selecting List Elements by Position”</a>),
there is an important difference between <code>lst[["*name*"]]</code> and <code>lst["*name*"]</code>.
They are not the same:</p>
<dl>
<dt><code>lst[["*name*"]]</code></dt>
<dd>
<p>This is an element, not a list.</p>
</dd>
<dt><code>lst["*name*"]</code></dt>
<dd>
<p>This is a list, not an element.</p>
</dd>
</dl>
<p>(The second form is a special case of
<code>lst[c(*name~1~*, *name~2~*, ..., *name~k~*)]</code> in which we don’t need the <code>c(...)</code>
construct because there is only one name.)</p>
</div>
<div id="see_also-id253" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id253" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id054">5.7</a>, <a href="DataStructures.html#recipe-id054">“Selecting List Elements by Position”</a>, to access
elements by position rather than by name.</p>
</div>
</div>
<div id="recipe-id158" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Building a Name/Value Association List<a href="DataStructures.html#recipe-id158" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id158" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id158" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to create a list that associates names and values,
such as a dictionary, hash, or lookup table would in another programming language.</p>
</div>
<div id="solution-id158" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id158" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>list</code> function lets you give names to elements, creating an
association between each name and its value:</p>
<pre><code>lst &lt;- list(mid = 0.5, right = 0.841, far.right = 0.977)</code></pre>
<p>If you have parallel vectors of names and values, you can create an
empty list and then populate the list by using a vectorized assignment
statement:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb316-1"><a href="DataStructures.html#cb316-1" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb316-2"><a href="DataStructures.html#cb316-2" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>)</span>
<span id="cb316-3"><a href="DataStructures.html#cb316-3" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb316-4"><a href="DataStructures.html#cb316-4" tabindex="-1"></a>lst[names] <span class="ot">&lt;-</span> values</span></code></pre></div>
</div>
<div id="discussion-id158" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id158" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Each element of a list can be named, and you can retrieve list elements
by name. This gives you a basic programming tool: the ability to
associate names with values.</p>
<p>You can assign element names when you build the list.
The <code>list</code> function allows arguments of the form <code>*name*=*value*</code>:</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="DataStructures.html#cb317-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb317-2"><a href="DataStructures.html#cb317-2" tabindex="-1"></a>  <span class="at">far.left =</span> <span class="fl">0.023</span>,</span>
<span id="cb317-3"><a href="DataStructures.html#cb317-3" tabindex="-1"></a>  <span class="at">left =</span> <span class="fl">0.159</span>,</span>
<span id="cb317-4"><a href="DataStructures.html#cb317-4" tabindex="-1"></a>  <span class="at">mid =</span> <span class="fl">0.500</span>,</span>
<span id="cb317-5"><a href="DataStructures.html#cb317-5" tabindex="-1"></a>  <span class="at">right =</span> <span class="fl">0.841</span>,</span>
<span id="cb317-6"><a href="DataStructures.html#cb317-6" tabindex="-1"></a>  <span class="at">far.right =</span> <span class="fl">0.977</span></span>
<span id="cb317-7"><a href="DataStructures.html#cb317-7" tabindex="-1"></a>)</span>
<span id="cb317-8"><a href="DataStructures.html#cb317-8" tabindex="-1"></a>lst</span>
<span id="cb317-9"><a href="DataStructures.html#cb317-9" tabindex="-1"></a><span class="co">#&gt; $far.left</span></span>
<span id="cb317-10"><a href="DataStructures.html#cb317-10" tabindex="-1"></a><span class="co">#&gt; [1] 0.023</span></span>
<span id="cb317-11"><a href="DataStructures.html#cb317-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb317-12"><a href="DataStructures.html#cb317-12" tabindex="-1"></a><span class="co">#&gt; $left</span></span>
<span id="cb317-13"><a href="DataStructures.html#cb317-13" tabindex="-1"></a><span class="co">#&gt; [1] 0.159</span></span>
<span id="cb317-14"><a href="DataStructures.html#cb317-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb317-15"><a href="DataStructures.html#cb317-15" tabindex="-1"></a><span class="co">#&gt; $mid</span></span>
<span id="cb317-16"><a href="DataStructures.html#cb317-16" tabindex="-1"></a><span class="co">#&gt; [1] 0.5</span></span>
<span id="cb317-17"><a href="DataStructures.html#cb317-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb317-18"><a href="DataStructures.html#cb317-18" tabindex="-1"></a><span class="co">#&gt; $right</span></span>
<span id="cb317-19"><a href="DataStructures.html#cb317-19" tabindex="-1"></a><span class="co">#&gt; [1] 0.841</span></span>
<span id="cb317-20"><a href="DataStructures.html#cb317-20" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb317-21"><a href="DataStructures.html#cb317-21" tabindex="-1"></a><span class="co">#&gt; $far.right</span></span>
<span id="cb317-22"><a href="DataStructures.html#cb317-22" tabindex="-1"></a><span class="co">#&gt; [1] 0.977</span></span></code></pre></div>
<p>One way to name the elements is to create an empty list and then
populate it via assignment statements:</p>
<div class="sourceCode" id="cb318"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb318-1"><a href="DataStructures.html#cb318-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb318-2"><a href="DataStructures.html#cb318-2" tabindex="-1"></a>lst<span class="sc">$</span>far.left <span class="ot">&lt;-</span> <span class="fl">0.023</span></span>
<span id="cb318-3"><a href="DataStructures.html#cb318-3" tabindex="-1"></a>lst<span class="sc">$</span>left <span class="ot">&lt;-</span> <span class="fl">0.159</span></span>
<span id="cb318-4"><a href="DataStructures.html#cb318-4" tabindex="-1"></a>lst<span class="sc">$</span>mid <span class="ot">&lt;-</span> <span class="fl">0.500</span></span>
<span id="cb318-5"><a href="DataStructures.html#cb318-5" tabindex="-1"></a>lst<span class="sc">$</span>right <span class="ot">&lt;-</span> <span class="fl">0.841</span></span>
<span id="cb318-6"><a href="DataStructures.html#cb318-6" tabindex="-1"></a>lst<span class="sc">$</span>far.right <span class="ot">&lt;-</span> <span class="fl">0.977</span></span></code></pre></div>
<p>Sometimes you have a vector of names and a vector of corresponding
values:</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="DataStructures.html#cb319-1" tabindex="-1"></a>values <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span><span class="sc">:</span><span class="dv">2</span></span>
<span id="cb319-2"><a href="DataStructures.html#cb319-2" tabindex="-1"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;far.left&quot;</span>, <span class="st">&quot;left&quot;</span>, <span class="st">&quot;mid&quot;</span>, <span class="st">&quot;right&quot;</span>, <span class="st">&quot;far.right&quot;</span>)</span></code></pre></div>
<p>You can associate the names and the values by creating an empty list and
then populating it with a vectorized assignment statement:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb320-1"><a href="DataStructures.html#cb320-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb320-2"><a href="DataStructures.html#cb320-2" tabindex="-1"></a>lst[names] <span class="ot">&lt;-</span> values</span>
<span id="cb320-3"><a href="DataStructures.html#cb320-3" tabindex="-1"></a>lst</span>
<span id="cb320-4"><a href="DataStructures.html#cb320-4" tabindex="-1"></a><span class="co">#&gt; $far.left</span></span>
<span id="cb320-5"><a href="DataStructures.html#cb320-5" tabindex="-1"></a><span class="co">#&gt; [1] -2</span></span>
<span id="cb320-6"><a href="DataStructures.html#cb320-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb320-7"><a href="DataStructures.html#cb320-7" tabindex="-1"></a><span class="co">#&gt; $left</span></span>
<span id="cb320-8"><a href="DataStructures.html#cb320-8" tabindex="-1"></a><span class="co">#&gt; [1] -1</span></span>
<span id="cb320-9"><a href="DataStructures.html#cb320-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb320-10"><a href="DataStructures.html#cb320-10" tabindex="-1"></a><span class="co">#&gt; $mid</span></span>
<span id="cb320-11"><a href="DataStructures.html#cb320-11" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb320-12"><a href="DataStructures.html#cb320-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb320-13"><a href="DataStructures.html#cb320-13" tabindex="-1"></a><span class="co">#&gt; $right</span></span>
<span id="cb320-14"><a href="DataStructures.html#cb320-14" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb320-15"><a href="DataStructures.html#cb320-15" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb320-16"><a href="DataStructures.html#cb320-16" tabindex="-1"></a><span class="co">#&gt; $far.right</span></span>
<span id="cb320-17"><a href="DataStructures.html#cb320-17" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
<p>Once the association is made, the list can “translate” names into values
through a simple list lookup:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="DataStructures.html#cb321-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;The left limit is&quot;</span>, lst[[<span class="st">&quot;left&quot;</span>]], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb321-2"><a href="DataStructures.html#cb321-2" tabindex="-1"></a><span class="co">#&gt; The left limit is -1</span></span>
<span id="cb321-3"><a href="DataStructures.html#cb321-3" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;The right limit is&quot;</span>, lst[[<span class="st">&quot;right&quot;</span>]], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb321-4"><a href="DataStructures.html#cb321-4" tabindex="-1"></a><span class="co">#&gt; The right limit is 1</span></span>
<span id="cb321-5"><a href="DataStructures.html#cb321-5" tabindex="-1"></a></span>
<span id="cb321-6"><a href="DataStructures.html#cb321-6" tabindex="-1"></a><span class="cf">for</span> (nm <span class="cf">in</span> <span class="fu">names</span>(lst)) <span class="fu">cat</span>(<span class="st">&quot;The&quot;</span>, nm, <span class="st">&quot;limit is&quot;</span>, lst[[nm]], <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb321-7"><a href="DataStructures.html#cb321-7" tabindex="-1"></a><span class="co">#&gt; The far.left limit is -2 </span></span>
<span id="cb321-8"><a href="DataStructures.html#cb321-8" tabindex="-1"></a><span class="co">#&gt; The left limit is -1 </span></span>
<span id="cb321-9"><a href="DataStructures.html#cb321-9" tabindex="-1"></a><span class="co">#&gt; The mid limit is 0 </span></span>
<span id="cb321-10"><a href="DataStructures.html#cb321-10" tabindex="-1"></a><span class="co">#&gt; The right limit is 1 </span></span>
<span id="cb321-11"><a href="DataStructures.html#cb321-11" tabindex="-1"></a><span class="co">#&gt; The far.right limit is 2</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id056" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Removing an Element from a List<a href="DataStructures.html#recipe-id056" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id056" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id056" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to remove an element from a list.</p>
</div>
<div id="solution-id056" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id056" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Assign <code>NULL</code> to the element. R will remove it from the list.</p>
</div>
<div id="discussion-id056" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id056" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To remove a list element, select it by position or by name,
and then assign <code>NULL</code> to the selected element:</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb322-1"><a href="DataStructures.html#cb322-1" tabindex="-1"></a>years <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Kennedy =</span> <span class="dv">1960</span>, <span class="at">Johnson =</span> <span class="dv">1964</span>,</span>
<span id="cb322-2"><a href="DataStructures.html#cb322-2" tabindex="-1"></a>              <span class="at">Carter =</span> <span class="dv">1976</span>, <span class="at">Clinton =</span> <span class="dv">1994</span>)</span>
<span id="cb322-3"><a href="DataStructures.html#cb322-3" tabindex="-1"></a>years</span>
<span id="cb322-4"><a href="DataStructures.html#cb322-4" tabindex="-1"></a><span class="co">#&gt; $Kennedy</span></span>
<span id="cb322-5"><a href="DataStructures.html#cb322-5" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb322-6"><a href="DataStructures.html#cb322-6" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb322-7"><a href="DataStructures.html#cb322-7" tabindex="-1"></a><span class="co">#&gt; $Johnson</span></span>
<span id="cb322-8"><a href="DataStructures.html#cb322-8" tabindex="-1"></a><span class="co">#&gt; [1] 1964</span></span>
<span id="cb322-9"><a href="DataStructures.html#cb322-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb322-10"><a href="DataStructures.html#cb322-10" tabindex="-1"></a><span class="co">#&gt; $Carter</span></span>
<span id="cb322-11"><a href="DataStructures.html#cb322-11" tabindex="-1"></a><span class="co">#&gt; [1] 1976</span></span>
<span id="cb322-12"><a href="DataStructures.html#cb322-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb322-13"><a href="DataStructures.html#cb322-13" tabindex="-1"></a><span class="co">#&gt; $Clinton</span></span>
<span id="cb322-14"><a href="DataStructures.html#cb322-14" tabindex="-1"></a><span class="co">#&gt; [1] 1994</span></span>
<span id="cb322-15"><a href="DataStructures.html#cb322-15" tabindex="-1"></a>years[[<span class="st">&quot;Johnson&quot;</span>]] <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Remove the element labeled &quot;Johnson&quot;</span></span>
<span id="cb322-16"><a href="DataStructures.html#cb322-16" tabindex="-1"></a>years</span>
<span id="cb322-17"><a href="DataStructures.html#cb322-17" tabindex="-1"></a><span class="co">#&gt; $Kennedy</span></span>
<span id="cb322-18"><a href="DataStructures.html#cb322-18" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span>
<span id="cb322-19"><a href="DataStructures.html#cb322-19" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb322-20"><a href="DataStructures.html#cb322-20" tabindex="-1"></a><span class="co">#&gt; $Carter</span></span>
<span id="cb322-21"><a href="DataStructures.html#cb322-21" tabindex="-1"></a><span class="co">#&gt; [1] 1976</span></span>
<span id="cb322-22"><a href="DataStructures.html#cb322-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb322-23"><a href="DataStructures.html#cb322-23" tabindex="-1"></a><span class="co">#&gt; $Clinton</span></span>
<span id="cb322-24"><a href="DataStructures.html#cb322-24" tabindex="-1"></a><span class="co">#&gt; [1] 1994</span></span></code></pre></div>
<p>You can remove multiple elements this way, too:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="DataStructures.html#cb323-1" tabindex="-1"></a>years[<span class="fu">c</span>(<span class="st">&quot;Carter&quot;</span>, <span class="st">&quot;Clinton&quot;</span>)] <span class="ot">&lt;-</span> <span class="cn">NULL</span> <span class="co"># Remove two elements</span></span>
<span id="cb323-2"><a href="DataStructures.html#cb323-2" tabindex="-1"></a>years</span>
<span id="cb323-3"><a href="DataStructures.html#cb323-3" tabindex="-1"></a><span class="co">#&gt; $Kennedy</span></span>
<span id="cb323-4"><a href="DataStructures.html#cb323-4" tabindex="-1"></a><span class="co">#&gt; [1] 1960</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id152" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Flatten a List into a Vector<a href="DataStructures.html#recipe-id152" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id152" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id152" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to flatten all the elements of a list into a vector.</p>
</div>
<div id="solution-id152" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id152" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>unlist</code> function.</p>
</div>
<div id="discussion-id152" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id152" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>There are many contexts that require a vector.
Basic statistical functions work on vectors but not on lists, for example.
If <code>iq.scores</code> is a list of numbers, then we cannot directly compute their mean:</p>
<div class="sourceCode" id="cb324"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb324-1"><a href="DataStructures.html#cb324-1" tabindex="-1"></a>iq.scores <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">103</span>, <span class="dv">80</span>, <span class="dv">99</span>)</span>
<span id="cb324-2"><a href="DataStructures.html#cb324-2" tabindex="-1"></a><span class="fu">mean</span>(iq.scores)</span>
<span id="cb324-3"><a href="DataStructures.html#cb324-3" tabindex="-1"></a><span class="co">#&gt; Warning in mean.default(iq.scores): argument is not numeric or logical:</span></span>
<span id="cb324-4"><a href="DataStructures.html#cb324-4" tabindex="-1"></a><span class="co">#&gt; returning NA</span></span>
<span id="cb324-5"><a href="DataStructures.html#cb324-5" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>Instead, we must flatten the list into a vector using <code>unlist</code> and then
compute the mean of the result:</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="DataStructures.html#cb325-1" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">unlist</span>(iq.scores))</span>
<span id="cb325-2"><a href="DataStructures.html#cb325-2" tabindex="-1"></a><span class="co">#&gt; [1] 100</span></span></code></pre></div>
<p>Here is another example. We can <code>cat</code> scalars and vectors, but we cannot
<code>cat</code> a list:</p>
<div class="sourceCode" id="cb326"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb326-1"><a href="DataStructures.html#cb326-1" tabindex="-1"></a><span class="fu">cat</span>(iq.scores, <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb326-2"><a href="DataStructures.html#cb326-2" tabindex="-1"></a><span class="co">#&gt; Error in cat(iq.scores, &quot;\n&quot;): argument 1 (type &#39;list&#39;) cannot be handled by &#39;cat&#39;</span></span></code></pre></div>
<p>One solution is to flatten the list into a vector before printing:</p>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="DataStructures.html#cb327-1" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">&quot;IQ Scores:&quot;</span>, <span class="fu">unlist</span>(iq.scores), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span>
<span id="cb327-2"><a href="DataStructures.html#cb327-2" tabindex="-1"></a><span class="co">#&gt; IQ Scores: 100 120 103 80 99</span></span></code></pre></div>
</div>
<div id="see_also-id152" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id152" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Conversions such as this are discussed more fully in Recipe <a href="DataStructures.html#recipe-id074">5.29</a>,
<a href="DataStructures.html#recipe-id074">“Converting One Structured Data Type into Another”</a>.</p>
</div>
</div>
<div id="recipe-id058" class="section level2 hasAnchor" number="5.12">
<h2><span class="header-section-number">5.12</span> Removing NULL Elements from a List<a href="DataStructures.html#recipe-id058" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id058" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id058" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your list contains <code>NULL</code> values. You want to remove them.</p>
</div>
<div id="solution-id058" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id058" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>compact</code> from the <code>purrr</code> package will remove the <code>NULL</code> elements:</p>
</div>
<div id="discussion-id058" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id058" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The curious reader may be wondering how a list can contain <code>NULL</code>
elements, given that we remove elements by setting them to <code>NULL</code>
(see Recipe <a href="DataStructures.html#recipe-id056">5.10</a>, <a href="DataStructures.html#recipe-id056">“Removing an Element from a List”</a>).
The answer is that we can <em>create</em> a list containing <code>NULL</code> elements:</p>
<div class="sourceCode" id="cb328"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb328-1"><a href="DataStructures.html#cb328-1" tabindex="-1"></a><span class="fu">library</span>(purrr)     <span class="co"># or library(tidyverse)</span></span>
<span id="cb328-2"><a href="DataStructures.html#cb328-2" tabindex="-1"></a></span>
<span id="cb328-3"><a href="DataStructures.html#cb328-3" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;Moe&quot;</span>, <span class="cn">NULL</span>, <span class="st">&quot;Curly&quot;</span>)</span>
<span id="cb328-4"><a href="DataStructures.html#cb328-4" tabindex="-1"></a>lst</span>
<span id="cb328-5"><a href="DataStructures.html#cb328-5" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb328-6"><a href="DataStructures.html#cb328-6" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Moe&quot;</span></span>
<span id="cb328-7"><a href="DataStructures.html#cb328-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb328-8"><a href="DataStructures.html#cb328-8" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb328-9"><a href="DataStructures.html#cb328-9" tabindex="-1"></a><span class="co">#&gt; NULL</span></span>
<span id="cb328-10"><a href="DataStructures.html#cb328-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb328-11"><a href="DataStructures.html#cb328-11" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb328-12"><a href="DataStructures.html#cb328-12" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Curly&quot;</span></span>
<span id="cb328-13"><a href="DataStructures.html#cb328-13" tabindex="-1"></a></span>
<span id="cb328-14"><a href="DataStructures.html#cb328-14" tabindex="-1"></a><span class="fu">compact</span>(lst)   <span class="co"># Remove NULL element</span></span>
<span id="cb328-15"><a href="DataStructures.html#cb328-15" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb328-16"><a href="DataStructures.html#cb328-16" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Moe&quot;</span></span>
<span id="cb328-17"><a href="DataStructures.html#cb328-17" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb328-18"><a href="DataStructures.html#cb328-18" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb328-19"><a href="DataStructures.html#cb328-19" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Curly&quot;</span></span></code></pre></div>
<p>In practice we might end up with <code>NULL</code> items in a list after applying some transformation.</p>
</div>
<div id="see_also-id058" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id058" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id056">5.10</a>, <a href="DataStructures.html#recipe-id056">“Removing an Element from a List”</a> for how to remove
list elements.</p>
<p>In R, <code>NA</code> and <code>NULL</code> are not the same thing.
The <code>compact</code> function will remove <code>NULL</code> from a list but not <code>NA</code>.
To remove <code>NA</code> values, see Recipe <a href="DataStructures.html#recipe-id060">5.13</a>,
<a href="DataStructures.html#recipe-id060">“Removing List Elements Using a Condition”</a>.</p>
</div>
</div>
<div id="recipe-id060" class="section level2 hasAnchor" number="5.13">
<h2><span class="header-section-number">5.13</span> Removing List Elements Using a Condition<a href="DataStructures.html#recipe-id060" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id060" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id060" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to remove elements from a list according to a conditional test,
such as removing elements that are undefined, negative, or smaller than some threshold.</p>
</div>
<div id="solution-id060" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id060" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Start with a function that returns <code>TRUE</code> when your criteria is met and <code>FALSE</code> otherwise.
Then use the <code>discard</code> function from <code>purrr</code> to remove values that match your criteria.
This code snippet, for example, uses the <code>is.na</code> function to remove NA values from <code>lst</code>:</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="DataStructures.html#cb329-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="cn">NA</span>, <span class="dv">0</span>, <span class="cn">NA</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb329-2"><a href="DataStructures.html#cb329-2" tabindex="-1"></a></span>
<span id="cb329-3"><a href="DataStructures.html#cb329-3" tabindex="-1"></a>lst <span class="sc">%&gt;%</span></span>
<span id="cb329-4"><a href="DataStructures.html#cb329-4" tabindex="-1"></a>  <span class="fu">discard</span>(is.na)</span>
<span id="cb329-5"><a href="DataStructures.html#cb329-5" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb329-6"><a href="DataStructures.html#cb329-6" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb329-7"><a href="DataStructures.html#cb329-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb329-8"><a href="DataStructures.html#cb329-8" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb329-9"><a href="DataStructures.html#cb329-9" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb329-10"><a href="DataStructures.html#cb329-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb329-11"><a href="DataStructures.html#cb329-11" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb329-12"><a href="DataStructures.html#cb329-12" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
<div id="discussion-id060" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id060" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>discard</code> function removes elements from a list using a <em>predicate</em>,
which is a function that returns either <code>TRUE</code> or <code>FALSE</code>.
The predicate is applied to each element of the list.
If the predicate returns <code>TRUE</code>, the element is discarded; otherwise, it is kept.</p>
<p>Suppose we want to remove character strings from <code>lst</code>.
The function <code>is.character</code> is a predicate that returns <code>TRUE</code> if its argument is a character string,
so we can use it with <code>discard</code>.</p>
<div class="sourceCode" id="cb330"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb330-1"><a href="DataStructures.html#cb330-1" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">3</span>, <span class="st">&quot;dog&quot;</span>, <span class="dv">2</span>, <span class="st">&quot;cat&quot;</span>, <span class="dv">1</span>)</span>
<span id="cb330-2"><a href="DataStructures.html#cb330-2" tabindex="-1"></a></span>
<span id="cb330-3"><a href="DataStructures.html#cb330-3" tabindex="-1"></a>lst <span class="sc">%&gt;%</span></span>
<span id="cb330-4"><a href="DataStructures.html#cb330-4" tabindex="-1"></a>  <span class="fu">discard</span>(is.character)</span>
<span id="cb330-5"><a href="DataStructures.html#cb330-5" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb330-6"><a href="DataStructures.html#cb330-6" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb330-7"><a href="DataStructures.html#cb330-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb330-8"><a href="DataStructures.html#cb330-8" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb330-9"><a href="DataStructures.html#cb330-9" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb330-10"><a href="DataStructures.html#cb330-10" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb330-11"><a href="DataStructures.html#cb330-11" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb330-12"><a href="DataStructures.html#cb330-12" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>You can define your own predicate and use it with <code>discard</code>.
This example removes both <code>NA</code> and <code>NULL</code> values from a list
by defining the predicate <code>is_na_or_null</code>:</p>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="DataStructures.html#cb331-1" tabindex="-1"></a>is_na_or_null <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb331-2"><a href="DataStructures.html#cb331-2" tabindex="-1"></a>  <span class="fu">is.na</span>(x) <span class="sc">||</span> <span class="fu">is.null</span>(x)</span>
<span id="cb331-3"><a href="DataStructures.html#cb331-3" tabindex="-1"></a>}</span>
<span id="cb331-4"><a href="DataStructures.html#cb331-4" tabindex="-1"></a></span>
<span id="cb331-5"><a href="DataStructures.html#cb331-5" tabindex="-1"></a>lst <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">2</span>, <span class="cn">NULL</span>, <span class="dv">3</span>)</span>
<span id="cb331-6"><a href="DataStructures.html#cb331-6" tabindex="-1"></a></span>
<span id="cb331-7"><a href="DataStructures.html#cb331-7" tabindex="-1"></a>lst <span class="sc">%&gt;%</span></span>
<span id="cb331-8"><a href="DataStructures.html#cb331-8" tabindex="-1"></a>  <span class="fu">discard</span>(is_na_or_null)</span>
<span id="cb331-9"><a href="DataStructures.html#cb331-9" tabindex="-1"></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb331-10"><a href="DataStructures.html#cb331-10" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb331-11"><a href="DataStructures.html#cb331-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb331-12"><a href="DataStructures.html#cb331-12" tabindex="-1"></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb331-13"><a href="DataStructures.html#cb331-13" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span>
<span id="cb331-14"><a href="DataStructures.html#cb331-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb331-15"><a href="DataStructures.html#cb331-15" tabindex="-1"></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb331-16"><a href="DataStructures.html#cb331-16" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span></code></pre></div>
<p>Lists can hold complex objects, too, not just atomic values.
Suppose that <code>mods</code> is a list of linear models created by the <code>lm</code> function.</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb332-1"><a href="DataStructures.html#cb332-1" tabindex="-1"></a>mods <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="fu">lm</span>(x <span class="sc">~</span> y1),</span>
<span id="cb332-2"><a href="DataStructures.html#cb332-2" tabindex="-1"></a>             <span class="fu">lm</span>(x <span class="sc">~</span> y2),</span>
<span id="cb332-3"><a href="DataStructures.html#cb332-3" tabindex="-1"></a>             <span class="fu">lm</span>(x <span class="sc">~</span> y3))</span></code></pre></div>
<p>We can define a predicate, <code>filter_r2</code>, to identify models
whose <em>R</em><sup>2</sup> values are less than 0.70,
then use the predicate to remove models from <code>mods</code>:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="DataStructures.html#cb333-1" tabindex="-1"></a>filter_r2 <span class="ot">&lt;-</span> <span class="cf">function</span>(model) {</span>
<span id="cb333-2"><a href="DataStructures.html#cb333-2" tabindex="-1"></a>  <span class="fu">summary</span>(model)<span class="sc">$</span>r.squared <span class="sc">&lt;</span> <span class="fl">0.7</span></span>
<span id="cb333-3"><a href="DataStructures.html#cb333-3" tabindex="-1"></a>}</span>
<span id="cb333-4"><a href="DataStructures.html#cb333-4" tabindex="-1"></a></span>
<span id="cb333-5"><a href="DataStructures.html#cb333-5" tabindex="-1"></a>mods <span class="sc">%&gt;%</span></span>
<span id="cb333-6"><a href="DataStructures.html#cb333-6" tabindex="-1"></a>  <span class="fu">discard</span>(filter_r2)</span></code></pre></div>
</div>
<div id="see_also-id060" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id060" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipes <a href="DataStructures.html#recipe-id054">5.7</a>, <a href="DataStructures.html#recipe-id054">“Selecting List Elements by Position”</a>,
<a href="DataStructures.html#recipe-id056">5.10</a>, <a href="DataStructures.html#recipe-id056">“Removing an Element from a List”</a>,
and <a href="SimpleProgramming.html#recipe-id117">15.3</a>, <a href="SimpleProgramming.html#recipe-id117">“Defining a Function”</a>.</p>
<p>This recipe uses the <code>discard</code> function.
The inverse of <code>discard</code> is the <code>keep</code> function,
which uses a predicate to <em>retain</em> list elements instead of discarding them.</p>
</div>
</div>
<div id="recipe-id062" class="section level2 hasAnchor" number="5.14">
<h2><span class="header-section-number">5.14</span> Initializing a Matrix<a href="DataStructures.html#recipe-id062" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id062" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id062" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to create a matrix and initialize it from given values.</p>
</div>
<div id="solution-id062" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id062" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Capture the data in a vector or list, and then use the <code>matrix</code> function
to shape the data into a matrix. This example shapes a vector into a 2 ×
3 matrix (i.e., two rows and three columns):</p>
<div class="sourceCode" id="cb334"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb334-1"><a href="DataStructures.html#cb334-1" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb334-2"><a href="DataStructures.html#cb334-2" tabindex="-1"></a><span class="fu">matrix</span>(vec, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb334-3"><a href="DataStructures.html#cb334-3" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb334-4"><a href="DataStructures.html#cb334-4" tabindex="-1"></a><span class="co">#&gt; [1,]    1    3    5</span></span>
<span id="cb334-5"><a href="DataStructures.html#cb334-5" tabindex="-1"></a><span class="co">#&gt; [2,]    2    4    6</span></span></code></pre></div>
</div>
<div id="discussion-id062" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id062" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The first argument of <code>matrix</code> is the data, the second argument is the
number of rows, and the third argument is the number of columns.
Note that the matrix in the Solution was filled column by column, not row by row.</p>
<p>It’s common to initialize an entire matrix to one value, such as <code>0</code> or
<code>NA</code>. If the first argument of <code>matrix</code> is a single value, then R will
apply the Recycling Rule and automatically replicate the value to fill
the entire matrix:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="DataStructures.html#cb335-1" tabindex="-1"></a><span class="fu">matrix</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># Create an all-zeros matrix</span></span>
<span id="cb335-2"><a href="DataStructures.html#cb335-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb335-3"><a href="DataStructures.html#cb335-3" tabindex="-1"></a><span class="co">#&gt; [1,]    0    0    0</span></span>
<span id="cb335-4"><a href="DataStructures.html#cb335-4" tabindex="-1"></a><span class="co">#&gt; [2,]    0    0    0</span></span>
<span id="cb335-5"><a href="DataStructures.html#cb335-5" tabindex="-1"></a></span>
<span id="cb335-6"><a href="DataStructures.html#cb335-6" tabindex="-1"></a><span class="fu">matrix</span>(<span class="cn">NA</span>, <span class="dv">2</span>, <span class="dv">3</span>) <span class="co"># Create a matrix populated with NA</span></span>
<span id="cb335-7"><a href="DataStructures.html#cb335-7" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb335-8"><a href="DataStructures.html#cb335-8" tabindex="-1"></a><span class="co">#&gt; [1,]   NA   NA   NA</span></span>
<span id="cb335-9"><a href="DataStructures.html#cb335-9" tabindex="-1"></a><span class="co">#&gt; [2,]   NA   NA   NA</span></span></code></pre></div>
<p>You can create a matrix with a one-liner, of course, but it becomes
difficult to read:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb336-1"><a href="DataStructures.html#cb336-1" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>, <span class="fl">2.1</span>, <span class="fl">2.2</span>, <span class="fl">2.3</span>), <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb336-2"><a href="DataStructures.html#cb336-2" tabindex="-1"></a>mat</span>
<span id="cb336-3"><a href="DataStructures.html#cb336-3" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb336-4"><a href="DataStructures.html#cb336-4" tabindex="-1"></a><span class="co">#&gt; [1,]  1.1  1.3  2.2</span></span>
<span id="cb336-5"><a href="DataStructures.html#cb336-5" tabindex="-1"></a><span class="co">#&gt; [2,]  1.2  2.1  2.3</span></span></code></pre></div>
<p>A common idiom in R is typing the data itself in a rectangular shape
that reveals the matrix structure:</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="DataStructures.html#cb337-1" tabindex="-1"></a>theData <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb337-2"><a href="DataStructures.html#cb337-2" tabindex="-1"></a>  <span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>,</span>
<span id="cb337-3"><a href="DataStructures.html#cb337-3" tabindex="-1"></a>  <span class="fl">2.1</span>, <span class="fl">2.2</span>, <span class="fl">2.3</span></span>
<span id="cb337-4"><a href="DataStructures.html#cb337-4" tabindex="-1"></a>)</span>
<span id="cb337-5"><a href="DataStructures.html#cb337-5" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(theData, <span class="dv">2</span>, <span class="dv">3</span>, <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span>
<span id="cb337-6"><a href="DataStructures.html#cb337-6" tabindex="-1"></a>mat</span>
<span id="cb337-7"><a href="DataStructures.html#cb337-7" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb337-8"><a href="DataStructures.html#cb337-8" tabindex="-1"></a><span class="co">#&gt; [1,]  1.1  1.2  1.3</span></span>
<span id="cb337-9"><a href="DataStructures.html#cb337-9" tabindex="-1"></a><span class="co">#&gt; [2,]  2.1  2.2  2.3</span></span></code></pre></div>
<p>Setting <code>byrow=TRUE</code> tells <code>matrix</code> that the data is row-by-row and not
column-by-column (which is the default). In condensed form, that
becomes:</p>
<div class="sourceCode" id="cb338"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb338-1"><a href="DataStructures.html#cb338-1" tabindex="-1"></a>mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>,</span>
<span id="cb338-2"><a href="DataStructures.html#cb338-2" tabindex="-1"></a>                <span class="fl">2.1</span>, <span class="fl">2.2</span>, <span class="fl">2.3</span>),</span>
<span id="cb338-3"><a href="DataStructures.html#cb338-3" tabindex="-1"></a>              <span class="dv">2</span>, <span class="dv">3</span>,</span>
<span id="cb338-4"><a href="DataStructures.html#cb338-4" tabindex="-1"></a>              <span class="at">byrow =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>Expressed this way, it’s easy to see the two rows and three
columns of data.</p>
<p>There is a quick-and-dirty way to turn a vector into a matrix:
just assign dimensions to the vector.
This was discussed in the <a href="DataStructures.html#intro-DataStructures">Introduction</a>.
The following example creates a
vanilla vector and then shapes it into a 2 × 3 matrix:</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="DataStructures.html#cb339-1" tabindex="-1"></a>v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>, <span class="fl">2.1</span>, <span class="fl">2.2</span>, <span class="fl">2.3</span>)</span>
<span id="cb339-2"><a href="DataStructures.html#cb339-2" tabindex="-1"></a><span class="fu">dim</span>(v) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb339-3"><a href="DataStructures.html#cb339-3" tabindex="-1"></a>v</span>
<span id="cb339-4"><a href="DataStructures.html#cb339-4" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb339-5"><a href="DataStructures.html#cb339-5" tabindex="-1"></a><span class="co">#&gt; [1,]  1.1  1.3  2.2</span></span>
<span id="cb339-6"><a href="DataStructures.html#cb339-6" tabindex="-1"></a><span class="co">#&gt; [2,]  1.2  2.1  2.3</span></span></code></pre></div>
<p>We find this more opaque than using <code>matrix</code>,
especially since there is no <code>byrow</code> option here.</p>
</div>
<div id="see_also-id062" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id062" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id050">5.3</a>, <a href="DataStructures.html#recipe-id050">“Understanding the Recycling Rule”</a>.</p>
</div>
</div>
<div id="recipe-id139" class="section level2 hasAnchor" number="5.15">
<h2><span class="header-section-number">5.15</span> Performing Matrix Operations<a href="DataStructures.html#recipe-id139" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id139" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id139" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to perform matrix operations such as transpose, matrix
inversion, matrix multiplication, or constructing an identity matrix.</p>
</div>
<div id="solution-id139" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id139" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<dl>
<dt><code>t(A)</code></dt>
<dd>
<p>Matrix transposition of A</p>
</dd>
<dt><code>solve(A)</code></dt>
<dd>
<p>Matrix inverse of A</p>
</dd>
<dt><code>A %*% B</code></dt>
<dd>
<p>Matrix multiplication of A and B</p>
</dd>
<dt><code>diag(*n*)</code></dt>
<dd>
<p>An <em>n</em>-by-<em>n</em> diagonal (identity) matrix</p>
</dd>
</dl>
</div>
<div id="discussion-id139" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id139" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Recall that <code>A*B</code> is element-wise multiplication, whereas <code>A</code> <code>%*%</code> <code>B</code>
is matrix multiplication.</p>
<p>All these functions return a matrix. Their arguments can be either
matrices or data frames. If they are data frames, then R will first
convert them to matrices (although this is useful only if the data frame
contains exclusively numeric values).</p>
</div>
</div>
<div id="recipe-id063" class="section level2 hasAnchor" number="5.16">
<h2><span class="header-section-number">5.16</span> Giving Descriptive Names to the Rows and Columns of a Matrix<a href="DataStructures.html#recipe-id063" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id063" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id063" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to assign descriptive names to the rows or columns of a matrix.</p>
</div>
<div id="solution-id063" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id063" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Every matrix has a <code>rownames</code> attribute and a <code>colnames</code> attribute.
Assign a vector of character strings to the appropriate attribute:</p>
<div class="sourceCode" id="cb340"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb340-1"><a href="DataStructures.html#cb340-1" tabindex="-1"></a><span class="fu">rownames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;rowname1&quot;</span>, <span class="st">&quot;rowname2&quot;</span>, ..., <span class="st">&quot;rownameN&quot;</span>)</span>
<span id="cb340-2"><a href="DataStructures.html#cb340-2" tabindex="-1"></a><span class="fu">colnames</span>(mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;colname1&quot;</span>, <span class="st">&quot;colname2&quot;</span>, ..., <span class="st">&quot;colnameN&quot;</span>)</span></code></pre></div>
</div>
<div id="discussion-id063" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id063" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>R lets you assign names to the rows and columns of a matrix, which is
useful for printing the matrix.
R will display the names if they are defined, enhancing the readability of your output.
Consider this matrix of correlations between the stock prices of IBM, Microsoft,and Google:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="DataStructures.html#cb341-1" tabindex="-1"></a><span class="fu">print</span>(corr_mat)</span>
<span id="cb341-2"><a href="DataStructures.html#cb341-2" tabindex="-1"></a><span class="co">#&gt;       [,1]  [,2]  [,3]</span></span>
<span id="cb341-3"><a href="DataStructures.html#cb341-3" tabindex="-1"></a><span class="co">#&gt; [1,] 1.000 0.556 0.390</span></span>
<span id="cb341-4"><a href="DataStructures.html#cb341-4" tabindex="-1"></a><span class="co">#&gt; [2,] 0.556 1.000 0.444</span></span>
<span id="cb341-5"><a href="DataStructures.html#cb341-5" tabindex="-1"></a><span class="co">#&gt; [3,] 0.390 0.444 1.000</span></span></code></pre></div>
<p>In this form, the interpretation of the matrix is not self-evident.
We can give names to the rows and columns, clarifying its meaning:</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb342-1"><a href="DataStructures.html#cb342-1" tabindex="-1"></a><span class="fu">colnames</span>(corr_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="st">&quot;MSFT&quot;</span>, <span class="st">&quot;GOOG&quot;</span>)</span>
<span id="cb342-2"><a href="DataStructures.html#cb342-2" tabindex="-1"></a><span class="fu">rownames</span>(corr_mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;AAPL&quot;</span>, <span class="st">&quot;MSFT&quot;</span>, <span class="st">&quot;GOOG&quot;</span>)</span>
<span id="cb342-3"><a href="DataStructures.html#cb342-3" tabindex="-1"></a>corr_mat</span>
<span id="cb342-4"><a href="DataStructures.html#cb342-4" tabindex="-1"></a><span class="co">#&gt;       AAPL  MSFT  GOOG</span></span>
<span id="cb342-5"><a href="DataStructures.html#cb342-5" tabindex="-1"></a><span class="co">#&gt; AAPL 1.000 0.556 0.390</span></span>
<span id="cb342-6"><a href="DataStructures.html#cb342-6" tabindex="-1"></a><span class="co">#&gt; MSFT 0.556 1.000 0.444</span></span>
<span id="cb342-7"><a href="DataStructures.html#cb342-7" tabindex="-1"></a><span class="co">#&gt; GOOG 0.390 0.444 1.000</span></span></code></pre></div>
<p>Now you can see at a glance which rows and columns apply to which
stocks.</p>
<p>Another advantage of naming rows and columns is that you can refer to
matrix elements by those names:</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="DataStructures.html#cb343-1" tabindex="-1"></a><span class="co"># What is the correlation between MSFT and GOOG?</span></span>
<span id="cb343-2"><a href="DataStructures.html#cb343-2" tabindex="-1"></a>corr_mat[<span class="st">&quot;MSFT&quot;</span>, <span class="st">&quot;GOOG&quot;</span>]</span>
<span id="cb343-3"><a href="DataStructures.html#cb343-3" tabindex="-1"></a><span class="co">#&gt; [1] 0.444</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id250" class="section level2 hasAnchor" number="5.17">
<h2><span class="header-section-number">5.17</span> Selecting One Row or Column from a Matrix<a href="DataStructures.html#recipe-id250" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id250" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id250" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to select a single row or a single column from a matrix.</p>
</div>
<div id="solution-id250" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id250" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The solution depends on what you want.
If you want the result to be a simple vector, just use normal indexing:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb344-1"><a href="DataStructures.html#cb344-1" tabindex="-1"></a>mat[<span class="dv">1</span>, ]     <span class="co"># First row</span></span>
<span id="cb344-2"><a href="DataStructures.html#cb344-2" tabindex="-1"></a>mat[, <span class="dv">3</span>]     <span class="co"># Third column</span></span></code></pre></div>
<p>If you want the result to be a one-row matrix or a one-column matrix,
then include the <code>drop=FALSE</code> argument:</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="DataStructures.html#cb345-1" tabindex="-1"></a>mat[<span class="dv">1</span>, , drop<span class="ot">=</span><span class="cn">FALSE</span>]   <span class="co"># First row, one-row matrix</span></span>
<span id="cb345-2"><a href="DataStructures.html#cb345-2" tabindex="-1"></a>mat[, <span class="dv">3</span>, drop<span class="ot">=</span><span class="cn">FALSE</span>]   <span class="co"># Third column, one-column matrix</span></span></code></pre></div>
</div>
<div id="discussion-id250" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id250" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Normally, when you select one row or column from a matrix, R strips off
the dimensions. The result is a dimensionless vector:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb346-1"><a href="DataStructures.html#cb346-1" tabindex="-1"></a>mat[<span class="dv">1</span>, ]</span>
<span id="cb346-2"><a href="DataStructures.html#cb346-2" tabindex="-1"></a><span class="co">#&gt; [1] 1.1 1.2 1.3</span></span>
<span id="cb346-3"><a href="DataStructures.html#cb346-3" tabindex="-1"></a>mat[, <span class="dv">3</span>]</span>
<span id="cb346-4"><a href="DataStructures.html#cb346-4" tabindex="-1"></a><span class="co">#&gt; [1] 1.3 2.3</span></span></code></pre></div>
<p>When you include the <code>drop=FALSE</code> argument, however, R retains the
dimensions. In that case, selecting a row returns a row vector (a 1 ×
<em>n</em> matrix):</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="DataStructures.html#cb347-1" tabindex="-1"></a>mat[<span class="dv">1</span>, , drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb347-2"><a href="DataStructures.html#cb347-2" tabindex="-1"></a><span class="co">#&gt;      [,1] [,2] [,3]</span></span>
<span id="cb347-3"><a href="DataStructures.html#cb347-3" tabindex="-1"></a><span class="co">#&gt; [1,]  1.1  1.2  1.3</span></span></code></pre></div>
<p>Likewise, selecting a column with <code>drop=FALSE</code> returns a column vector
(an <em>n</em> × 1 matrix):</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb348-1"><a href="DataStructures.html#cb348-1" tabindex="-1"></a>mat[, <span class="dv">3</span>, drop<span class="ot">=</span><span class="cn">FALSE</span>]</span>
<span id="cb348-2"><a href="DataStructures.html#cb348-2" tabindex="-1"></a><span class="co">#&gt;      [,1]</span></span>
<span id="cb348-3"><a href="DataStructures.html#cb348-3" tabindex="-1"></a><span class="co">#&gt; [1,]  1.3</span></span>
<span id="cb348-4"><a href="DataStructures.html#cb348-4" tabindex="-1"></a><span class="co">#&gt; [2,]  2.3</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id251" class="section level2 hasAnchor" number="5.18">
<h2><span class="header-section-number">5.18</span> Initializing a Data Frame from Column Data<a href="DataStructures.html#recipe-id251" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id251" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id251" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your data is organized by columns, and you want to assemble it into a
data frame.</p>
</div>
<div id="solution-id251" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id251" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If your data is captured in several vectors and/or factors, use the
<code>data.frame</code> function to assemble them into a data frame:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="DataStructures.html#cb349-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(v1, v2, v3, f1)</span></code></pre></div>
<p>If your data is captured in a <em>list</em> that contains vectors and/or
factors, use <code>as.data.frame</code> instead:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb350-1"><a href="DataStructures.html#cb350-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(list.of.vectors)</span></code></pre></div>
</div>
<div id="discussion-id251" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id251" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A data frame is a collection of columns, each of which corresponds to an
observed variable (in the statistical sense, not the programming sense).
If your data is already organized into columns, then it’s easy to build
a data frame.</p>
<p>The <code>data.frame</code> function can construct a data frame from vectors, where
each vector is one observed variable. Suppose you have two numeric
variables, one character variable, and one response variable.
The <code>data.frame</code> function can create a data frame from your vectors.</p>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="DataStructures.html#cb351-1" tabindex="-1"></a><span class="fu">data.frame</span>(pred1, pred2, pred3, resp)</span>
<span id="cb351-2"><a href="DataStructures.html#cb351-2" tabindex="-1"></a><span class="co">#&gt;   pred1 pred2 pred3 resp</span></span>
<span id="cb351-3"><a href="DataStructures.html#cb351-3" tabindex="-1"></a><span class="co">#&gt; 1  1.75  11.8    AM 13.2</span></span>
<span id="cb351-4"><a href="DataStructures.html#cb351-4" tabindex="-1"></a><span class="co">#&gt; 2  4.01  10.7    PM 12.9</span></span>
<span id="cb351-5"><a href="DataStructures.html#cb351-5" tabindex="-1"></a><span class="co">#&gt; 3  2.64  12.2    AM 13.9</span></span>
<span id="cb351-6"><a href="DataStructures.html#cb351-6" tabindex="-1"></a><span class="co">#&gt; 4  6.03  12.2    PM 14.9</span></span>
<span id="cb351-7"><a href="DataStructures.html#cb351-7" tabindex="-1"></a><span class="co">#&gt; 5  2.78  15.0    PM 16.4</span></span></code></pre></div>
<p>Notice that <code>data.frame</code> takes the column names from your program
variables. You can override that default by supplying explicit column
names:</p>
<div class="sourceCode" id="cb352"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb352-1"><a href="DataStructures.html#cb352-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">p1 =</span> pred1, <span class="at">p2 =</span> pred2, <span class="at">p3 =</span> pred3, <span class="at">r =</span> resp)</span>
<span id="cb352-2"><a href="DataStructures.html#cb352-2" tabindex="-1"></a><span class="co">#&gt;     p1   p2 p3    r</span></span>
<span id="cb352-3"><a href="DataStructures.html#cb352-3" tabindex="-1"></a><span class="co">#&gt; 1 1.75 11.8 AM 13.2</span></span>
<span id="cb352-4"><a href="DataStructures.html#cb352-4" tabindex="-1"></a><span class="co">#&gt; 2 4.01 10.7 PM 12.9</span></span>
<span id="cb352-5"><a href="DataStructures.html#cb352-5" tabindex="-1"></a><span class="co">#&gt; 3 2.64 12.2 AM 13.9</span></span>
<span id="cb352-6"><a href="DataStructures.html#cb352-6" tabindex="-1"></a><span class="co">#&gt; 4 6.03 12.2 PM 14.9</span></span>
<span id="cb352-7"><a href="DataStructures.html#cb352-7" tabindex="-1"></a><span class="co">#&gt; 5 2.78 15.0 PM 16.4</span></span></code></pre></div>
<p>If you’d rather have a tibble than a data frame, use the <code>tibble</code> function from the tidyverse:</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="DataStructures.html#cb353-1" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">p1 =</span> pred1, <span class="at">p2 =</span> pred2, <span class="at">p3 =</span> pred3, <span class="at">r =</span> resp)</span>
<span id="cb353-2"><a href="DataStructures.html#cb353-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb353-3"><a href="DataStructures.html#cb353-3" tabindex="-1"></a><span class="co">#&gt;      p1    p2 p3        r</span></span>
<span id="cb353-4"><a href="DataStructures.html#cb353-4" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;</span></span>
<span id="cb353-5"><a href="DataStructures.html#cb353-5" tabindex="-1"></a><span class="co">#&gt; 1  1.75  11.8 AM     13.2</span></span>
<span id="cb353-6"><a href="DataStructures.html#cb353-6" tabindex="-1"></a><span class="co">#&gt; 2  4.01  10.7 PM     12.9</span></span>
<span id="cb353-7"><a href="DataStructures.html#cb353-7" tabindex="-1"></a><span class="co">#&gt; 3  2.64  12.2 AM     13.9</span></span>
<span id="cb353-8"><a href="DataStructures.html#cb353-8" tabindex="-1"></a><span class="co">#&gt; 4  6.03  12.2 PM     14.9</span></span>
<span id="cb353-9"><a href="DataStructures.html#cb353-9" tabindex="-1"></a><span class="co">#&gt; 5  2.78  15.0 PM     16.4</span></span></code></pre></div>
<p>Sometimes, your data may indeed be organized into vectors,
but those vectors are held in a list, not individual program variables.</p>
<div class="sourceCode" id="cb354"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb354-1"><a href="DataStructures.html#cb354-1" tabindex="-1"></a>list.of.vectors <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">p1=</span>pred1, <span class="at">p2=</span>pred2, <span class="at">p3=</span>pred3, <span class="at">r=</span>resp)</span></code></pre></div>
<p>In that case, use the <code>as.data.frame</code> function to create a data frame from the list:</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="DataStructures.html#cb355-1" tabindex="-1"></a><span class="fu">as.data.frame</span>(list.of.vectors)</span>
<span id="cb355-2"><a href="DataStructures.html#cb355-2" tabindex="-1"></a><span class="co">#&gt;     p1   p2 p3    r</span></span>
<span id="cb355-3"><a href="DataStructures.html#cb355-3" tabindex="-1"></a><span class="co">#&gt; 1 1.75 11.8 AM 13.2</span></span>
<span id="cb355-4"><a href="DataStructures.html#cb355-4" tabindex="-1"></a><span class="co">#&gt; 2 4.01 10.7 PM 12.9</span></span>
<span id="cb355-5"><a href="DataStructures.html#cb355-5" tabindex="-1"></a><span class="co">#&gt; 3 2.64 12.2 AM 13.9</span></span>
<span id="cb355-6"><a href="DataStructures.html#cb355-6" tabindex="-1"></a><span class="co">#&gt; 4 6.03 12.2 PM 14.9</span></span>
<span id="cb355-7"><a href="DataStructures.html#cb355-7" tabindex="-1"></a><span class="co">#&gt; 5 2.78 15.0 PM 16.4</span></span></code></pre></div>
<p>or use <code>as_tibble</code> to create a tibble:</p>
<div class="sourceCode" id="cb356"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb356-1"><a href="DataStructures.html#cb356-1" tabindex="-1"></a><span class="fu">as_tibble</span>(list.of.vectors)</span>
<span id="cb356-2"><a href="DataStructures.html#cb356-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 5 × 4</span></span>
<span id="cb356-3"><a href="DataStructures.html#cb356-3" tabindex="-1"></a><span class="co">#&gt;      p1    p2 p3        r</span></span>
<span id="cb356-4"><a href="DataStructures.html#cb356-4" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;fct&gt; &lt;dbl&gt;</span></span>
<span id="cb356-5"><a href="DataStructures.html#cb356-5" tabindex="-1"></a><span class="co">#&gt; 1  1.75  11.8 AM     13.2</span></span>
<span id="cb356-6"><a href="DataStructures.html#cb356-6" tabindex="-1"></a><span class="co">#&gt; 2  4.01  10.7 PM     12.9</span></span>
<span id="cb356-7"><a href="DataStructures.html#cb356-7" tabindex="-1"></a><span class="co">#&gt; 3  2.64  12.2 AM     13.9</span></span>
<span id="cb356-8"><a href="DataStructures.html#cb356-8" tabindex="-1"></a><span class="co">#&gt; 4  6.03  12.2 PM     14.9</span></span>
<span id="cb356-9"><a href="DataStructures.html#cb356-9" tabindex="-1"></a><span class="co">#&gt; 5  2.78  15.0 PM     16.4</span></span></code></pre></div>
<div id="factors-in-data-frames" class="section level4 unnumbered hasAnchor">
<h4>Factors in data frames<a href="DataStructures.html#factors-in-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>There is an important difference between creating a data frame and creating a tibble.
When you use the <code>data.frame</code> function to create a data frame,
R will convert character values into factors by default.
The <code>pred3</code> value in the preceding <code>data.frame</code> example was converted to a factor,
but that is not evident from the output.</p>
<p>The <code>tibble</code> and <code>as_tibble</code> functions, however, do not change character data.
If you look at the <code>tibble</code> example,
you’ll see column <code>p3</code> has type <code>chr</code>, meaning character.</p>
<p>This difference is something you should be aware of.
It can be maddeningly frustrating to debug an issue caused by this subtle difference.</p>
</div>
</div>
</div>
<div id="recipe-id252" class="section level2 hasAnchor" number="5.19">
<h2><span class="header-section-number">5.19</span> Initializing a Data Frame from Row Data<a href="DataStructures.html#recipe-id252" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id252" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id252" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your data is organized by rows, and you want to assemble it into a data
frame.</p>
</div>
<div id="solution-id252" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id252" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Store each row in a one-row data frame.
Use <code>rbind</code> to bind the rows into one large data frame:</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="DataStructures.html#cb357-1" tabindex="-1"></a><span class="fu">rbind</span>(row1, row2, . . . , rowN)</span></code></pre></div>
</div>
<div id="discussion-id252" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id252" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Data often arrives as a collection of observations.
Each observation is a record or tuple that contains several values, one for each observed variable.
The lines of a flat file are usually like that: each line is one record,
each record contains several columns,
and each column is a different variable (see Recipe <a href="InputAndOutput.html#recipe-id098">4.15</a>, <a href="InputAndOutput.html#recipe-id098">“Reading Files with a Complex Structure”</a>).
Such data is organized by <em>observation</em>, not by <em>variable</em>.
In other words, you are given rows one at a time rather than columns one at a time.</p>
<p>Each such row might be stored in several ways. One obvious way is as a
vector. If you have purely numerical data, use a vector.</p>
<p>Many datasets, however, are a mixture of numeric, character, and
categorical data, in which case a vector won’t work.
We recommend storing each such heterogeneous row in a one-row data frame.
(You could store each row in a list, but this recipe gets a little more complicated.)</p>
<p>We need to bind together those rows into a data frame.
That’s what the <code>rbind</code> function does.
It binds its arguments in such a way that each argument becomes one row in the result.
If we <code>rbind</code> these three observations, for example, we get a three-row data frame:</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="DataStructures.html#cb358-1" tabindex="-1"></a>r1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="st">&quot;X&quot;</span>)</span>
<span id="cb358-2"><a href="DataStructures.html#cb358-2" tabindex="-1"></a>r2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">3</span>, <span class="at">b =</span> <span class="dv">4</span>, <span class="at">c =</span> <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb358-3"><a href="DataStructures.html#cb358-3" tabindex="-1"></a>r3 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">6</span>, <span class="at">c =</span> <span class="st">&quot;Z&quot;</span>)</span>
<span id="cb358-4"><a href="DataStructures.html#cb358-4" tabindex="-1"></a><span class="fu">rbind</span>(r1, r2, r3)</span>
<span id="cb358-5"><a href="DataStructures.html#cb358-5" tabindex="-1"></a><span class="co">#&gt;   a b c</span></span>
<span id="cb358-6"><a href="DataStructures.html#cb358-6" tabindex="-1"></a><span class="co">#&gt; 1 1 2 X</span></span>
<span id="cb358-7"><a href="DataStructures.html#cb358-7" tabindex="-1"></a><span class="co">#&gt; 2 3 4 Y</span></span>
<span id="cb358-8"><a href="DataStructures.html#cb358-8" tabindex="-1"></a><span class="co">#&gt; 3 5 6 Z</span></span></code></pre></div>
<p>When you’re working with a large number of rows,
they will likely be stored in a list;
that is, you will have a list of rows.
The <code>bind_rows</code> function from the tidyverse package <code>dplyr</code>, handles that case, as shown in this toy example:</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="DataStructures.html#cb359-1" tabindex="-1"></a>list.of.rows <span class="ot">&lt;-</span> <span class="fu">list</span>(r1, r2, r3)</span>
<span id="cb359-2"><a href="DataStructures.html#cb359-2" tabindex="-1"></a><span class="fu">bind_rows</span>(list.of.rows)</span>
<span id="cb359-3"><a href="DataStructures.html#cb359-3" tabindex="-1"></a><span class="co">#&gt;   a b c</span></span>
<span id="cb359-4"><a href="DataStructures.html#cb359-4" tabindex="-1"></a><span class="co">#&gt; 1 1 2 X</span></span>
<span id="cb359-5"><a href="DataStructures.html#cb359-5" tabindex="-1"></a><span class="co">#&gt; 2 3 4 Y</span></span>
<span id="cb359-6"><a href="DataStructures.html#cb359-6" tabindex="-1"></a><span class="co">#&gt; 3 5 6 Z</span></span></code></pre></div>
<p>Sometimes, for reasons beyond your control, each row of data is
stored in a list rather than one-row data frames.
You may be dealing with rows returned by a function or a database package, for example. <code>bind_rows</code> can handle that situation as well:</p>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="DataStructures.html#cb360-1" tabindex="-1"></a><span class="co"># Same toy data, but rows stored in lists</span></span>
<span id="cb360-2"><a href="DataStructures.html#cb360-2" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="st">&quot;X&quot;</span>)</span>
<span id="cb360-3"><a href="DataStructures.html#cb360-3" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">3</span>, <span class="at">b =</span> <span class="dv">4</span>, <span class="at">c =</span> <span class="st">&quot;Y&quot;</span>)</span>
<span id="cb360-4"><a href="DataStructures.html#cb360-4" tabindex="-1"></a>l3 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">a =</span> <span class="dv">5</span>, <span class="at">b =</span> <span class="dv">6</span>, <span class="at">c =</span> <span class="st">&quot;Z&quot;</span>)</span>
<span id="cb360-5"><a href="DataStructures.html#cb360-5" tabindex="-1"></a>list.of.lists <span class="ot">&lt;-</span> <span class="fu">list</span>(l1, l2, l3)</span>
<span id="cb360-6"><a href="DataStructures.html#cb360-6" tabindex="-1"></a></span>
<span id="cb360-7"><a href="DataStructures.html#cb360-7" tabindex="-1"></a><span class="fu">bind_rows</span>(list.of.lists)</span>
<span id="cb360-8"><a href="DataStructures.html#cb360-8" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span id="cb360-9"><a href="DataStructures.html#cb360-9" tabindex="-1"></a><span class="co">#&gt;       a     b c    </span></span>
<span id="cb360-10"><a href="DataStructures.html#cb360-10" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;</span></span>
<span id="cb360-11"><a href="DataStructures.html#cb360-11" tabindex="-1"></a><span class="co">#&gt; 1     1     2 X    </span></span>
<span id="cb360-12"><a href="DataStructures.html#cb360-12" tabindex="-1"></a><span class="co">#&gt; 2     3     4 Y    </span></span>
<span id="cb360-13"><a href="DataStructures.html#cb360-13" tabindex="-1"></a><span class="co">#&gt; 3     5     6 Z</span></span></code></pre></div>
<div id="factors-in-data-frames-1" class="section level4 unnumbered hasAnchor">
<h4>Factors in data frames<a href="DataStructures.html#factors-in-data-frames-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If you would rather get characters instead of factors, you have a couple of options.
One is to set the <code>stringsAsFactors</code> parameter to <code>FALSE</code> when <code>data.frame</code> is called:</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="DataStructures.html#cb361-1" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="at">a =</span> <span class="dv">1</span>, <span class="at">b =</span> <span class="dv">2</span>, <span class="at">c =</span> <span class="st">&quot;a&quot;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb361-2"><a href="DataStructures.html#cb361-2" tabindex="-1"></a><span class="co">#&gt;   a b c</span></span>
<span id="cb361-3"><a href="DataStructures.html#cb361-3" tabindex="-1"></a><span class="co">#&gt; 1 1 2 a</span></span></code></pre></div>
<p>Of course, if you inherited your data and it’s already in a data frame with factors,
you can convert all factors in a <code>data.frame</code> to characters using this bonus recipe:</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="DataStructures.html#cb362-1" tabindex="-1"></a><span class="do">## same set up as in the previous examples</span></span>
<span id="cb362-2"><a href="DataStructures.html#cb362-2" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="at">a=</span><span class="dv">1</span>, <span class="at">b=</span><span class="dv">2</span>, <span class="at">c=</span><span class="st">&#39;X&#39;</span> )</span>
<span id="cb362-3"><a href="DataStructures.html#cb362-3" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="at">a=</span><span class="dv">3</span>, <span class="at">b=</span><span class="dv">4</span>, <span class="at">c=</span><span class="st">&#39;Y&#39;</span> )</span>
<span id="cb362-4"><a href="DataStructures.html#cb362-4" tabindex="-1"></a>l3 <span class="ot">&lt;-</span> <span class="fu">list</span>( <span class="at">a=</span><span class="dv">5</span>, <span class="at">b=</span><span class="dv">6</span>, <span class="at">c=</span><span class="st">&#39;Z&#39;</span> )</span>
<span id="cb362-5"><a href="DataStructures.html#cb362-5" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="fu">list</span>(l1, l2, l3)</span>
<span id="cb362-6"><a href="DataStructures.html#cb362-6" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, <span class="fu">Map</span>(as.data.frame, obs)) </span>
<span id="cb362-7"><a href="DataStructures.html#cb362-7" tabindex="-1"></a></span>
<span id="cb362-8"><a href="DataStructures.html#cb362-8" tabindex="-1"></a><span class="co"># Yes, you could use stringsAsFactors=FALSE above,</span></span>
<span id="cb362-9"><a href="DataStructures.html#cb362-9" tabindex="-1"></a><span class="co"># but we&#39;re assuming the data.frame </span></span>
<span id="cb362-10"><a href="DataStructures.html#cb362-10" tabindex="-1"></a><span class="co"># came to you with factors already </span></span>
<span id="cb362-11"><a href="DataStructures.html#cb362-11" tabindex="-1"></a></span>
<span id="cb362-12"><a href="DataStructures.html#cb362-12" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="fu">sapply</span>(df, is.factor)             <span class="do">## determine which columns are factors</span></span>
<span id="cb362-13"><a href="DataStructures.html#cb362-13" tabindex="-1"></a>df[i] <span class="ot">&lt;-</span> <span class="fu">lapply</span>(df[i], as.character)   <span class="do">## turn only the factors to characters</span></span>
<span id="cb362-14"><a href="DataStructures.html#cb362-14" tabindex="-1"></a>df </span>
<span id="cb362-15"><a href="DataStructures.html#cb362-15" tabindex="-1"></a><span class="co">#&gt;   a b c</span></span>
<span id="cb362-16"><a href="DataStructures.html#cb362-16" tabindex="-1"></a><span class="co">#&gt; 1 1 2 X</span></span>
<span id="cb362-17"><a href="DataStructures.html#cb362-17" tabindex="-1"></a><span class="co">#&gt; 2 3 4 Y</span></span>
<span id="cb362-18"><a href="DataStructures.html#cb362-18" tabindex="-1"></a><span class="co">#&gt; 3 5 6 Z</span></span></code></pre></div>
<p>Keep in mind that if you use a <code>tibble</code> instead of a <code>data.frame</code>, then characters will not be forced into factors by default.</p>
</div>
</div>
<div id="see_also-id252" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id252" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id251">5.18</a>, <a href="DataStructures.html#recipe-id251">“Initializing a Data Frame from Column Data”</a>
if your data is organized by columns, not rows.</p>
</div>
</div>
<div id="recipe-id071" class="section level2 hasAnchor" number="5.20">
<h2><span class="header-section-number">5.20</span> Appending Rows to a Data Frame<a href="DataStructures.html#recipe-id071" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id071" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id071" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to append one or more new rows to a data frame.</p>
</div>
<div id="solution-id071" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id071" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create a second, temporary data frame containing the new rows. Then use
the <code>rbind</code> function to append the temporary data frame to the original
data frame.</p>
</div>
<div id="discussion-id071" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id071" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Suppose we have a data frame of Chicago-area suburbs.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="DataStructures.html#cb363-1" tabindex="-1"></a>suburbs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;./data/suburbs.txt&quot;</span>)</span>
<span id="cb363-2"><a href="DataStructures.html#cb363-2" tabindex="-1"></a><span class="co">#&gt; Rows: 17 Columns: 4</span></span>
<span id="cb363-3"><a href="DataStructures.html#cb363-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb363-4"><a href="DataStructures.html#cb363-4" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb363-5"><a href="DataStructures.html#cb363-5" tabindex="-1"></a><span class="co">#&gt; chr (3): city, county, state</span></span>
<span id="cb363-6"><a href="DataStructures.html#cb363-6" tabindex="-1"></a><span class="co">#&gt; dbl (1): pop</span></span>
<span id="cb363-7"><a href="DataStructures.html#cb363-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb363-8"><a href="DataStructures.html#cb363-8" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb363-9"><a href="DataStructures.html#cb363-9" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span></code></pre></div>
<p>Further suppose we want to append a new row.
First, we create a one-row data frame with the new data:</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="DataStructures.html#cb364-1" tabindex="-1"></a>newRow <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">city =</span> <span class="st">&quot;West Dundee&quot;</span>, <span class="at">county =</span> <span class="st">&quot;Kane&quot;</span>,</span>
<span id="cb364-2"><a href="DataStructures.html#cb364-2" tabindex="-1"></a>                     <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>, <span class="at">pop =</span> <span class="dv">7352</span>)</span></code></pre></div>
<p>Next, we use the <code>rbind</code> function to append that one-row data frame to
our existing data frame:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb365-1"><a href="DataStructures.html#cb365-1" tabindex="-1"></a><span class="fu">rbind</span>(suburbs, newRow)</span>
<span id="cb365-2"><a href="DataStructures.html#cb365-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18 × 4</span></span>
<span id="cb365-3"><a href="DataStructures.html#cb365-3" tabindex="-1"></a><span class="co">#&gt;   city    county   state     pop</span></span>
<span id="cb365-4"><a href="DataStructures.html#cb365-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb365-5"><a href="DataStructures.html#cb365-5" tabindex="-1"></a><span class="co">#&gt; 1 Chicago Cook     IL    2853114</span></span>
<span id="cb365-6"><a href="DataStructures.html#cb365-6" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha Kenosha  WI      90352</span></span>
<span id="cb365-7"><a href="DataStructures.html#cb365-7" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  Kane     IL     171782</span></span>
<span id="cb365-8"><a href="DataStructures.html#cb365-8" tabindex="-1"></a><span class="co">#&gt; 4 Elgin   Kane     IL      94487</span></span>
<span id="cb365-9"><a href="DataStructures.html#cb365-9" tabindex="-1"></a><span class="co">#&gt; 5 Gary    Lake(IN) IN     102746</span></span>
<span id="cb365-10"><a href="DataStructures.html#cb365-10" tabindex="-1"></a><span class="co">#&gt; 6 Joliet  Kendall  IL     106221</span></span>
<span id="cb365-11"><a href="DataStructures.html#cb365-11" tabindex="-1"></a><span class="co">#&gt; # ℹ 12 more rows</span></span></code></pre></div>
<p>The <code>rbind</code> function tells R that we are appending a new row to <code>suburbs</code>, not a new column.
It may be obvious to you that <code>newRow</code> is a row and not a column, but it is not obvious to R.
(Use the <code>cbind</code> function to append a column.)</p>
<p>One word of caution: the new row must use the same column names as the
data frame. Otherwise, <code>rbind</code> will fail.</p>
<p>We can combine these two steps into one, of course:</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="DataStructures.html#cb366-1" tabindex="-1"></a><span class="fu">rbind</span>(suburbs,</span>
<span id="cb366-2"><a href="DataStructures.html#cb366-2" tabindex="-1"></a>      <span class="fu">data.frame</span>(<span class="at">city =</span> <span class="st">&quot;West Dundee&quot;</span>, <span class="at">county =</span> <span class="st">&quot;Kane&quot;</span>,</span>
<span id="cb366-3"><a href="DataStructures.html#cb366-3" tabindex="-1"></a>                 <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>, <span class="at">pop =</span> <span class="dv">7352</span>))</span>
<span id="cb366-4"><a href="DataStructures.html#cb366-4" tabindex="-1"></a><span class="co">#&gt; # A tibble: 18 × 4</span></span>
<span id="cb366-5"><a href="DataStructures.html#cb366-5" tabindex="-1"></a><span class="co">#&gt;   city    county   state     pop</span></span>
<span id="cb366-6"><a href="DataStructures.html#cb366-6" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb366-7"><a href="DataStructures.html#cb366-7" tabindex="-1"></a><span class="co">#&gt; 1 Chicago Cook     IL    2853114</span></span>
<span id="cb366-8"><a href="DataStructures.html#cb366-8" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha Kenosha  WI      90352</span></span>
<span id="cb366-9"><a href="DataStructures.html#cb366-9" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  Kane     IL     171782</span></span>
<span id="cb366-10"><a href="DataStructures.html#cb366-10" tabindex="-1"></a><span class="co">#&gt; 4 Elgin   Kane     IL      94487</span></span>
<span id="cb366-11"><a href="DataStructures.html#cb366-11" tabindex="-1"></a><span class="co">#&gt; 5 Gary    Lake(IN) IN     102746</span></span>
<span id="cb366-12"><a href="DataStructures.html#cb366-12" tabindex="-1"></a><span class="co">#&gt; 6 Joliet  Kendall  IL     106221</span></span>
<span id="cb366-13"><a href="DataStructures.html#cb366-13" tabindex="-1"></a><span class="co">#&gt; # ℹ 12 more rows</span></span></code></pre></div>
<p>We can even extend this technique to multiple new rows because <code>rbind</code>
allows multiple arguments:</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="DataStructures.html#cb367-1" tabindex="-1"></a><span class="fu">rbind</span>(suburbs,</span>
<span id="cb367-2"><a href="DataStructures.html#cb367-2" tabindex="-1"></a>      <span class="fu">data.frame</span>(<span class="at">city =</span> <span class="st">&quot;West Dundee&quot;</span>, <span class="at">county =</span> <span class="st">&quot;Kane&quot;</span>,</span>
<span id="cb367-3"><a href="DataStructures.html#cb367-3" tabindex="-1"></a>                 <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>, <span class="at">pop =</span> <span class="dv">7352</span>),</span>
<span id="cb367-4"><a href="DataStructures.html#cb367-4" tabindex="-1"></a>      <span class="fu">data.frame</span>(<span class="at">city =</span> <span class="st">&quot;East Dundee&quot;</span>, <span class="at">county =</span> <span class="st">&quot;Kane&quot;</span>,</span>
<span id="cb367-5"><a href="DataStructures.html#cb367-5" tabindex="-1"></a>                 <span class="at">state =</span> <span class="st">&quot;IL&quot;</span>, <span class="at">pop =</span> <span class="dv">3192</span>)</span>
<span id="cb367-6"><a href="DataStructures.html#cb367-6" tabindex="-1"></a>)</span>
<span id="cb367-7"><a href="DataStructures.html#cb367-7" tabindex="-1"></a><span class="co">#&gt; # A tibble: 19 × 4</span></span>
<span id="cb367-8"><a href="DataStructures.html#cb367-8" tabindex="-1"></a><span class="co">#&gt;   city    county   state     pop</span></span>
<span id="cb367-9"><a href="DataStructures.html#cb367-9" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb367-10"><a href="DataStructures.html#cb367-10" tabindex="-1"></a><span class="co">#&gt; 1 Chicago Cook     IL    2853114</span></span>
<span id="cb367-11"><a href="DataStructures.html#cb367-11" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha Kenosha  WI      90352</span></span>
<span id="cb367-12"><a href="DataStructures.html#cb367-12" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  Kane     IL     171782</span></span>
<span id="cb367-13"><a href="DataStructures.html#cb367-13" tabindex="-1"></a><span class="co">#&gt; 4 Elgin   Kane     IL      94487</span></span>
<span id="cb367-14"><a href="DataStructures.html#cb367-14" tabindex="-1"></a><span class="co">#&gt; 5 Gary    Lake(IN) IN     102746</span></span>
<span id="cb367-15"><a href="DataStructures.html#cb367-15" tabindex="-1"></a><span class="co">#&gt; 6 Joliet  Kendall  IL     106221</span></span>
<span id="cb367-16"><a href="DataStructures.html#cb367-16" tabindex="-1"></a><span class="co">#&gt; # ℹ 13 more rows</span></span></code></pre></div>
<p>It’s worth noting that in the previous examples we seamlessly comingled tibbles and data frames. <code>suburbs</code> is a tibble because we used the tidy function <code>read_csv</code>, which produces tibbles, while <code>newRow</code> was created using <code>data.frame</code>, which returns a traditional R data frame.
And note that the data frames contain factors while the tibbles do not:</p>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="DataStructures.html#cb368-1" tabindex="-1"></a><span class="fu">str</span>(suburbs) <span class="co"># a tibble</span></span>
<span id="cb368-2"><a href="DataStructures.html#cb368-2" tabindex="-1"></a><span class="co">#&gt; spc_tbl_ [17 × 4] (S3: spec_tbl_df/tbl_df/tbl/data.frame)</span></span>
<span id="cb368-3"><a href="DataStructures.html#cb368-3" tabindex="-1"></a><span class="co">#&gt;  $ city  : chr [1:17] &quot;Chicago&quot; &quot;Kenosha&quot; &quot;Aurora&quot; &quot;Elgin&quot; ...</span></span>
<span id="cb368-4"><a href="DataStructures.html#cb368-4" tabindex="-1"></a><span class="co">#&gt;  $ county: chr [1:17] &quot;Cook&quot; &quot;Kenosha&quot; &quot;Kane&quot; &quot;Kane&quot; ...</span></span>
<span id="cb368-5"><a href="DataStructures.html#cb368-5" tabindex="-1"></a><span class="co">#&gt;  $ state : chr [1:17] &quot;IL&quot; &quot;WI&quot; &quot;IL&quot; &quot;IL&quot; ...</span></span>
<span id="cb368-6"><a href="DataStructures.html#cb368-6" tabindex="-1"></a><span class="co">#&gt;  $ pop   : num [1:17] 2853114 90352 171782 94487 102746 ...</span></span>
<span id="cb368-7"><a href="DataStructures.html#cb368-7" tabindex="-1"></a><span class="co">#&gt;  - attr(*, &quot;spec&quot;)=</span></span>
<span id="cb368-8"><a href="DataStructures.html#cb368-8" tabindex="-1"></a><span class="co">#&gt;   .. cols(</span></span>
<span id="cb368-9"><a href="DataStructures.html#cb368-9" tabindex="-1"></a><span class="co">#&gt;   ..   city = col_character(),</span></span>
<span id="cb368-10"><a href="DataStructures.html#cb368-10" tabindex="-1"></a><span class="co">#&gt;   ..   county = col_character(),</span></span>
<span id="cb368-11"><a href="DataStructures.html#cb368-11" tabindex="-1"></a><span class="co">#&gt;   ..   state = col_character(),</span></span>
<span id="cb368-12"><a href="DataStructures.html#cb368-12" tabindex="-1"></a><span class="co">#&gt;   ..   pop = col_double()</span></span>
<span id="cb368-13"><a href="DataStructures.html#cb368-13" tabindex="-1"></a><span class="co">#&gt;   .. )</span></span>
<span id="cb368-14"><a href="DataStructures.html#cb368-14" tabindex="-1"></a><span class="co">#&gt;  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</span></span>
<span id="cb368-15"><a href="DataStructures.html#cb368-15" tabindex="-1"></a><span class="fu">str</span>(newRow)  <span class="co"># a data.frame</span></span>
<span id="cb368-16"><a href="DataStructures.html#cb368-16" tabindex="-1"></a><span class="co">#&gt; &#39;data.frame&#39;:    1 obs. of  4 variables:</span></span>
<span id="cb368-17"><a href="DataStructures.html#cb368-17" tabindex="-1"></a><span class="co">#&gt;  $ city  : chr &quot;West Dundee&quot;</span></span>
<span id="cb368-18"><a href="DataStructures.html#cb368-18" tabindex="-1"></a><span class="co">#&gt;  $ county: chr &quot;Kane&quot;</span></span>
<span id="cb368-19"><a href="DataStructures.html#cb368-19" tabindex="-1"></a><span class="co">#&gt;  $ state : chr &quot;IL&quot;</span></span>
<span id="cb368-20"><a href="DataStructures.html#cb368-20" tabindex="-1"></a><span class="co">#&gt;  $ pop   : num 7352</span></span></code></pre></div>
<p>When the inputs to <code>rbind</code> are a mix of <code>data.frame</code> objects and <code>tibble</code> objects,
the result will have the same type as the <em>first</em> argument of <code>rbind</code>.
So this would produce a tibble:</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="DataStructures.html#cb369-1" tabindex="-1"></a><span class="fu">rbind</span>(some_tibble, some_data.frame)</span></code></pre></div>
<p>while this would produce a data frame:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="DataStructures.html#cb370-1" tabindex="-1"></a><span class="fu">rbind</span>(some_data.frame, some_tibble)</span></code></pre></div>
</div>
</div>
<div id="recipe-id068" class="section level2 hasAnchor" number="5.21">
<h2><span class="header-section-number">5.21</span> Selecting Data Frame Columns by Position<a href="DataStructures.html#recipe-id068" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id068" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id068" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to select columns from a data frame according to their position.</p>
</div>
<div id="solution-id068" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id068" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>select</code> function:</p>
<p><code>df %&gt;% select(*n*~1~, *n*~2~, ..., *n*~k~)</code></p>
<p>where <code>df</code> is a data frame
and <code>*n*~1~</code>, <code>*n*~2~</code>, …, <code>*n~k~*</code> are integers with values between 1 and the number of columns.</p>
</div>
<div id="discussion-id068" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id068" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s use the first three rows of the dataset of population data
for the 16 largest cities in the Chicago metropolitan area:</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="DataStructures.html#cb371-1" tabindex="-1"></a>suburbs <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/suburbs.txt&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span>
<span id="cb371-2"><a href="DataStructures.html#cb371-2" tabindex="-1"></a><span class="co">#&gt; Rows: 17 Columns: 4</span></span>
<span id="cb371-3"><a href="DataStructures.html#cb371-3" tabindex="-1"></a><span class="co">#&gt; ── Column specification ────────────────────────────────────────────────────────</span></span>
<span id="cb371-4"><a href="DataStructures.html#cb371-4" tabindex="-1"></a><span class="co">#&gt; Delimiter: &quot;,&quot;</span></span>
<span id="cb371-5"><a href="DataStructures.html#cb371-5" tabindex="-1"></a><span class="co">#&gt; chr (3): city, county, state</span></span>
<span id="cb371-6"><a href="DataStructures.html#cb371-6" tabindex="-1"></a><span class="co">#&gt; dbl (1): pop</span></span>
<span id="cb371-7"><a href="DataStructures.html#cb371-7" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb371-8"><a href="DataStructures.html#cb371-8" tabindex="-1"></a><span class="co">#&gt; ℹ Use `spec()` to retrieve the full column specification for this data.</span></span>
<span id="cb371-9"><a href="DataStructures.html#cb371-9" tabindex="-1"></a><span class="co">#&gt; ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</span></span>
<span id="cb371-10"><a href="DataStructures.html#cb371-10" tabindex="-1"></a>suburbs</span>
<span id="cb371-11"><a href="DataStructures.html#cb371-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb371-12"><a href="DataStructures.html#cb371-12" tabindex="-1"></a><span class="co">#&gt;   city    county  state     pop</span></span>
<span id="cb371-13"><a href="DataStructures.html#cb371-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb371-14"><a href="DataStructures.html#cb371-14" tabindex="-1"></a><span class="co">#&gt; 1 Chicago Cook    IL    2853114</span></span>
<span id="cb371-15"><a href="DataStructures.html#cb371-15" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha Kenosha WI      90352</span></span>
<span id="cb371-16"><a href="DataStructures.html#cb371-16" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  Kane    IL     171782</span></span></code></pre></div>
<p>Right off the bat, we can see this is a tibble.
This will extract the first column (and only the first column):</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="DataStructures.html#cb372-1" tabindex="-1"></a>suburbs <span class="sc">%&gt;%</span></span>
<span id="cb372-2"><a href="DataStructures.html#cb372-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span>)</span>
<span id="cb372-3"><a href="DataStructures.html#cb372-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span id="cb372-4"><a href="DataStructures.html#cb372-4" tabindex="-1"></a><span class="co">#&gt;   city   </span></span>
<span id="cb372-5"><a href="DataStructures.html#cb372-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  </span></span>
<span id="cb372-6"><a href="DataStructures.html#cb372-6" tabindex="-1"></a><span class="co">#&gt; 1 Chicago</span></span>
<span id="cb372-7"><a href="DataStructures.html#cb372-7" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha</span></span>
<span id="cb372-8"><a href="DataStructures.html#cb372-8" tabindex="-1"></a><span class="co">#&gt; 3 Aurora</span></span></code></pre></div>
<p>These will extract multiple columns:</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="DataStructures.html#cb373-1" tabindex="-1"></a>suburbs <span class="sc">%&gt;%</span></span>
<span id="cb373-2"><a href="DataStructures.html#cb373-2" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)</span>
<span id="cb373-3"><a href="DataStructures.html#cb373-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span id="cb373-4"><a href="DataStructures.html#cb373-4" tabindex="-1"></a><span class="co">#&gt;   city    state     pop</span></span>
<span id="cb373-5"><a href="DataStructures.html#cb373-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb373-6"><a href="DataStructures.html#cb373-6" tabindex="-1"></a><span class="co">#&gt; 1 Chicago IL    2853114</span></span>
<span id="cb373-7"><a href="DataStructures.html#cb373-7" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha WI      90352</span></span>
<span id="cb373-8"><a href="DataStructures.html#cb373-8" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  IL     171782</span></span>
<span id="cb373-9"><a href="DataStructures.html#cb373-9" tabindex="-1"></a>suburbs <span class="sc">%&gt;%</span></span>
<span id="cb373-10"><a href="DataStructures.html#cb373-10" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>)</span>
<span id="cb373-11"><a href="DataStructures.html#cb373-11" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span id="cb373-12"><a href="DataStructures.html#cb373-12" tabindex="-1"></a><span class="co">#&gt;   county  state     pop</span></span>
<span id="cb373-13"><a href="DataStructures.html#cb373-13" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;</span></span>
<span id="cb373-14"><a href="DataStructures.html#cb373-14" tabindex="-1"></a><span class="co">#&gt; 1 Cook    IL    2853114</span></span>
<span id="cb373-15"><a href="DataStructures.html#cb373-15" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha WI      90352</span></span>
<span id="cb373-16"><a href="DataStructures.html#cb373-16" tabindex="-1"></a><span class="co">#&gt; 3 Kane    IL     171782</span></span></code></pre></div>
<div id="list-expressions" class="section level4 unnumbered hasAnchor">
<h4>List expressions<a href="DataStructures.html#list-expressions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>select</code> verb is part of the tidyverse package <code>dplyr</code>.
Base R also has its own rich functionality for selecting columns, at the cost of some additional syntax.
The choices can be confusing until you understand the logic behind the alternatives.</p>
<p>One alternative uses list expressions.
This might seem odd until you recall that a data frame is a list of columns.
The list expression selects columns from that list.
As you read this explanation,
notice how the change in syntax—double brackets versus single brackets—changes the
meaning of the expression.</p>
<p>We can select exactly one column by using double brackets (<code>[[</code> and <code>]]</code>):</p>
<dl>
<dt><code>df[[*n*]]</code></dt>
<dd>
<p>Returns a <em>vector</em>—specifically, the vector in the <em>n</em>th column of <code>df</code>.</p>
</dd>
</dl>
<p>We can select one or more columns by using single brackets (<code>[</code> and <code>]</code>).</p>
<dl>
<dt><code>df[*n*]</code></dt>
<dd>
<p>Returns a <em>data frame</em> consisting solely of the <em>n</em>th column of <code>df</code>.</p>
</dd>
<dt><code>df[c(*n*~1~, *n*~2~, ..., *n*~k~)]</code></dt>
<dd>
<p>Returns a <em>data frame</em> built from the columns in positions <em>n</em><sub>1</sub>,
<em>n</em><sub>2</sub>, …, <em>n</em><sub>k</sub> of <code>df</code>.</p>
</dd>
</dl>
<p>For example,
we can use list notation to select the first column from <code>suburbs</code>,
the <code>city</code> column:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="DataStructures.html#cb374-1" tabindex="-1"></a>suburbs[[<span class="dv">1</span>]]</span>
<span id="cb374-2"><a href="DataStructures.html#cb374-2" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Chicago&quot; &quot;Kenosha&quot; &quot;Aurora&quot;</span></span></code></pre></div>
<p>That column is a character vector, so that’s what <code>suburbs[[1]]</code> returns: a vector.</p>
<p>The result changes when we use the single-bracket notation,
as in <code>suburbs[1]</code> or <code>suburbs[c(1,3)]</code>.
We still get the requested columns, but R leaves them in a data frame.
This example returns the first column as a one-column data frame:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="DataStructures.html#cb375-1" tabindex="-1"></a>suburbs[<span class="dv">1</span>]</span>
<span id="cb375-2"><a href="DataStructures.html#cb375-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 1</span></span>
<span id="cb375-3"><a href="DataStructures.html#cb375-3" tabindex="-1"></a><span class="co">#&gt;   city   </span></span>
<span id="cb375-4"><a href="DataStructures.html#cb375-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;  </span></span>
<span id="cb375-5"><a href="DataStructures.html#cb375-5" tabindex="-1"></a><span class="co">#&gt; 1 Chicago</span></span>
<span id="cb375-6"><a href="DataStructures.html#cb375-6" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha</span></span>
<span id="cb375-7"><a href="DataStructures.html#cb375-7" tabindex="-1"></a><span class="co">#&gt; 3 Aurora</span></span></code></pre></div>
<p>And this example returns the first and third columns as a data frame:</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="DataStructures.html#cb376-1" tabindex="-1"></a>suburbs[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>)]</span>
<span id="cb376-2"><a href="DataStructures.html#cb376-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 2</span></span>
<span id="cb376-3"><a href="DataStructures.html#cb376-3" tabindex="-1"></a><span class="co">#&gt;   city    state</span></span>
<span id="cb376-4"><a href="DataStructures.html#cb376-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;</span></span>
<span id="cb376-5"><a href="DataStructures.html#cb376-5" tabindex="-1"></a><span class="co">#&gt; 1 Chicago IL   </span></span>
<span id="cb376-6"><a href="DataStructures.html#cb376-6" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha WI   </span></span>
<span id="cb376-7"><a href="DataStructures.html#cb376-7" tabindex="-1"></a><span class="co">#&gt; 3 Aurora  IL</span></span></code></pre></div>
<p>(The expression <code>suburbs[1]</code> is actually a shortened form of <code>suburbs[c(1)]</code>.
We don’t need the <code>c(...)</code> wrapper because there is only one <em>n</em>.)</p>
<p>A major source of confusion is that <code>suburbs[[1]]</code> and <code>suburbs[1]</code> look
similar but produce very different results:</p>
<dl>
<dt><code>suburbs[[1]]</code></dt>
<dd>
<p>Returns one column.</p>
</dd>
<dt><code>suburbs[1]</code></dt>
<dd>
<p>Returns a data frame that contains contains exactly one column.</p>
</dd>
</dl>
<p>The point here is that “one column” is different from “a data frame that contains one column.”
The first expression returns a vector. The second expression returns a data frame, which is a different data structure.</p>
</div>
<div id="matrix-style-subscripting" class="section level4 unnumbered hasAnchor">
<h4>Matrix-style subscripting<a href="DataStructures.html#matrix-style-subscripting" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can use matrix-style subscripting to select columns from a data frame:</p>
<dl>
<dt><code>df[, *n*]</code></dt>
<dd>
<p>Returns a <em>vector</em> taken from the <em>n</em>th column
(assuming that <code>*n*</code> contains exactly one value).</p>
</dd>
<dt><code>df[, c(*n*~1~, *n*~2~, ..., *n*~k~)]</code></dt>
<dd>
<p>Returns a <em>data frame</em> built from the columns in positions <em>n</em><sub>1</sub>,
<em>n</em><sub>2</sub>, …, <em>n<sub>k</sub></em>.</p>
</dd>
</dl>
<p>An odd quirk can bite you here: you might get a column vector or you
might get a data frame, depending upon how many subscripts you use and whether you are operating on a tibble or a <code>data.frame</code>. tibbles will always return tibbles when you index. However a <code>data.frame</code> may return a vector if you use one index.</p>
<p>In the simple case of one index on a <code>data.frame</code> you get a vector, like this:</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="DataStructures.html#cb377-1" tabindex="-1"></a><span class="co"># suburbs is a tibble so we convert for this example</span></span>
<span id="cb377-2"><a href="DataStructures.html#cb377-2" tabindex="-1"></a>suburbs_df <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(suburbs)</span>
<span id="cb377-3"><a href="DataStructures.html#cb377-3" tabindex="-1"></a>suburbs_df[, <span class="dv">1</span>]</span>
<span id="cb377-4"><a href="DataStructures.html#cb377-4" tabindex="-1"></a><span class="co">#&gt; [1] &quot;Chicago&quot; &quot;Kenosha&quot; &quot;Aurora&quot;</span></span></code></pre></div>
<p>But using the same matrix-style syntax with multiple indexes returns a
data frame:</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="DataStructures.html#cb378-1" tabindex="-1"></a>suburbs_df[, <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)]</span>
<span id="cb378-2"><a href="DataStructures.html#cb378-2" tabindex="-1"></a><span class="co">#&gt;      city     pop</span></span>
<span id="cb378-3"><a href="DataStructures.html#cb378-3" tabindex="-1"></a><span class="co">#&gt; 1 Chicago 2853114</span></span>
<span id="cb378-4"><a href="DataStructures.html#cb378-4" tabindex="-1"></a><span class="co">#&gt; 2 Kenosha   90352</span></span>
<span id="cb378-5"><a href="DataStructures.html#cb378-5" tabindex="-1"></a><span class="co">#&gt; 3  Aurora  171782</span></span></code></pre></div>
<p>This creates a problem.
Suppose you see this expression in some old R code:</p>
<div class="sourceCode" id="cb379"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb379-1"><a href="DataStructures.html#cb379-1" tabindex="-1"></a>df[, vec]</span></code></pre></div>
<p>Quick, does that return a column or a data frame?
Well, it depends.
If <code>vec</code> contains one value, then you get a column;
otherwise, you get a data frame.
You cannot tell from the syntax alone.</p>
<p>To avoid this problem, you can include <code>drop=FALSE</code> in the subscripts,
forcing R to return a data frame:</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="DataStructures.html#cb380-1" tabindex="-1"></a>df[, vec, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<p>Now there is no ambiguity about the returned data structure.
It’s a data frame.</p>
<p>When all is said and done, using matrix notation to select columns from data frames can be tricky.
Use <code>select</code> when you can.</p>
</div>
</div>
<div id="see_also-id068" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id068" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id250">5.17</a>, <a href="DataStructures.html#recipe-id250">“Selecting One Row or Column from a Matrix”</a>, for more
about using <code>drop=FALSE</code>.</p>
</div>
</div>
<div id="recipe-id254" class="section level2 hasAnchor" number="5.22">
<h2><span class="header-section-number">5.22</span> Selecting Data Frame Columns by Name<a href="DataStructures.html#recipe-id254" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id254" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id254" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to select columns from a data frame according to their name.</p>
</div>
<div id="solution-id254" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id254" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use <code>select</code> and give it the column names.</p>
<p><code>df %&gt;% select(*name*~1~, *name*~2~, ..., *name*~k~)</code></p>
</div>
<div id="discussion-id254" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id254" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>All columns in a data frame must have names.
If you know the name, it’s usually more convenient and readable to select by name, not by position.
Note that you don’t put the column names in quotes when using <code>select</code>.</p>
<p>The solutions just described are similar to those for Recipe <a href="DataStructures.html#recipe-id068">5.21</a>, <a href="DataStructures.html#recipe-id068">“Selecting Data Frame Columns by Position”</a>,
where we selected columns by position.
The only difference is that here we use column names instead of column numbers.
All the observations made in that recipe apply here.</p>
<div id="list-expressions-1" class="section level4 unnumbered hasAnchor">
<h4>List expressions<a href="DataStructures.html#list-expressions-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>select</code> verb is part of the tidyverse.
Base R itself also has several rich methods for selecting columns by name,
at the cost of some additional syntax.</p>
<p>To select a single column, use one of these list expressions.
Note that they use <em>double</em> brackets (<code>[[</code> and <code>]]</code>).</p>
<dl>
<dt><code>df[["*name*"]]</code></dt>
<dd>
<p>Returns <em>one column</em>, the column called <code>*name*</code>.</p>
</dd>
<dt><code>df$*name*</code></dt>
<dd>
<p>Same as previous, just different syntax.</p>
</dd>
</dl>
<p>To select one or more columns, use these list expressions.
Note that they use <em>single</em> brackets (<code>[</code> and <code>]</code>).</p>
<dl>
<dt><code>df["*name*"]</code></dt>
<dd>
<p>Selects one column from a data frame.</p>
</dd>
<dt><code>df[c("*name*~1~", "*name*~2~", ..., "*name*~k~")]</code></dt>
<dd>
<p>Selects several columns.</p>
</dd>
</dl>
</div>
<div id="matrix-style-subscripting-1" class="section level4 unnumbered hasAnchor">
<h4>Matrix-style subscripting<a href="DataStructures.html#matrix-style-subscripting-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Base R also allows matrix-style subscripting
for selecting one or more columns from a data frame
by name:</p>
<dl>
<dt><code>df[, "*name*"]</code></dt>
<dd>
<p>Returns the named column.</p>
</dd>
<dt><code>df[, c("*name*~1~", "*name*~2~", ..., "*name*~k~")]</code></dt>
<dd>
<p>Selects several columns in a data frame.</p>
</dd>
</dl>
<p>The matrix-style subscripting can return either a column or a data frame, so be careful how many names you supply.
See the comments in Recipe <a href="DataStructures.html#recipe-id068">5.21</a>, <a href="DataStructures.html#recipe-id068">“Selecting Data Frame Columns by Position”</a> for a
discussion of this “gotcha” and using <code>drop=FALSE</code>.</p>
</div>
</div>
<div id="see_also-id254" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id254" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id068">5.21</a>, <a href="DataStructures.html#recipe-id068">“Selecting Data Frame Columns by Position”</a>,
to select by position instead of name.</p>
</div>
</div>
<div id="recipe-id069" class="section level2 hasAnchor" number="5.23">
<h2><span class="header-section-number">5.23</span> Changing the Names of Data Frame Columns<a href="DataStructures.html#recipe-id069" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id069" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id069" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to change the names of a data frame’s columns.</p>
</div>
<div id="solution-id069" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id069" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>rename</code> function from the <code>dplyr</code> package makes renaming pretty easy:</p>
<p><code>df %&gt;% rename(*newname*~1~ = *oldname*~1~, . . . , *newname*~n~ = *oldname*~n~)</code></p>
<p>where <code>df</code> is a data frame,
<code>*oldname*~i~</code> are names of columns in <code>df</code>, and
<code>*newname*~i~</code> are the desired new names.</p>
<p>Note that the argument order is <code>*newname* = *oldname*</code>.</p>
</div>
<div id="discussion-id069" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id069" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The columns of data frames must have names.
You can change them using <code>rename</code>:</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="DataStructures.html#cb381-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">V2 =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">V3 =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb381-2"><a href="DataStructures.html#cb381-2" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tom =</span> V1, <span class="at">dick =</span> V2)</span>
<span id="cb381-3"><a href="DataStructures.html#cb381-3" tabindex="-1"></a><span class="co">#&gt;   tom dick V3</span></span>
<span id="cb381-4"><a href="DataStructures.html#cb381-4" tabindex="-1"></a><span class="co">#&gt; 1   1    4  7</span></span>
<span id="cb381-5"><a href="DataStructures.html#cb381-5" tabindex="-1"></a><span class="co">#&gt; 2   2    5  8</span></span>
<span id="cb381-6"><a href="DataStructures.html#cb381-6" tabindex="-1"></a><span class="co">#&gt; 3   3    6  9</span></span></code></pre></div>
<p>The column names are stored in an attribute called <code>colnames</code>,
so another way to rename columns is to change that attribute.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="DataStructures.html#cb382-1" tabindex="-1"></a><span class="fu">colnames</span>(df) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;tom&quot;</span>, <span class="st">&quot;dick&quot;</span>, <span class="st">&quot;V2&quot;</span>)</span>
<span id="cb382-2"><a href="DataStructures.html#cb382-2" tabindex="-1"></a>df</span>
<span id="cb382-3"><a href="DataStructures.html#cb382-3" tabindex="-1"></a><span class="co">#&gt;   tom dick V2</span></span>
<span id="cb382-4"><a href="DataStructures.html#cb382-4" tabindex="-1"></a><span class="co">#&gt; 1   1    4  7</span></span>
<span id="cb382-5"><a href="DataStructures.html#cb382-5" tabindex="-1"></a><span class="co">#&gt; 2   2    5  8</span></span>
<span id="cb382-6"><a href="DataStructures.html#cb382-6" tabindex="-1"></a><span class="co">#&gt; 3   3    6  9</span></span></code></pre></div>
<p>If you happen to be using <code>select</code> to select individual columns,
you can rename those columns at the same time:</p>
<div class="sourceCode" id="cb383"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb383-1"><a href="DataStructures.html#cb383-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">V1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">V2 =</span> <span class="dv">4</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">V3 =</span> <span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span>
<span id="cb383-2"><a href="DataStructures.html#cb383-2" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="at">tom =</span> V1, V2)</span>
<span id="cb383-3"><a href="DataStructures.html#cb383-3" tabindex="-1"></a><span class="co">#&gt;   tom V2</span></span>
<span id="cb383-4"><a href="DataStructures.html#cb383-4" tabindex="-1"></a><span class="co">#&gt; 1   1  4</span></span>
<span id="cb383-5"><a href="DataStructures.html#cb383-5" tabindex="-1"></a><span class="co">#&gt; 2   2  5</span></span>
<span id="cb383-6"><a href="DataStructures.html#cb383-6" tabindex="-1"></a><span class="co">#&gt; 3   3  6</span></span></code></pre></div>
<p>The difference between renaming with <code>select</code> versus renaming with <code>rename</code> is that
<code>rename</code> will rename what you specify, leaving all other columns intact and unchanged,
whereas <code>select</code> keeps only the columns you select.
In the preceding example, <code>V3</code> is dropped because it’s not in the <code>select</code> statement.
Both <code>select</code> and <code>rename</code> use the same argument order: <code>*newname* = *oldname*</code>.</p>
</div>
<div id="see_also-id069" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id069" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id074">5.29</a>, <a href="DataStructures.html#recipe-id074">“Converting One Structured Data Type into Another”</a>.</p>
</div>
</div>
<div id="recipe-id249" class="section level2 hasAnchor" number="5.24">
<h2><span class="header-section-number">5.24</span> Removing NAs from a Data Frame<a href="DataStructures.html#recipe-id249" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id249" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id249" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Your data frame contains <code>NA</code> values, which is creating problems for you.</p>
</div>
<div id="solution-id249" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id249" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use <code>na.omit</code> to remove rows that contain any <code>NA</code> values.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="DataStructures.html#cb384-1" tabindex="-1"></a>clean_dfrm <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(dfrm)</span></code></pre></div>
</div>
<div id="discussion-id249" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id249" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We frequently stumble upon situations where just a few <code>NA</code> values in a
data frame cause everything to fall apart. One solution is simply to
remove all rows that contain any <code>NA</code>s. That’s what <code>na.omit</code> does.</p>
<p>Consider a data frame with embedded <code>NA</code> values:</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="DataStructures.html#cb385-1" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb385-2"><a href="DataStructures.html#cb385-2" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="cn">NA</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>),</span>
<span id="cb385-3"><a href="DataStructures.html#cb385-3" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb385-4"><a href="DataStructures.html#cb385-4" tabindex="-1"></a>)</span>
<span id="cb385-5"><a href="DataStructures.html#cb385-5" tabindex="-1"></a>df</span>
<span id="cb385-6"><a href="DataStructures.html#cb385-6" tabindex="-1"></a><span class="co">#&gt;    x  y</span></span>
<span id="cb385-7"><a href="DataStructures.html#cb385-7" tabindex="-1"></a><span class="co">#&gt; 1  1  1</span></span>
<span id="cb385-8"><a href="DataStructures.html#cb385-8" tabindex="-1"></a><span class="co">#&gt; 2 NA  2</span></span>
<span id="cb385-9"><a href="DataStructures.html#cb385-9" tabindex="-1"></a><span class="co">#&gt; 3  3 NA</span></span>
<span id="cb385-10"><a href="DataStructures.html#cb385-10" tabindex="-1"></a><span class="co">#&gt; 4  4  4</span></span>
<span id="cb385-11"><a href="DataStructures.html#cb385-11" tabindex="-1"></a><span class="co">#&gt; 5  5  5</span></span></code></pre></div>
<p>The <code>cumsum</code> function should calculate cumulative sums,
but it stumbles on the <code>NA</code> values:</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="DataStructures.html#cb386-1" tabindex="-1"></a><span class="fu">colSums</span>(df)</span>
<span id="cb386-2"><a href="DataStructures.html#cb386-2" tabindex="-1"></a><span class="co">#&gt;  x  y </span></span>
<span id="cb386-3"><a href="DataStructures.html#cb386-3" tabindex="-1"></a><span class="co">#&gt; NA NA</span></span></code></pre></div>
<p>If we remove rows with <code>NA</code> values, <code>cumsum</code> can complete its summations:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="DataStructures.html#cb387-1" tabindex="-1"></a><span class="fu">cumsum</span>(<span class="fu">na.omit</span>(df))</span>
<span id="cb387-2"><a href="DataStructures.html#cb387-2" tabindex="-1"></a><span class="co">#&gt;    x  y</span></span>
<span id="cb387-3"><a href="DataStructures.html#cb387-3" tabindex="-1"></a><span class="co">#&gt; 1  1  1</span></span>
<span id="cb387-4"><a href="DataStructures.html#cb387-4" tabindex="-1"></a><span class="co">#&gt; 4  5  5</span></span>
<span id="cb387-5"><a href="DataStructures.html#cb387-5" tabindex="-1"></a><span class="co">#&gt; 5 10 10</span></span></code></pre></div>
<p>But watch out! The <code>na.omit</code> function removes <em>entire</em> rows.
The non-<code>NA</code> values in those rows disappear, changing the meaning of “cumulative sum.”</p>
<p>This recipe works for removing <code>NA</code> from vectors and matrices, too,
but not lists.</p>
<p>The obvious danger here is that simply dropping observations from your
data could render the results numerically or statistically
meaningless. Make sure that omitting data makes sense in your context.
Remember that <code>na.omit</code> will remove entire rows, not just the <code>NA</code> values,
which could eliminate useful information.</p>
</div>
</div>
<div id="recipe-id072" class="section level2 hasAnchor" number="5.25">
<h2><span class="header-section-number">5.25</span> Excluding Columns by Name<a href="DataStructures.html#recipe-id072" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id072" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id072" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to exclude a column from a data frame using its name.</p>
</div>
<div id="solution-id072" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id072" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Use the <code>select</code> function from the <code>dplyr</code> package with a dash (minus sign) in front of the name of the column to exclude:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="DataStructures.html#cb388-1" tabindex="-1"></a><span class="fu">select</span>(df, <span class="sc">-</span>bad)   <span class="co"># Select all columns from df except bad</span></span></code></pre></div>
</div>
<div id="discussion-id072" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id072" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Placing a minus sign in front of a varible name tells the <code>select</code> function to drop that variable.</p>
<p>This comes in handy when we’re calculating a correlation matrix from a data frame,
and we want to exclude the nondata columns such as labels.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="DataStructures.html#cb389-1" tabindex="-1"></a><span class="fu">cor</span>(patient_data)</span>
<span id="cb389-2"><a href="DataStructures.html#cb389-2" tabindex="-1"></a><span class="co">#&gt;            patient_id    pre  dosage   post</span></span>
<span id="cb389-3"><a href="DataStructures.html#cb389-3" tabindex="-1"></a><span class="co">#&gt; patient_id     1.0000  0.159 -0.0486  0.391</span></span>
<span id="cb389-4"><a href="DataStructures.html#cb389-4" tabindex="-1"></a><span class="co">#&gt; pre            0.1590  1.000  0.8104 -0.289</span></span>
<span id="cb389-5"><a href="DataStructures.html#cb389-5" tabindex="-1"></a><span class="co">#&gt; dosage        -0.0486  0.810  1.0000 -0.526</span></span>
<span id="cb389-6"><a href="DataStructures.html#cb389-6" tabindex="-1"></a><span class="co">#&gt; post           0.3912 -0.289 -0.5262  1.000</span></span></code></pre></div>
<p>This correlation matrix includes the meaningless “correlation” between
<code>patient_id</code> and other variables, which is annoying.
We can exclude the <code>patient_id</code> column to clean up the output:</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="DataStructures.html#cb390-1" tabindex="-1"></a>patient_data <span class="sc">%&gt;%</span></span>
<span id="cb390-2"><a href="DataStructures.html#cb390-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>patient_id) <span class="sc">%&gt;%</span></span>
<span id="cb390-3"><a href="DataStructures.html#cb390-3" tabindex="-1"></a>  cor</span>
<span id="cb390-4"><a href="DataStructures.html#cb390-4" tabindex="-1"></a><span class="co">#&gt;           pre dosage   post</span></span>
<span id="cb390-5"><a href="DataStructures.html#cb390-5" tabindex="-1"></a><span class="co">#&gt; pre     1.000  0.810 -0.289</span></span>
<span id="cb390-6"><a href="DataStructures.html#cb390-6" tabindex="-1"></a><span class="co">#&gt; dosage  0.810  1.000 -0.526</span></span>
<span id="cb390-7"><a href="DataStructures.html#cb390-7" tabindex="-1"></a><span class="co">#&gt; post   -0.289 -0.526  1.000</span></span></code></pre></div>
<p>We can exclude multiple columns the same way:</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="DataStructures.html#cb391-1" tabindex="-1"></a>patient_data <span class="sc">%&gt;%</span></span>
<span id="cb391-2"><a href="DataStructures.html#cb391-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>patient_id, <span class="sc">-</span>dosage) <span class="sc">%&gt;%</span></span>
<span id="cb391-3"><a href="DataStructures.html#cb391-3" tabindex="-1"></a>  <span class="fu">cor</span>()</span>
<span id="cb391-4"><a href="DataStructures.html#cb391-4" tabindex="-1"></a><span class="co">#&gt;         pre   post</span></span>
<span id="cb391-5"><a href="DataStructures.html#cb391-5" tabindex="-1"></a><span class="co">#&gt; pre   1.000 -0.289</span></span>
<span id="cb391-6"><a href="DataStructures.html#cb391-6" tabindex="-1"></a><span class="co">#&gt; post -0.289  1.000</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id155" class="section level2 hasAnchor" number="5.26">
<h2><span class="header-section-number">5.26</span> Combining Two Data Frames<a href="DataStructures.html#recipe-id155" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id155" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id155" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to combine the contents of two data frames into one data frame.</p>
</div>
<div id="solution-id155" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id155" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>To combine the columns of two data frames side by side, use <code>cbind</code> (column bind):</p>
<pre><code>all.cols &lt;- cbind(df1, df2)</code></pre>
<p>To “stack” the rows of two data frames, use <code>rbind</code> (row bind):</p>
<pre><code>all.rows &lt;- rbind(df1, df2)</code></pre>
</div>
<div id="discussion-id155" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id155" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You can combine data frames in one of two ways:
either by putting the columns side by side to create a wider data frame,
or by “stacking” the rows to create a taller data frame.</p>
<p>The <code>cbind</code> function will combine data frames side by side.</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb394-1"><a href="DataStructures.html#cb394-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">a =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb394-2"><a href="DataStructures.html#cb394-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">b =</span> <span class="fu">c</span>(<span class="dv">7</span>,<span class="dv">8</span>))</span>
<span id="cb394-3"><a href="DataStructures.html#cb394-3" tabindex="-1"></a></span>
<span id="cb394-4"><a href="DataStructures.html#cb394-4" tabindex="-1"></a><span class="fu">cbind</span>(df1, df2)</span>
<span id="cb394-5"><a href="DataStructures.html#cb394-5" tabindex="-1"></a><span class="co">#&gt;   a b</span></span>
<span id="cb394-6"><a href="DataStructures.html#cb394-6" tabindex="-1"></a><span class="co">#&gt; 1 1 7</span></span>
<span id="cb394-7"><a href="DataStructures.html#cb394-7" tabindex="-1"></a><span class="co">#&gt; 2 2 8</span></span></code></pre></div>
<p>You would normally combine columns with the same height (number of rows).
Technically speaking, however, <code>cbind</code> does not require matching heights.
If one data frame is short, it will invoke the Recycling Rule
to extend the short columns as necessary (see Recipe <a href="DataStructures.html#recipe-id050">5.3</a>, <a href="DataStructures.html#recipe-id050">“Understanding the Recycling Rule”</a>),
which may or may not be what you want.</p>
<p>The <code>rbind</code> function will “stack” the rows of two data frames.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="DataStructures.html#cb395-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb395-2"><a href="DataStructures.html#cb395-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="st">&quot;b&quot;</span>, <span class="st">&quot;b&quot;</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>))</span>
<span id="cb395-3"><a href="DataStructures.html#cb395-3" tabindex="-1"></a><span class="fu">rbind</span>(df1, df2)</span>
<span id="cb395-4"><a href="DataStructures.html#cb395-4" tabindex="-1"></a><span class="co">#&gt;   x  y</span></span>
<span id="cb395-5"><a href="DataStructures.html#cb395-5" tabindex="-1"></a><span class="co">#&gt; 1 a  5</span></span>
<span id="cb395-6"><a href="DataStructures.html#cb395-6" tabindex="-1"></a><span class="co">#&gt; 2 a  6</span></span>
<span id="cb395-7"><a href="DataStructures.html#cb395-7" tabindex="-1"></a><span class="co">#&gt; 3 b  9</span></span>
<span id="cb395-8"><a href="DataStructures.html#cb395-8" tabindex="-1"></a><span class="co">#&gt; 4 b 10</span></span></code></pre></div>
<p>The <code>rbind</code> function requires that the data frames have the same width—the same number of columns and same column names.
The columns need not be in the same <em>order</em>, however;
<code>rbind</code> will sort that out.</p>
<p>Finally, this recipe is slightly more general than the title implies.
First, you can combine more than two data frames because both <code>rbind</code>
and <code>cbind</code> accept multiple arguments. Second, you can apply this recipe
to other data types because <code>rbind</code> and <code>cbind</code> work also with vectors,
lists, and matrices.</p>
</div>
</div>
<div id="recipe-id057" class="section level2 hasAnchor" number="5.27">
<h2><span class="header-section-number">5.27</span> Merging Data Frames by Common Column<a href="DataStructures.html#recipe-id057" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id057" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id057" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have two data frames that share a common column.
You want to merge or join their rows into one data frame by matching on the common column.</p>
</div>
<div id="solution-id057" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id057" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We can use the <code>join</code> functions from the <code>dplyr</code> package to join our data frames together on a common column.</p>
<p>If you want only rows that appear only in <em>both</em> data frames,
use <code>inner_join</code>.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="DataStructures.html#cb396-1" tabindex="-1"></a><span class="fu">inner_join</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;col&quot;</span>)</span></code></pre></div>
<p>where <code>"col"</code> is the column that appears in both data frames.</p>
<p>If you want all rows that appear in <em>either</em> data frame,
use <code>full_join</code> instead.</p>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="DataStructures.html#cb397-1" tabindex="-1"></a><span class="fu">full_join</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;col&quot;</span>)</span></code></pre></div>
<p>If you want all rows from <code>df1</code> and only those from <code>df2</code> that match, use <code>left_join</code>:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="DataStructures.html#cb398-1" tabindex="-1"></a><span class="fu">left_join</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;col&quot;</span>)</span></code></pre></div>
<p>Or to get all records from <code>df2</code> and only the matching ones from <code>df1</code>, use <code>right_join</code>:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="DataStructures.html#cb399-1" tabindex="-1"></a><span class="fu">right_join</span>(df1, df2, <span class="at">by =</span> <span class="st">&quot;col&quot;</span>)</span></code></pre></div>
</div>
<div id="discussion-id057" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id057" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Suppose you have two data frames, <code>born</code> and <code>died</code>, that each contain a
column called <code>name</code>:</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="DataStructures.html#cb400-1" tabindex="-1"></a>born <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb400-2"><a href="DataStructures.html#cb400-2" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Moe&quot;</span>, <span class="st">&quot;Larry&quot;</span>, <span class="st">&quot;Curly&quot;</span>, <span class="st">&quot;Harry&quot;</span>),</span>
<span id="cb400-3"><a href="DataStructures.html#cb400-3" tabindex="-1"></a>  <span class="at">year.born =</span> <span class="fu">c</span>(<span class="dv">1887</span>, <span class="dv">1902</span>, <span class="dv">1903</span>, <span class="dv">1964</span>),</span>
<span id="cb400-4"><a href="DataStructures.html#cb400-4" tabindex="-1"></a>  <span class="at">place.born =</span> <span class="fu">c</span>(<span class="st">&quot;Bensonhurst&quot;</span>, <span class="st">&quot;Philadelphia&quot;</span>, <span class="st">&quot;Brooklyn&quot;</span>, <span class="st">&quot;Moscow&quot;</span>)</span>
<span id="cb400-5"><a href="DataStructures.html#cb400-5" tabindex="-1"></a>)</span>
<span id="cb400-6"><a href="DataStructures.html#cb400-6" tabindex="-1"></a></span>
<span id="cb400-7"><a href="DataStructures.html#cb400-7" tabindex="-1"></a>died <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb400-8"><a href="DataStructures.html#cb400-8" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;Curly&quot;</span>, <span class="st">&quot;Moe&quot;</span>, <span class="st">&quot;Larry&quot;</span>),</span>
<span id="cb400-9"><a href="DataStructures.html#cb400-9" tabindex="-1"></a>  <span class="at">year.died =</span> <span class="fu">c</span>(<span class="dv">1952</span>, <span class="dv">1975</span>, <span class="dv">1975</span>)</span>
<span id="cb400-10"><a href="DataStructures.html#cb400-10" tabindex="-1"></a>)</span></code></pre></div>
<p>We can merge them into one data frame by using <code>name</code> to combine matched rows:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="DataStructures.html#cb401-1" tabindex="-1"></a><span class="fu">inner_join</span>(born, died, <span class="at">by=</span><span class="st">&quot;name&quot;</span>)</span>
<span id="cb401-2"><a href="DataStructures.html#cb401-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 3 × 4</span></span>
<span id="cb401-3"><a href="DataStructures.html#cb401-3" tabindex="-1"></a><span class="co">#&gt;   name  year.born place.born   year.died</span></span>
<span id="cb401-4"><a href="DataStructures.html#cb401-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb401-5"><a href="DataStructures.html#cb401-5" tabindex="-1"></a><span class="co">#&gt; 1 Moe        1887 Bensonhurst       1975</span></span>
<span id="cb401-6"><a href="DataStructures.html#cb401-6" tabindex="-1"></a><span class="co">#&gt; 2 Larry      1902 Philadelphia      1975</span></span>
<span id="cb401-7"><a href="DataStructures.html#cb401-7" tabindex="-1"></a><span class="co">#&gt; 3 Curly      1903 Brooklyn          1952</span></span></code></pre></div>
<p>Notice that <code>inner_join</code> does not require the rows to be sorted or even to
occur in the same order.
It found the matching rows for Curly even though they occur in different positions.
It also discarded the row for Harry, which appeared only in <code>born</code>.</p>
<p>A <code>full_join</code> of these data frames includes every row of both,
even rows with no matching values.</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="DataStructures.html#cb402-1" tabindex="-1"></a><span class="fu">full_join</span>(born, died, <span class="at">by=</span><span class="st">&quot;name&quot;</span>)</span>
<span id="cb402-2"><a href="DataStructures.html#cb402-2" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span id="cb402-3"><a href="DataStructures.html#cb402-3" tabindex="-1"></a><span class="co">#&gt;   name  year.born place.born   year.died</span></span>
<span id="cb402-4"><a href="DataStructures.html#cb402-4" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb402-5"><a href="DataStructures.html#cb402-5" tabindex="-1"></a><span class="co">#&gt; 1 Moe        1887 Bensonhurst       1975</span></span>
<span id="cb402-6"><a href="DataStructures.html#cb402-6" tabindex="-1"></a><span class="co">#&gt; 2 Larry      1902 Philadelphia      1975</span></span>
<span id="cb402-7"><a href="DataStructures.html#cb402-7" tabindex="-1"></a><span class="co">#&gt; 3 Curly      1903 Brooklyn          1952</span></span>
<span id="cb402-8"><a href="DataStructures.html#cb402-8" tabindex="-1"></a><span class="co">#&gt; 4 Harry      1964 Moscow              NA</span></span></code></pre></div>
<p>Where a data frame has no matching value, its columns are filled with <code>NA</code>:
the <code>year.died</code> for Harry is <code>NA</code>.</p>
<p>If we don’t supply the join function with a field to join by, then it will attempt to join by any field with matching names in both data frames and will return an informational response stating which field it is joining on:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="DataStructures.html#cb403-1" tabindex="-1"></a><span class="fu">full_join</span>(born, died)</span>
<span id="cb403-2"><a href="DataStructures.html#cb403-2" tabindex="-1"></a><span class="co">#&gt; Joining with `by = join_by(name)`</span></span>
<span id="cb403-3"><a href="DataStructures.html#cb403-3" tabindex="-1"></a><span class="co">#&gt; # A tibble: 4 × 4</span></span>
<span id="cb403-4"><a href="DataStructures.html#cb403-4" tabindex="-1"></a><span class="co">#&gt;   name  year.born place.born   year.died</span></span>
<span id="cb403-5"><a href="DataStructures.html#cb403-5" tabindex="-1"></a><span class="co">#&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;            &lt;dbl&gt;</span></span>
<span id="cb403-6"><a href="DataStructures.html#cb403-6" tabindex="-1"></a><span class="co">#&gt; 1 Moe        1887 Bensonhurst       1975</span></span>
<span id="cb403-7"><a href="DataStructures.html#cb403-7" tabindex="-1"></a><span class="co">#&gt; 2 Larry      1902 Philadelphia      1975</span></span>
<span id="cb403-8"><a href="DataStructures.html#cb403-8" tabindex="-1"></a><span class="co">#&gt; 3 Curly      1903 Brooklyn          1952</span></span>
<span id="cb403-9"><a href="DataStructures.html#cb403-9" tabindex="-1"></a><span class="co">#&gt; 4 Harry      1964 Moscow              NA</span></span></code></pre></div>
<p>If we want to join two data frames on a field that does not have the same name in both data frames, we need our <code>by</code> paramter to be a vector of equalities:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="DataStructures.html#cb404-1" tabindex="-1"></a>df1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">key1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">value=</span><span class="dv">2</span>)</span>
<span id="cb404-2"><a href="DataStructures.html#cb404-2" tabindex="-1"></a>df2 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">key2 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">value=</span><span class="dv">3</span>)</span>
<span id="cb404-3"><a href="DataStructures.html#cb404-3" tabindex="-1"></a></span>
<span id="cb404-4"><a href="DataStructures.html#cb404-4" tabindex="-1"></a><span class="fu">inner_join</span>(df1, df2, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;key1&quot;</span> <span class="ot">=</span> <span class="st">&quot;key2&quot;</span>))</span>
<span id="cb404-5"><a href="DataStructures.html#cb404-5" tabindex="-1"></a><span class="co">#&gt;   key1 value.x value.y</span></span>
<span id="cb404-6"><a href="DataStructures.html#cb404-6" tabindex="-1"></a><span class="co">#&gt; 1    1       2       3</span></span>
<span id="cb404-7"><a href="DataStructures.html#cb404-7" tabindex="-1"></a><span class="co">#&gt; 2    2       2       3</span></span>
<span id="cb404-8"><a href="DataStructures.html#cb404-8" tabindex="-1"></a><span class="co">#&gt; 3    3       2       3</span></span></code></pre></div>
<p>Notice in the preceding example how both tables have a field named <code>value</code> that gets renamed in the output. The field from the first table becomes <code>value.x</code>, while the field from the second table becomes <code>value.y</code>. <code>dplyr</code> joins will always rename output this way when there is a naming clash on columns not being joined on.</p>
</div>
<div id="see_also-id057" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id057" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id155">5.26</a>, <a href="DataStructures.html#recipe-id155">“Combining Two Data Frames”</a>, for other ways to combine
data frames.</p>
<p>The examples joined on a single column, <code>name</code>, but these functions can join on multiple columns, too.
For details, see the function documentation by typing <code>**?dplyr::join**</code>.</p>
<p>These join operations were inspired by SQL.
Just like in SQL, there are multiple types of joins in <code>dplyr</code>, including inner, left, right, full, semi, and anti.
Again, see the function documentation.</p>
</div>
</div>
<div id="recipe-id248" class="section level2 hasAnchor" number="5.28">
<h2><span class="header-section-number">5.28</span> Converting One Atomic Value into Another<a href="DataStructures.html#recipe-id248" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id248" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id248" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You have a data value that has an atomic data type: character, complex,
double, integer, or logical. You want to convert this value into one of
the other atomic data types.</p>
</div>
<div id="solution-id248" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id248" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>For each atomic data type, there is a function for converting values to
that type. The conversion functions for atomic types include:</p>
<ul>
<li><p><code>as.character(x)</code></p></li>
<li><p><code>as.complex(x)</code></p></li>
<li><p><code>as.numeric(x)</code> or <code>as.double(x)</code></p></li>
<li><p><code>as.integer(x)</code></p></li>
<li><p><code>as.logical(x)</code></p></li>
</ul>
</div>
<div id="discussion-id248" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id248" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Converting one atomic type into another is usually pretty simple. If the
conversion works, you get what you would expect. If it does not work,
you get <code>NA</code>:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="DataStructures.html#cb405-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="st">&quot; 3.14 &quot;</span>)</span>
<span id="cb405-2"><a href="DataStructures.html#cb405-2" tabindex="-1"></a><span class="co">#&gt; [1] 3.14</span></span>
<span id="cb405-3"><a href="DataStructures.html#cb405-3" tabindex="-1"></a><span class="fu">as.integer</span>(<span class="fl">3.14</span>)</span>
<span id="cb405-4"><a href="DataStructures.html#cb405-4" tabindex="-1"></a><span class="co">#&gt; [1] 3</span></span>
<span id="cb405-5"><a href="DataStructures.html#cb405-5" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="st">&quot;foo&quot;</span>)</span>
<span id="cb405-6"><a href="DataStructures.html#cb405-6" tabindex="-1"></a><span class="co">#&gt; Warning: NAs introduced by coercion</span></span>
<span id="cb405-7"><a href="DataStructures.html#cb405-7" tabindex="-1"></a><span class="co">#&gt; [1] NA</span></span>
<span id="cb405-8"><a href="DataStructures.html#cb405-8" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">101</span>)</span>
<span id="cb405-9"><a href="DataStructures.html#cb405-9" tabindex="-1"></a><span class="co">#&gt; [1] &quot;101&quot;</span></span></code></pre></div>
<p>If you have a vector of atomic types, these functions apply themselves
to every value. So the preceding examples of converting scalars
generalize easily to converting entire vectors:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="DataStructures.html#cb406-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2.718&quot;</span>, <span class="st">&quot;7.389&quot;</span>, <span class="st">&quot;20.086&quot;</span>))</span>
<span id="cb406-2"><a href="DataStructures.html#cb406-2" tabindex="-1"></a><span class="co">#&gt; [1]  1.00  2.72  7.39 20.09</span></span>
<span id="cb406-3"><a href="DataStructures.html#cb406-3" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="fu">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;2.718&quot;</span>, <span class="st">&quot;7.389&quot;</span>, <span class="st">&quot;20.086&quot;</span>, <span class="st">&quot;etc.&quot;</span>))</span>
<span id="cb406-4"><a href="DataStructures.html#cb406-4" tabindex="-1"></a><span class="co">#&gt; Warning: NAs introduced by coercion</span></span>
<span id="cb406-5"><a href="DataStructures.html#cb406-5" tabindex="-1"></a><span class="co">#&gt; [1]  1.00  2.72  7.39 20.09    NA</span></span>
<span id="cb406-6"><a href="DataStructures.html#cb406-6" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">101</span><span class="sc">:</span><span class="dv">105</span>)</span>
<span id="cb406-7"><a href="DataStructures.html#cb406-7" tabindex="-1"></a><span class="co">#&gt; [1] &quot;101&quot; &quot;102&quot; &quot;103&quot; &quot;104&quot; &quot;105&quot;</span></span></code></pre></div>
<p>When converting logical values into numeric values, R converts <code>FALSE</code>
to <code>0</code> and <code>TRUE</code> to <code>1</code>:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="DataStructures.html#cb407-1" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="cn">FALSE</span>)</span>
<span id="cb407-2"><a href="DataStructures.html#cb407-2" tabindex="-1"></a><span class="co">#&gt; [1] 0</span></span>
<span id="cb407-3"><a href="DataStructures.html#cb407-3" tabindex="-1"></a><span class="fu">as.numeric</span>(<span class="cn">TRUE</span>)</span>
<span id="cb407-4"><a href="DataStructures.html#cb407-4" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>This behavior is useful when you are counting occurrences of <code>TRUE</code> in
vectors of logical values. If <code>logvec</code> is a vector of logical values,
then <code>sum(logvec)</code> does an implicit conversion from logical to integer
and returns the number of <code>TRUE</code>s:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="DataStructures.html#cb408-1" tabindex="-1"></a>logvec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb408-2"><a href="DataStructures.html#cb408-2" tabindex="-1"></a><span class="fu">sum</span>(logvec) <span class="do">## num true</span></span>
<span id="cb408-3"><a href="DataStructures.html#cb408-3" tabindex="-1"></a><span class="co">#&gt; [1] 4</span></span>
<span id="cb408-4"><a href="DataStructures.html#cb408-4" tabindex="-1"></a><span class="fu">length</span>(logvec) <span class="sc">-</span> <span class="fu">sum</span>(logvec) <span class="do">## num not true</span></span>
<span id="cb408-5"><a href="DataStructures.html#cb408-5" tabindex="-1"></a><span class="co">#&gt; [1] 2</span></span></code></pre></div>
</div>
</div>
<div id="recipe-id074" class="section level2 hasAnchor" number="5.29">
<h2><span class="header-section-number">5.29</span> Converting One Structured Data Type into Another<a href="DataStructures.html#recipe-id074" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="problem-id074" class="section level3 unnumbered hasAnchor">
<h3>Problem<a href="DataStructures.html#problem-id074" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>You want to convert a variable from one structured data type to
another—for example, converting a vector into a list, or a matrix into a
data frame.</p>
</div>
<div id="solution-id074" class="section level3 unnumbered hasAnchor">
<h3>Solution<a href="DataStructures.html#solution-id074" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>These functions convert their argument into the corresponding structured
data type:</p>
<ul>
<li><p><code>as.data.frame(x)</code></p></li>
<li><p><code>as.list(x)</code></p></li>
<li><p><code>as.matrix(x)</code></p></li>
<li><p><code>as.vector(x)</code></p></li>
</ul>
<p>Some of these conversions may surprise you, however. We suggest you review Table <a href="DataStructures.html#tab:tbl-conversions">5.2</a> for more detail.</p>
</div>
<div id="discussion-id074" class="section level3 unnumbered hasAnchor">
<h3>Discussion<a href="DataStructures.html#discussion-id074" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Converting between structured data types can be tricky. Some conversions
behave as you’d expect. If you convert a matrix into a data frame, for
instance, the rows and columns of the matrix become the rows and columns
of the data frame. No sweat.</p>
<table>
<caption><span id="tab:tbl-conversions">Table 5.2: </span> Data conversions</caption>
<colgroup>
<col width="18%" />
<col width="50%" />
<col width="31%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Conversion</th>
<th align="left">How</th>
<th align="left">Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Vector→List</td>
<td align="left"><code>as.list(vec)</code></td>
<td align="left">Don’t use <code>list(vec)</code>; that
creates a one-element list whose
only element is a copy of <code>vec</code>.</td>
</tr>
<tr class="even">
<td align="left">Vector→Matrix</td>
<td align="left">To create a one-column matrix:
<code>cbind(vec)</code> <em>or</em> <code>as.matrix(vec)</code>
To create a one-row matrix: <code>rbind(vec)</code>
To create an <em>n</em> × <em>m</em> matrix: <code>matrix(vec,n,m)</code></td>
<td align="left">See Recipe <a href="DataStructures.html#recipe-id062">5.14</a>.</td>
</tr>
<tr class="odd">
<td align="left">Vector→Data frame</td>
<td align="left">To create a one-column data frame:
<code>as.data.frame(vec)</code>
To create a one-row data frame:
<code>as.data.frame(rbind(vec))</code></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">List→Vector</td>
<td align="left"><code>unlist(lst)</code></td>
<td align="left">Use <code>unlist</code> rather than <code>as.vector</code>;
see Note 1 and Recipe <a href="DataStructures.html#recipe-id152">5.11</a>.</td>
</tr>
<tr class="odd">
<td align="left">List→Matrix</td>
<td align="left">To create a one-column matrix: <code>as.matrix(lst)</code>
To create a one-row matrix: <code>as.matrix(rbind(lst))</code>
To create an <em>n</em> × <em>m</em> matrix: <code>matrix(lst,n,m)</code></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">List→Data frame</td>
<td align="left">If the list elements are columns of data:
<code>as.data.frame(lst)</code>
If the list elements are rows of data, see
Recipe <a href="DataStructures.html#recipe-id252">5.19</a>.</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Matrix→Vector</td>
<td align="left"><code>as.vector(mat)</code></td>
<td align="left">Returns all matrix elements in a vector.</td>
</tr>
<tr class="even">
<td align="left">Matrix→List</td>
<td align="left"><code>as.list(mat)</code></td>
<td align="left">Returns all matrix elements in a list.</td>
</tr>
<tr class="odd">
<td align="left">Matrix→Data frame</td>
<td align="left"><code>as.data.frame(mat)</code></td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Data frame→Vector</td>
<td align="left">To convert a one-row data frame: <code>df[1,]</code>
To convert a one-column data frame:
<code>df[,1]</code> or <code>df[[1]]</code></td>
<td align="left">See Note 2.</td>
</tr>
<tr class="odd">
<td align="left">Data frame→List</td>
<td align="left"><code>as.list(df)</code></td>
<td align="left">See Note 3.</td>
</tr>
<tr class="even">
<td align="left">Data frame→Matrix</td>
<td align="left"><code>as.matrix(df)</code></td>
<td align="left">See Note 4.</td>
</tr>
</tbody>
</table>
<p>In other cases, the results might surprise you.
Table <a href="DataStructures.html#tab:tbl-conversions">5.2</a> summarizes some noteworthy examples.
The following Notes are cited in that table:</p>
<ol style="list-style-type: decimal">
<li><p>When you convert a list into a vector, the conversion works cleanly
if your list contains atomic values that are all of the same mode.
Things become complicated if either (a) your list contains mixed
modes (e.g., numeric and character), in which case everything is
converted to characters; or (b) your list contains other structured
data types, such as sublists or data frames—in which case very odd
things happen, so don’t do that.</p></li>
<li><p>Converting a data frame into a vector makes sense only if the data
frame contains one row or one column. To extract all its elements
into one long vector, use <code>as.vector(as.matrix(df))</code>. But even
that makes sense only if the data frame is all numeric or
all character; if not, everything is first converted to
character strings.</p></li>
<li><p>Converting a data frame into a list may seem odd in that a data
frame is already a list (i.e., a list of columns). Using <code>as.list</code>
essentially removes the class (<code>data.frame</code>) and thereby exposes the
underlying list. That is useful when you want R to treat your data
structure as a list—say, for printing.</p></li>
<li><p>Be careful when converting a data frame into a matrix. If the data
frame contains only numeric values, then you get a numeric matrix. If
it contains only character values, you get a character matrix. But
if the data frame is a mix of numbers, characters, and/or factors,
then all values are first converted to characters. The result is a
matrix of character strings.</p></li>
</ol>
<div id="special-considerations-for-matrices" class="section level4 unnumbered hasAnchor">
<h4>Special considerations for matrices<a href="DataStructures.html#special-considerations-for-matrices" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The matrix conversions detailed here assume that your matrix is
homogeneous—that is, all elements have the same mode (e.g., all numeric or all
character). A matrix can to be heterogeneous, too, when the matrix is
built from a list. If so, conversions become messy. For example, when
you convert a mixed-mode matrix to a data frame, the data frame’s
columns are actually lists (to accommodate the mixed data).</p>
</div>
</div>
<div id="see_also-id074" class="section level3 unnumbered hasAnchor">
<h3>See Also<a href="DataStructures.html#see_also-id074" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>See Recipe <a href="DataStructures.html#recipe-id248">5.28</a>, <a href="DataStructures.html#recipe-id248">“Converting One Atomic Value into Another”</a>, for
converting atomic data types; see the
<a href="DataStructures.html#intro-DataStructures">Introduction</a> to this chapter for remarks on
problematic conversions.</p>

</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="1">
<li id="fn1"><p>A data frame can be built from a mixture of vectors, factors, and
matrices. The columns of the matrices become columns in the data
frame. The number of <em>rows</em> in each matrix must match the <em>length</em>
of the vectors and factors. In other words, all elements of a data
frame must have the same <em>height</em>.<a href="DataStructures.html#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="InputAndOutput.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="DataTransformations.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": true,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/CerebralMastication/R-Cookbook/edit/master/05_DataStructures.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
